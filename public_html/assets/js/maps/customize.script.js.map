{"version":3,"sources":["../../../../source/modules/customize/core/js/script.js","../../../../source/modules/customize/core/js/jscolor.js"],"names":["Wee","fn","make","init","this","$private","getColors","scope","match","colors","$","filter","i","el","validateColor","data","test","colorValues","each","$el","attr","val","initScrolling","append","scrollbar","tinyscrollbar","updateScrollbar","update","initAccordion","$setRef","on","next","toggleClass","initAutoComplete","keyCodes","arrowDown","arrowUp","enter","esc","shift","tab","preview","contentWindow","regexp","keyup","e","$next","value","matches","list","$currentSelection","autocompleteShowing","keyCode","shiftHeld","undefined","children","first","prev","removeClass","addClass","last","text","removeSuggestions","processChange","name","weeVariables","substr","toLowerCase","indexOf","push","length","is","empty","after","keydown","which","preventDefault","blur","_win","setTimeout","click","select","_body","target","not","$target","inputEl","parent","sel","delegate","remove","initModal","template","file","variables","request","url","success","view","render","showModal","failure","showMessage","status","statusText","hideModal","html","initPreview","isRecursive","resetInput","parse","parseValue","valid","validate","response","setVal","trim","defaultValue","RegExp","input","message","$messageBar","hideMessage","vars","less","Parser","serializeVars","css","result","error","output","types","split","forEach","type","isUnit","isNumber","isColor","isFont","isPath","isFile","isEntity","isColorKeyword","color","stack","isMatch","every","initSelectAll","window","getSelection","document","createRange","range","selectNodeContents","removeAllRanges","addRange","selection","body","createTextRange","textRange","moveToElementText","jscolor","dir","bindClass","binding","preloading","install","addEvent","bind","preload","getDir","detected","detectDir","base","location","href","getElementsByTagName","src","URI","srcAbs","toAbsolute","path","replace","query","fragment","toString","matchClass","m","className","prop","Function","eInvalidProp","imgRequire","hasOwnProperty","loadImage","images","pad","sld","cross","arrow","imgLoaded","requireImage","filename","Image","fetchElement","mixed","getElementById","evnt","func","addEventListener","attachEvent","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","getElementPos","e1","e2","x","y","offsetParent","offsetLeft","offsetTop","parentNode","nodeName","toUpperCase","scrollLeft","scrollTop","getElementSize","offsetWidth","offsetHeight","getRelMousePos","event","offsetX","offsetY","layerX","layerY","getViewPos","pageYOffset","pageXOffset","documentElement","getViewSize","innerWidth","innerHeight","clientWidth","clientHeight","uri","removeDotSegments","out","rm","scheme","authority","r","t","RGB_HSV","g","b","n","Math","min","v","max","h","HSV_RGB","s","floor","f","removePicker","picker","owner","removeChild","boxB","drawPicker","setBtnBorder","insetColors","THIS","pickerInsetColor","pickerOutsetColor","p","btn","style","borderColor","box","createElement","padB","padM","sldB","sldM","btnS","btnT","createTextNode","pickerCloseText","segSize","seg","height","fontSize","lineHeight","appendChild","onmouseup","onmouseout","focus","onmousedown","abortBlur","onmousemove","holdPad","holdSld","setPad","setSld","dispatchImmediateChange","handle_touchmove","touches","pageX","touchOffset","X","pageY","Y","stopPropagation","removeEventListener","valueElement","modeID","hsv","fromHSV","dims","getPickerDims","width","position","clear","left","top","zIndex","pickerZIndex","border","pickerBorder","pickerBorderColor","background","pickerFaceColor","pickerFace","pickerInset","cursor","overflow","display","slider","right","eOldIE","pickerClosable","bottom","padding","font","textAlign","hidePicker","padImg","backgroundImage","backgroundRepeat","backgroundPosition","redrawPad","redrawSld","o","pickerButtonHeight","yComponent","round","childNodes","rgb","backgroundColor","c","isPickerOwner","blurTarget","importColor","pickerOnfocus","blurValue","mpos","leaveSld","leavePad","onImmediateChange","callback","call","required","adjust","hash","caps","styleElement","minH","maxH","minS","maxS","minV","maxV","pickerMode","pickerPosition","pickerSmartPosition","pickerButtonColor","showPicker","a","tp","ts","vp","vs","ps","l","pp","jscStyle","exportColor","leaveValue","leaveStyle","fromString","flags","fromRGB","hex","parseInt","charAt","updateField","setAttribute"],"mappings":"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","file":"script.min.js","sourcesContent":["Wee.fn.make('customize', {\n\tinit: function() {\n\t\tthis.$private('initScrolling');\n\t\tthis.$private('initAccordion');\n\t\tthis.$private('initAutoComplete');\n\t\tthis.$private('initPreview');\n\t\tthis.$private('initModal');\n\t\tthis.$private('initSelectAll');\n\t\tthis.$private('getColors');\n\t}\n},\n{\n\tgetColors: function() {\n\t\tvar scope = this,\n\t\t\tmatch = /color|(\\|false)?/g,\n\t\t\tcolors = $('input').filter(function(i, el) {\n\t\t\t\tvar validateColor = $(el).data('validate');\n\n\t\t\t\treturn match.test(validateColor);\n\t\t\t});\n\n\t\tscope.colorValues = [];\n\n\t\tcolors.each(function(el) {\n\t\t\tvar $el = $(el);\n\n\t\t\tscope.colorValues[$el.attr('name')] = $el.val();\n\t\t});\n\t},\n\tinitScrolling: function() {\n\t\t$('ref:scrollable').each(function(el) {\n\t\t\t$(el).append('<div class=\"scrollbar\"><div class=\"track\">' +\n\t\t\t\t'<div class=\"thumb\"></div></div></div>');\n\n\t\t\tthis.scrollbar = tinyscrollbar(el);\n\t\t});\n\t},\n\tupdateScrollbar: function() {\n\t\ttinyscrollbar($('.scrollable')[0]).update();\n\t},\n\tinitAccordion: function() {\n\t\tvar scope = this;\n\n\t\tWee.$setRef();\n\n\t\t$('ref:toggle').on('click', function() {\n\t\t\t$(this).next().toggleClass('js-hide');\n\n\t\t\tscope.updateScrollbar();\n\t\t});\n\t},\n\tinitAutoComplete: function() {\n\t\tvar scope = this,\n\t\t\tkeyCodes = {\n\t\t\t\tarrowDown: 40,\n\t\t\t\tarrowUp: 38,\n\t\t\t\tenter: 13,\n\t\t\t\tesc: 27,\n\t\t\t\tshift: 16,\n\t\t\t\ttab: 9\n\t\t\t},\n\t\t\tpreview = $('ref:previewFrame')[0].contentWindow,\n\t\t\tregexp = /(@[\\da-z-_]+$)/i;\n\n\t\t$('input').on({\n\t\t\tkeyup: function(e, el) {\n\t\t\t\tvar $next = $(this).next(), // Michael - revisit\n\t\t\t\t\tvalue = el.value,\n\t\t\t\t\tmatch = value.match(regexp),\n\t\t\t\t\tmatches = [],\n\t\t\t\t\tlist = '',\n\t\t\t\t\t$currentSelection = false;\n\n\t\t\t\tif (scope.autocompleteShowing && e.keyCode === keyCodes.shift) {\n\t\t\t\t\tscope.shiftHeld = false;\n\t\t\t\t} else if ((scope.autocompleteShowing && e.keyCode === keyCodes.arrowUp) ||\n\t\t\t\t\t(scope.shiftHeld && e.keyCode === keyCodes.tab)) {\n\t\t\t\t\tif (scope.$currentSelection !==\n\t\t\t\t\t\tundefined && scope.$currentSelection[0] !==\n\t\t\t\t\t\t$('.suggestions').children().first()[0] // Michael - ref\n\t\t\t\t\t) {\n\t\t\t\t\t\t$currentSelection = scope.$currentSelection.prev();\n\t\t\t\t\t\tscope.$currentSelection.removeClass('current-selection');\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($currentSelection) {\n\t\t\t\t\t\t$currentSelection.addClass('current-selection');\n\t\t\t\t\t\tscope.$currentSelection = $currentSelection;\n\t\t\t\t\t}\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode ===\n\t\t\t\t\tkeyCodes.arrowDown || e.keyCode === keyCodes.tab\n\t\t\t\t) {\n\t\t\t\t\tif (scope.$currentSelection !== undefined &&\n\t\t\t\t\t\tscope.$currentSelection[0] !==\n\t\t\t\t\t\t$('.suggestions').children().last()[0]\n\t\t\t\t\t) {\n\t\t\t\t\t\t$currentSelection = scope.$currentSelection.next();\n\t\t\t\t\t\tscope.$currentSelection.removeClass('current-selection');\n\t\t\t\t\t} else if (scope.$currentSelection === undefined) {\n\t\t\t\t\t\t$currentSelection = $('.suggestions').children().first();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($currentSelection) {\n\t\t\t\t\t\t$currentSelection.addClass('current-selection');\n\t\t\t\t\t\tscope.$currentSelection = $currentSelection;\n\t\t\t\t\t}\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode === keyCodes.enter) {\n\t\t\t\t\tif (scope.$currentSelection !== undefined) {\n\t\t\t\t\t\t$(el).val(scope.$currentSelection.text());\n\t\t\t\t\t\tscope.$currentSelection = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t\tscope.processChange(el);\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode === keyCodes.esc) {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t} else if (regexp.test(value)) {\n\t\t\t\t\tscope.autocompleteShowing = true;\n\t\t\t\t\tscope.$currentSelection = undefined;\n\n\t\t\t\t\tfor (var name in preview.weeVariables) {\n\t\t\t\t\t\tif (name.substr(1).toLowerCase()\n\t\t\t\t\t\t\t.indexOf(match[0].substr(1).toLowerCase()) !== -1) {\n\t\t\t\t\t\t\tmatches.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (matches.length) {\n\t\t\t\t\t\tfor (var i = 0 ; i < matches.length ; i++) {\n\t\t\t\t\t\t\tlist += '<li class=\"suggestion\">' + matches[i];\n\n\t\t\t\t\t\t\tif (scope.colorValues[matches[i]]) {\n\t\t\t\t\t\t\t\tlist += '<span class=\"color-preview\" style=\"background: ' +\n\t\t\t\t\t\t\t\tscope.colorValues[matches[i]] + '\"></span>';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlist += '</li>';\n\n\t\t\t\t\t\t\tif (i === 4) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ($next.is('.suggestions')) {\n\t\t\t\t\t\t\t$next.empty().append(list);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(this).after('<ul class=\"suggestions\">' + list + '</ul>');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeydown: function(e) {\n\t\t\t\tif (scope.autocompleteShowing && e.keyCode === keyCodes.shift) {\n\t\t\t\t\tscope.shiftHeld = true;\n\t\t\t\t} else if (e.which === keyCodes.tab && scope.autocompleteShowing) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tif (scope.autocompleteShowing) {\n\t\t\t\t\tif (e.keyCode === keyCodes.arrowUp ||\n\t\t\t\t\t\te.keyCode === keyCodes.arrowDown) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tWee._win.setTimeout(function() {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t}, 200);\n\t\t\t},\n\t\t\tclick: function() {\n\t\t\t\tthis.select();\n\t\t\t}\n\t\t});\n\n\t\t$(Wee._body).on('click', function(e) {\n\t\t\tif ($(e.target).not('input') && $(e.target).not('.autocomplete__item')) {\n\t\t\t\tscope.removeSuggestions();\n\t\t\t}\n\t\t});\n\n\t\t$('.suggestion').on('click', function(e) {\n\t\t\tvar $target = $(e.target),\n\t\t\t\tinputEl = $target.parent().prev().sel[0];\n\n\t\t\t$(inputEl).val($target.text());\n\t\t\tscope.removeSuggestions();\n\t\t\tscope.processChange(inputEl);\n\t\t}, {\n\t\t\tdelegate: '.accordion__content'\n\t\t});\n\t},\n\tremoveSuggestions: function() {\n\t\t$('.suggestions').remove();\n\t\tthis.autocompleteShowing = false;\n\t},\n\tinitModal: function() {\n\t\tvar scope = this,\n\t\t\tpreview = $('ref:previewFrame')[0].contentWindow;\n\n\t\t$('ref:show-code').on('click', function(e) {\n\t\t\tvar template,\n\t\t\t\tfile,\n\t\t\t\tvariables = preview.weeVariables;\n\n\t\t\te.preventDefault();\n\n\t\t\tWee.data.request({\n\t\t\t\turl: '/wee_variables.less',\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\ttemplate = data;\n\t\t\t\t\tfile = Wee.view.render(template, variables);\n\t\t\t\t\tscope.showModal(file);\n\t\t\t\t},\n\t\t\t\tfailure: function(data) {\n\t\t\t\t\tscope.showMessage(data.status + ' (' + data.statusText + ')');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('ref:overlay').on('click', function() {\n\t\t\tscope.hideModal();\n\t\t});\n\t},\n\tshowModal: function(file) {\n\t\t$('ref:overlay').addClass('-is-active');\n\t\t$('ref:modal').html('<pre><code>' +\n\t\t\tfile + '</code></pre>').addClass('-is-active');\n\t},\n\thideModal: function() {\n\t\t$('ref:modal').removeClass('-is-active');\n\t\t$('ref:overlay').removeClass('-is-active');\n\t},\n\tinitPreview: function() {\n\t\tvar scope = this;\n\n\t\t$('input, select').on('change', function(e, el) {\n\t\t\te.preventDefault();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (! scope.autocompleteShowing) {\n\t\t\t\t\tscope.processChange(el);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t});\n\n\t\t$('form').on('submit', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\treturn;\n\t\t});\n\t},\n\tprocessChange: function(el) {\n\t\tvar preview = $('ref:previewFrame')[0].contentWindow;\n\n\t\tif (this.isRecursive(el)) {\n\t\t\tthis.showMessage('Recursive variable definition for ' + el.name);\n\t\t\tthis.resetInput(el);\n\t\t} else {\n\t\t\tvar parse = this.parseValue(el.value);\n\n\t\t\tif (! parse.valid) {\n\t\t\t\tthis.showMessage('Parsing error: ' + parse.response);\n\t\t\t\tthis.resetInput(el);\n\t\t\t} else {\n\t\t\t\tvar validate = this.validate(parse.response, el);\n\n\t\t\t\tif (! validate.valid) {\n\t\t\t\t\tthis.showMessage('Validation error: ' + validate.response);\n\t\t\t\t\tthis.resetInput(el);\n\t\t\t\t} else {\n\t\t\t\t\tpreview.setVal(el.name, el.value.trim());\n\n\t\t\t\t\tif (this.colorValues[el.name]) {\n\t\t\t\t\t\tthis.colorValues[el.name] = el.value.trim();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($(el).data('useVar') !== 'true') {\n\t\t\t\t\t\t$(el).val(validate.response);\n\t\t\t\t\t\tel.defaultValue = validate.response;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.autocompleteShowing = false;\n\t},\n\tisRecursive: function(el) {\n\t\tvar match = new RegExp(el.name);\n\n\t\treturn match.test(el.value);\n\t},\n\tresetInput: function(input) {\n\t\t$(input).val(input.defaultValue);\n\t},\n\tshowMessage: function(message) {\n\t\tvar $messageBar = $('ref:message-bar'),\n\t\t\thideMessage = function() {\n\t\t\t\t$messageBar.removeClass('-is-active');\n\t\t\t};\n\n\t\t$messageBar.html('<span>' + message + '</span>').addClass('-is-active');\n\t\tsetTimeout(hideMessage, 4000);\n\t},\n\tparseValue: function(value) {\n\t\tvar preview = $('ref:previewFrame')[0].contentWindow,\n\t\t\tvars = preview.less.Parser.serializeVars(preview.weeVariables),\n\t\t\tcss = vars + '#foo { value: ' + value + '; }',\n\t\t\tresult = {};\n\n\t\tpreview.less.render(css, function(error, output) {\n\t\t\terror ?\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tresponse: error.message\n\t\t\t\t} :\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: true,\n\t\t\t\t\tresponse: output.css.match(/(?:: )(.*)(?=;)/)[1]\n\t\t\t\t};\n\t\t});\n\n\t\treturn result;\n\t},\n\tvalidate: function(val, el) {\n\t\tvar scope = this,\n\t\t\ttypes = $(el).data('validate').split('|'),\n\t\t\tresult = {};\n\n\t\ttypes.forEach(function(type) {\n\t\t\tif (type === 'unit') {\n\t\t\t\tresult = scope.isUnit(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'number') {\n\t\t\t\tresult = scope.isNumber(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'color') {\n\t\t\t\tresult = scope.isColor(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'font') {\n\t\t\t\tresult = scope.isFont(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'path') {\n\t\t\t\tresult = scope.isPath(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'file') {\n\t\t\t\tresult = scope.isFile(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'entity') {\n\t\t\t\tresult = scope.isEntity(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'selection' || type === 'string') {\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: true,\n\t\t\t\t\tresponse: val\n\t\t\t\t};\n\n\t\t\t\treturn;\n\t\t\t} else if (type === 'false' || type === 'auto') {\n\t\t\t\tif (val.toLowerCase() === 'false' ||\n\t\t\t\t\tval.toLowerCase() === 'auto') {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tvalid: true,\n\t\t\t\t\t\tresponse: val\n\t\t\t\t\t};\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t},\n\tisUnit: function(val) {\n\t\tvar match = /(^((\\.\\d+)|(\\d+(\\.\\d+)?)(%|px|em|rem)?)$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid unit.'\n\t\t};\n\t},\n\tisNumber: function(val) {\n\t\tvar match = /(^[1-9][0-9]*$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid number.'\n\t\t};\n\t},\n\tisColor: function(val) {\n\t\tvar scope = this,\n\t\t\tcolors = $('ref:previewFrame')[0].contentWindow.less.data.colors,\n\t\t\tmatch = /(^#[0-9a-f]{3,6}$)/i;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t} else if (scope.isColorKeyword(val, colors)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: colors[val]\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid color.'\n\t\t};\n\t},\n\tisColorKeyword: function(val, colors) {\n\t\tfor (var color in colors) {\n\t\t\tif (val === color) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\tisFont: function(val) {\n\t\tvar stack = val.split(','),\n\t\t\tmatch = /(^\"[\\da-z]((-|_| )?[\\da-z]+)*\"$)|(^[\\da-z]((-|_)?[\\da-z]+)*$)/i,\n\t\t\tisMatch = function(value) {\n\t\t\t\treturn match.test(value.trim());\n\t\t\t};\n\n\t\tif (stack.every(isMatch)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid font or font stack.'\n\t\t};\n\t},\n\tisPath: function(val) {\n\t\tvar match = /(^'(\\.\\.\\/)*([\\w]+\\/)*'$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid path.'\n\t\t};\n\t},\n\tisFile: function(val) {\n\t\tvar match = /(^'([\\w-]+\\.[\\w]+)'$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid file.'\n\t\t};\n\t},\n\tisEntity: function(val) {\n\t\tvar match = /(^'(\\\\[0-9a-f]{4})+'$)/i;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid entity.'\n\t\t};\n\t},\n\tinitSelectAll: function() {\n\t\t$('ref:modal').on('click', function(e, el) {\n\t\t\tif (window.getSelection !== undefined &&\n\t\t\t\tdocument.createRange !== undefined) {\n\t\t\t\tvar range = document.createRange();\n\n\t\t\t\trange.selectNodeContents(el);\n\t\t\t\tvar sel = window.getSelection();\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (document.selection !== undefined &&\n\t\t\tdocument.body.createTextRange !== undefined) {\n\t\t\t\tvar textRange = document.body.createTextRange();\n\n\t\t\t\ttextRange.moveToElementText(el);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\t\t});\n\t}\n});","/**\n * jscolor, JavaScript Color Picker\n *\n * @version 1.4.3\n * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html\n * @author  Jan Odvarko, http://odvarko.cz\n * @created 2008-06-15\n * @updated 2014-07-16\n * @link    http://jscolor.com\n */\n\n/* Modified by Chris Roberts for Wee Variables */\n\nvar jscolor = {\n\n\n\tdir : '/assets/img/customize/', // location of jscolor directory (leave empty to autodetect)\n\tbindClass : 'color', // class name\n\tbinding : true, // automatic binding via <input class=\"...\">\n\tpreloading : true, // use image preloading?\n\n\n\tinstall : function() {\n\t\tjscolor.addEvent(window, 'load', jscolor.init);\n\t},\n\n\n\tinit : function() {\n\t\tif(jscolor.binding) {\n\t\t\tjscolor.bind();\n\t\t}\n\t\tif(jscolor.preloading) {\n\t\t\tjscolor.preload();\n\t\t}\n\t},\n\n\n\tgetDir : function() {\n\t\tif(!jscolor.dir) {\n\t\t\tvar detected = jscolor.detectDir();\n\t\t\tjscolor.dir = detected!==false ? detected : 'jscolor/';\n\t\t}\n\t\treturn jscolor.dir;\n\t},\n\n\n\tdetectDir : function() {\n\t\tvar base = location.href;\n\n\t\tvar e = document.getElementsByTagName('base');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tif(e[i].href) { base = e[i].href; }\n\t\t}\n\n\t\tvar e = document.getElementsByTagName('script');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tif(e[i].src && /(^|\\/)jscolor\\.js([?#].*)?$/i.test(e[i].src)) {\n\t\t\t\tvar src = new jscolor.URI(e[i].src);\n\t\t\t\tvar srcAbs = src.toAbsolute(base);\n\t\t\t\tsrcAbs.path = srcAbs.path.replace(/[^\\/]+$/, ''); // remove filename\n\t\t\t\tsrcAbs.query = null;\n\t\t\t\tsrcAbs.fragment = null;\n\t\t\t\treturn srcAbs.toString();\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tbind : function() {\n\t\tvar matchClass = new RegExp('(^|\\\\s)('+jscolor.bindClass+')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\t\tvar e = document.getElementsByTagName('input');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tvar m;\n\t\t\tif(!e[i].color && e[i].className && (m = e[i].className.match(matchClass))) {\n\t\t\t\tvar prop = {};\n\t\t\t\tif(m[4]) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tprop = (new Function ('return (' + m[4] + ')'))();\n\t\t\t\t\t} catch(eInvalidProp) {}\n\t\t\t\t}\n\t\t\t\te[i].color = new jscolor.color(e[i], prop);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tpreload : function() {\n\t\tfor(var fn in jscolor.imgRequire) {\n\t\t\tif(jscolor.imgRequire.hasOwnProperty(fn)) {\n\t\t\t\tjscolor.loadImage(fn);\n\t\t\t}\n\t\t}\n\t},\n\n\n\timages : {\n\t\tpad : [ 181, 101 ],\n\t\tsld : [ 16, 101 ],\n\t\tcross : [ 15, 15 ],\n\t\tarrow : [ 7, 11 ]\n\t},\n\n\n\timgRequire : {},\n\timgLoaded : {},\n\n\n\trequireImage : function(filename) {\n\t\tjscolor.imgRequire[filename] = true;\n\t},\n\n\n\tloadImage : function(filename) {\n\t\tif(!jscolor.imgLoaded[filename]) {\n\t\t\tjscolor.imgLoaded[filename] = new Image();\n\t\t\tjscolor.imgLoaded[filename].src = jscolor.getDir()+filename;\n\t\t}\n\t},\n\n\n\tfetchElement : function(mixed) {\n\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\n\t},\n\n\n\taddEvent : function(el, evnt, func) {\n\t\tif(el.addEventListener) {\n\t\t\tel.addEventListener(evnt, func, false);\n\t\t} else if(el.attachEvent) {\n\t\t\tel.attachEvent('on'+evnt, func);\n\t\t}\n\t},\n\n\n\tfireEvent : function(el, evnt) {\n\t\tif(!el) {\n\t\t\treturn;\n\t\t}\n\t\tif(document.createEvent) {\n\t\t\tvar ev = document.createEvent('HTMLEvents');\n\t\t\tev.initEvent(evnt, true, true);\n\t\t\tel.dispatchEvent(ev);\n\t\t} else if(document.createEventObject) {\n\t\t\tvar ev = document.createEventObject();\n\t\t\tel.fireEvent('on'+evnt, ev);\n\t\t} else if(el['on'+evnt]) { // alternatively use the traditional event model (IE5)\n\t\t\tel['on'+evnt]();\n\t\t}\n\t},\n\n\n\tgetElementPos : function(e) {\n\t\tvar e1=e, e2=e;\n\t\tvar x=0, y=0;\n\t\tif(e1.offsetParent) {\n\t\t\tdo {\n\t\t\t\tx += e1.offsetLeft;\n\t\t\t\ty += e1.offsetTop;\n\t\t\t} while(e1 = e1.offsetParent);\n\t\t}\n\t\twhile((e2 = e2.parentNode) && e2.nodeName.toUpperCase() !== 'BODY') {\n\t\t\tx -= e2.scrollLeft;\n\t\t\ty -= e2.scrollTop;\n\t\t}\n\t\treturn [x, y];\n\t},\n\n\n\tgetElementSize : function(e) {\n\t\treturn [e.offsetWidth, e.offsetHeight];\n\t},\n\n\n\tgetRelMousePos : function(e) {\n\t\tvar x = 0, y = 0;\n\t\tif (!e) { e = window.event; }\n\t\tif (typeof e.offsetX === 'number') {\n\t\t\tx = e.offsetX;\n\t\t\ty = e.offsetY;\n\t\t} else if (typeof e.layerX === 'number') {\n\t\t\tx = e.layerX;\n\t\t\ty = e.layerY;\n\t\t}\n\t\treturn { x: x, y: y };\n\t},\n\n\n\tgetViewPos : function() {\n\t\tif(typeof window.pageYOffset === 'number') {\n\t\t\treturn [window.pageXOffset, window.pageYOffset];\n\t\t} else if(document.body && (document.body.scrollLeft || document.body.scrollTop)) {\n\t\t\treturn [document.body.scrollLeft, document.body.scrollTop];\n\t\t} else if(document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {\n\t\t\treturn [document.documentElement.scrollLeft, document.documentElement.scrollTop];\n\t\t} else {\n\t\t\treturn [0, 0];\n\t\t}\n\t},\n\n\n\tgetViewSize : function() {\n\t\tif(typeof window.innerWidth === 'number') {\n\t\t\treturn [window.innerWidth, window.innerHeight];\n\t\t} else if(document.body && (document.body.clientWidth || document.body.clientHeight)) {\n\t\t\treturn [document.body.clientWidth, document.body.clientHeight];\n\t\t} else if(document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {\n\t\t\treturn [document.documentElement.clientWidth, document.documentElement.clientHeight];\n\t\t} else {\n\t\t\treturn [0, 0];\n\t\t}\n\t},\n\n\n\tURI : function(uri) { // See RFC3986\n\n\t\tthis.scheme = null;\n\t\tthis.authority = null;\n\t\tthis.path = '';\n\t\tthis.query = null;\n\t\tthis.fragment = null;\n\n\t\tthis.parse = function(uri) {\n\t\t\tvar m = uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\\/\\/)([^\\/?#]*))?([^?#]*)((\\?)([^#]*))?((#)(.*))?/);\n\t\t\tthis.scheme = m[3] ? m[2] : null;\n\t\t\tthis.authority = m[5] ? m[6] : null;\n\t\t\tthis.path = m[7];\n\t\t\tthis.query = m[9] ? m[10] : null;\n\t\t\tthis.fragment = m[12] ? m[13] : null;\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.toString = function() {\n\t\t\tvar result = '';\n\t\t\tif(this.scheme !== null) { result = result + this.scheme + ':'; }\n\t\t\tif(this.authority !== null) { result = result + '//' + this.authority; }\n\t\t\tif(this.path !== null) { result = result + this.path; }\n\t\t\tif(this.query !== null) { result = result + '?' + this.query; }\n\t\t\tif(this.fragment !== null) { result = result + '#' + this.fragment; }\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.toAbsolute = function(base) {\n\t\t\tvar base = new jscolor.URI(base);\n\t\t\tvar r = this;\n\t\t\tvar t = new jscolor.URI;\n\n\t\t\tif(base.scheme === null) { return false; }\n\n\t\t\tif(r.scheme !== null && r.scheme.toLowerCase() === base.scheme.toLowerCase()) {\n\t\t\t\tr.scheme = null;\n\t\t\t}\n\n\t\t\tif(r.scheme !== null) {\n\t\t\t\tt.scheme = r.scheme;\n\t\t\t\tt.authority = r.authority;\n\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\tt.query = r.query;\n\t\t\t} else {\n\t\t\t\tif(r.authority !== null) {\n\t\t\t\t\tt.authority = r.authority;\n\t\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\t\tt.query = r.query;\n\t\t\t\t} else {\n\t\t\t\t\tif(r.path === '') {\n\t\t\t\t\t\tt.path = base.path;\n\t\t\t\t\t\tif(r.query !== null) {\n\t\t\t\t\t\t\tt.query = r.query;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tt.query = base.query;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(r.path.substr(0,1) === '/') {\n\t\t\t\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(base.authority !== null && base.path === '') {\n\t\t\t\t\t\t\t\tt.path = '/'+r.path;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tt.path = base.path.replace(/[^\\/]+$/,'')+r.path;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tt.path = removeDotSegments(t.path);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tt.query = r.query;\n\t\t\t\t\t}\n\t\t\t\t\tt.authority = base.authority;\n\t\t\t\t}\n\t\t\t\tt.scheme = base.scheme;\n\t\t\t}\n\t\t\tt.fragment = r.fragment;\n\n\t\t\treturn t;\n\t\t};\n\n\t\tfunction removeDotSegments(path) {\n\t\t\tvar out = '';\n\t\t\twhile(path) {\n\t\t\t\tif(path.substr(0,3)==='../' || path.substr(0,2)==='./') {\n\t\t\t\t\tpath = path.replace(/^\\.+/,'').substr(1);\n\t\t\t\t} else if(path.substr(0,3)==='/./' || path==='/.') {\n\t\t\t\t\tpath = '/'+path.substr(3);\n\t\t\t\t} else if(path.substr(0,4)==='/../' || path==='/..') {\n\t\t\t\t\tpath = '/'+path.substr(4);\n\t\t\t\t\tout = out.replace(/\\/?[^\\/]*$/, '');\n\t\t\t\t} else if(path==='.' || path==='..') {\n\t\t\t\t\tpath = '';\n\t\t\t\t} else {\n\t\t\t\t\tvar rm = path.match(/^\\/?[^\\/]*/)[0];\n\t\t\t\t\tpath = path.substr(rm.length);\n\t\t\t\t\tout = out + rm;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\n\t\tif(uri) {\n\t\t\tthis.parse(uri);\n\t\t}\n\n\t},\n\n\t//\n\t// Usage example:\n\t// var myColor = new jscolor.color(myInputElement)\n\t//\n\n\tcolor : function(target, prop) {\n\n\n\t\tthis.required = true; // refuse empty values?\n\t\tthis.adjust = false; // adjust value to uniform notation?\n\t\tthis.hash = false; // prefix color with # symbol?\n\t\tthis.caps = false; // uppercase?\n\t\tthis.slider = true; // show the value/saturation slider?\n\t\tthis.valueElement = target; // value holder\n\t\tthis.styleElement = target; // where to reflect current color\n\t\tthis.onImmediateChange = null; // onchange callback (can be either string or function)\n\t\tthis.hsv = [0, 0, 1]; // read-only  0-6, 0-1, 0-1\n\t\tthis.rgb = [1, 1, 1]; // read-only  0-1, 0-1, 0-1\n\t\tthis.minH = 0; // read-only  0-6\n\t\tthis.maxH = 6; // read-only  0-6\n\t\tthis.minS = 0; // read-only  0-1\n\t\tthis.maxS = 1; // read-only  0-1\n\t\tthis.minV = 0; // read-only  0-1\n\t\tthis.maxV = 1; // read-only  0-1\n\n\t\tthis.pickerOnfocus = true; // display picker on focus?\n\t\tthis.pickerMode = 'HSV'; // HSV | HVS\n\t\tthis.pickerPosition = 'right'; // left | right | top | bottom\n\t\tthis.pickerSmartPosition = true; // automatically adjust picker position when necessary\n\t\tthis.pickerButtonHeight = 20; // px\n\t\tthis.pickerClosable = false;\n\t\tthis.pickerCloseText = 'Close';\n\t\tthis.pickerButtonColor = 'ButtonText'; // px\n\t\tthis.pickerFace = 8; // px\n\t\tthis.pickerFaceColor = 'ThreeDFace'; // CSS color\n\t\tthis.pickerBorder = 0; // px\n\t\tthis.pickerBorderColor = 'ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight'; // CSS color\n\t\tthis.pickerInset = 0; // px\n\t\tthis.pickerInsetColor = 'ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow'; // CSS color\n\t\tthis.pickerZIndex = 10000;\n\n\n\t\tfor(var p in prop) {\n\t\t\tif(prop.hasOwnProperty(p)) {\n\t\t\t\tthis[p] = prop[p];\n\t\t\t}\n\t\t}\n\n\n\t\tthis.hidePicker = function() {\n\t\t\tif(isPickerOwner()) {\n\t\t\t\tremovePicker();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.showPicker = function() {\n\t\t\tif(!isPickerOwner()) {\n\t\t\t\tvar tp = jscolor.getElementPos(target); // target pos\n\t\t\t\tvar ts = jscolor.getElementSize(target); // target size\n\t\t\t\tvar vp = jscolor.getViewPos(); // view pos\n\t\t\t\tvar vs = jscolor.getViewSize(); // view size\n\t\t\t\tvar ps = getPickerDims(this); // picker size\n\t\t\t\tvar a, b, c;\n\t\t\t\tswitch(this.pickerPosition.toLowerCase()) {\n\t\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\n\t\t\t\t\tcase 'right':a=1; b=0; c=1; break;\n\t\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\n\t\t\t\t\tdefault:     a=0; b=1; c=1; break;\n\t\t\t\t}\n\t\t\t\tvar l = (ts[b]+ps[b])/2;\n\n\t\t\t\t// picker pos\n\t\t\t\tif (!this.pickerSmartPosition) {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\ttp[b]+ts[b]-l+l*c\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\n\t\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\n\t\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\n\t\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\n\t\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tdrawPicker(pp[a], pp[b]);\n\t\t\t}\n\t\t};\n\n\n\t\tthis.importColor = function() {\n\t\t\tif(!valueElement) {\n\t\t\t\tthis.exportColor();\n\t\t\t} else {\n\t\t\t\tif(!this.adjust) {\n\t\t\t\t\tif(!this.fromString(valueElement.value, leaveValue)) {\n\t\t\t\t\t\tstyleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage;\n\t\t\t\t\t\tstyleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\t\tstyleElement.style.color = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\t\tthis.exportColor(leaveValue | leaveStyle);\n\t\t\t\t\t}\n\t\t\t\t} else if(!this.required && /^\\s*$/.test(valueElement.value)) {\n\t\t\t\t\tvalueElement.value = '';\n\t\t\t\t\tstyleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage;\n\t\t\t\t\tstyleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\tstyleElement.style.color = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\tthis.exportColor(leaveValue | leaveStyle);\n\n\t\t\t\t} else if(this.fromString(valueElement.value)) {\n\t\t\t\t\t// OK\n\t\t\t\t} else {\n\t\t\t\t\tthis.exportColor();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tthis.exportColor = function(flags) {\n\t\t\tif(!(flags & leaveValue) && valueElement) {\n\t\t\t\tvar value = this.toString();\n\t\t\t\tif(this.caps) { value = value.toUpperCase(); }\n\t\t\t\tif(this.hash) { value = '#'+value; }\n\t\t\t\tvalueElement.value = '#' + value;\n\t\t\t}\n\t\t\tif(!(flags & leaveStyle) && styleElement) {\n\t\t\t\tstyleElement.style.backgroundImage = \"none\";\n\t\t\t\tstyleElement.style.backgroundColor = '#'+this.toString();\n\t\t\t\t// styleElement.style.color = '#'+this.toString();\n\t\t\t\tstyleElement.style.color =\n\t\t\t\t\t0.213 * this.rgb[0] +\n\t\t\t\t\t0.715 * this.rgb[1] +\n\t\t\t\t\t0.072 * this.rgb[2]\n\t\t\t\t\t< 0.5 ? '#FFF' : '#000';\n\t\t\t}\n\t\t\tif(!(flags & leavePad) && isPickerOwner()) {\n\t\t\t\tredrawPad();\n\t\t\t}\n\t\t\tif(!(flags & leaveSld) && isPickerOwner()) {\n\t\t\t\tredrawSld();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.fromHSV = function(h, s, v, flags) { // null = don't change\n\t\t\tif(h !== null) { h = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, h)); }\n\t\t\tif(s !== null) { s = Math.max(0.0, this.minS, Math.min(1.0, this.maxS, s)); }\n\t\t\tif(v !== null) { v = Math.max(0.0, this.minV, Math.min(1.0, this.maxV, v)); }\n\n\t\t\tthis.rgb = HSV_RGB(\n\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\n\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\n\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\n\t\t\t);\n\n\t\t\tthis.exportColor(flags);\n\t\t};\n\n\n\t\tthis.fromRGB = function(r, g, b, flags) { // null = don't change\n\t\t\tif(r !== null) { r = Math.max(0.0, Math.min(1.0, r)); }\n\t\t\tif(g !== null) { g = Math.max(0.0, Math.min(1.0, g)); }\n\t\t\tif(b !== null) { b = Math.max(0.0, Math.min(1.0, b)); }\n\n\t\t\tvar hsv = RGB_HSV(\n\t\t\t\tr===null ? this.rgb[0] : r,\n\t\t\t\tg===null ? this.rgb[1] : g,\n\t\t\t\tb===null ? this.rgb[2] : b\n\t\t\t);\n\t\t\tif(hsv[0] !== null) {\n\t\t\t\tthis.hsv[0] = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, hsv[0]));\n\t\t\t}\n\t\t\tif(hsv[2] !== 0) {\n\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0.0, this.minS, Math.min(1.0, this.maxS, hsv[1]));\n\t\t\t}\n\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0.0, this.minV, Math.min(1.0, this.maxV, hsv[2]));\n\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\n\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\n\t\t\tthis.rgb[0] = rgb[0];\n\t\t\tthis.rgb[1] = rgb[1];\n\t\t\tthis.rgb[2] = rgb[2];\n\n\t\t\tthis.exportColor(flags);\n\t\t};\n\n\n\t\tthis.fromString = function(hex, flags) {\n\t\t\tvar m = hex.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i);\n\t\t\tif(!m) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tif(m[1].length === 6) { // 6-char notation\n\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\tparseInt(m[1].substr(0,2),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].substr(2,2),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].substr(4,2),16) / 255,\n\t\t\t\t\t\tflags\n\t\t\t\t\t);\n\t\t\t\t} else { // 3-char notation\n\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\tparseInt(m[1].charAt(0)+m[1].charAt(0),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].charAt(1)+m[1].charAt(1),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].charAt(2)+m[1].charAt(2),16) / 255,\n\t\t\t\t\t\tflags\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\n\n\t\tthis.toString = function() {\n\t\t\treturn (\n\t\t\t\t(0x100 | Math.round(255*this.rgb[0])).toString(16).substr(1) +\n\t\t\t\t(0x100 | Math.round(255*this.rgb[1])).toString(16).substr(1) +\n\t\t\t\t(0x100 | Math.round(255*this.rgb[2])).toString(16).substr(1)\n\t\t\t);\n\t\t};\n\n\n\t\tfunction RGB_HSV(r, g, b) {\n\t\t\tvar n = Math.min(Math.min(r,g),b);\n\t\t\tvar v = Math.max(Math.max(r,g),b);\n\t\t\tvar m = v - n;\n\t\t\tif(m === 0) { return [ null, 0, v ]; }\n\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\n\t\t\treturn [ h===6?0:h, m/v, v ];\n\t\t}\n\n\n\t\tfunction HSV_RGB(h, s, v) {\n\t\t\tif(h === null) { return [ v, v, v ]; }\n\t\t\tvar i = Math.floor(h);\n\t\t\tvar f = i%2 ? h-i : 1-(h-i);\n\t\t\tvar m = v * (1 - s);\n\t\t\tvar n = v * (1 - s*f);\n\t\t\tswitch(i) {\n\t\t\t\tcase 6:\n\t\t\t\tcase 0: return [v,n,m];\n\t\t\t\tcase 1: return [n,v,m];\n\t\t\t\tcase 2: return [m,v,n];\n\t\t\t\tcase 3: return [m,n,v];\n\t\t\t\tcase 4: return [n,m,v];\n\t\t\t\tcase 5: return [v,m,n];\n\t\t\t}\n\t\t}\n\n\n\t\tfunction removePicker() {\n\t\t\tdelete jscolor.picker.owner;\n\t\t\tdocument.getElementsByTagName('body')[0].removeChild(jscolor.picker.boxB);\n\t\t}\n\n\n\t\tfunction drawPicker(x, y) {\n\t\t\tif(!jscolor.picker) {\n\t\t\t\tjscolor.picker = {\n\t\t\t\t\tbox : document.createElement('div'),\n\t\t\t\t\tboxB : document.createElement('div'),\n\t\t\t\t\tpad : document.createElement('div'),\n\t\t\t\t\tpadB : document.createElement('div'),\n\t\t\t\t\tpadM : document.createElement('div'),\n\t\t\t\t\tsld : document.createElement('div'),\n\t\t\t\t\tsldB : document.createElement('div'),\n\t\t\t\t\tsldM : document.createElement('div'),\n\t\t\t\t\tbtn : document.createElement('div'),\n\t\t\t\t\tbtnS : document.createElement('span'),\n\t\t\t\t\tbtnT : document.createTextNode(THIS.pickerCloseText)\n\t\t\t\t};\n\t\t\t\tfor(var i=0,segSize=4; i<jscolor.images.sld[1]; i+=segSize) {\n\t\t\t\t\tvar seg = document.createElement('div');\n\t\t\t\t\tseg.style.height = segSize+'px';\n\t\t\t\t\tseg.style.fontSize = '1px';\n\t\t\t\t\tseg.style.lineHeight = '0';\n\t\t\t\t\tjscolor.picker.sld.appendChild(seg);\n\t\t\t\t}\n\t\t\t\tjscolor.picker.sldB.appendChild(jscolor.picker.sld);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.sldB);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.sldM);\n\t\t\t\tjscolor.picker.padB.appendChild(jscolor.picker.pad);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.padB);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.padM);\n\t\t\t\tjscolor.picker.btnS.appendChild(jscolor.picker.btnT);\n\t\t\t\tjscolor.picker.btnS.appendChild(jscolor.picker.btnT);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.btn);\n\t\t\t\tjscolor.picker.boxB.appendChild(jscolor.picker.box);\n\t\t\t}\n\n\t\t\tvar p = jscolor.picker;\n\n\t\t\t// controls interaction\n\t\t\tp.box.onmouseup =\n\t\t\tp.box.onmouseout = function() { target.focus(); };\n\t\t\tp.box.onmousedown = function() { abortBlur=true; };\n\t\t\tp.box.onmousemove = function(e) {\n\t\t\t\tif (holdPad || holdSld) {\n\t\t\t\t\tholdPad && setPad(e);\n\t\t\t\t\tholdSld && setSld(e);\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\t}\n\t\t\t\t\tdispatchImmediateChange();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif('ontouchstart' in window) { // if touch device\n\t\t\t\tvar handle_touchmove = function(e) {\n\t\t\t\t\tvar event={\n\t\t\t\t\t\t'offsetX': e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY': e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t};\n\t\t\t\t\tif (holdPad || holdSld) {\n\t\t\t\t\t\tholdPad && setPad(event);\n\t\t\t\t\t\tholdSld && setSld(event);\n\t\t\t\t\t\tdispatchImmediateChange();\n\t\t\t\t\t}\n\t\t\t\t\te.stopPropagation(); // prevent move \"view\" on broswer\n\t\t\t\t\te.preventDefault(); // prevent Default - Android Fix (else android generated only 1-2 touchmove events)\n\t\t\t\t};\n\t\t\t\tp.box.removeEventListener('touchmove', handle_touchmove, false)\n\t\t\t\tp.box.addEventListener('touchmove', handle_touchmove, false)\n\t\t\t}\n\t\t\tp.padM.onmouseup =\n\t\t\tp.padM.onmouseout = function() { if(holdPad) { holdPad=false; jscolor.fireEvent(valueElement,'change'); } };\n\t\t\tp.padM.onmousedown = function(e) {\n\t\t\t\t// if the slider is at the bottom, move it up\n\t\t\t\tswitch(modeID) {\n\t\t\t\t\tcase 0: if (THIS.hsv[2] === 0) { THIS.fromHSV(null, null, 1.0); }; break;\n\t\t\t\t\tcase 1: if (THIS.hsv[1] === 0) { THIS.fromHSV(null, 1.0, null); }; break;\n\t\t\t\t}\n\t\t\t\tholdSld=false;\n\t\t\t\tholdPad=true;\n\t\t\t\tsetPad(e);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tif('ontouchstart' in window) {\n\t\t\t\tp.padM.addEventListener('touchstart', function(e) {\n\t\t\t\t\ttouchOffset={\n\t\t\t\t\t\t'X': e.target.offsetParent.offsetLeft,\n\t\t\t\t\t\t'Y': e.target.offsetParent.offsetTop\n\t\t\t\t\t};\n\t\t\t\t\tthis.onmousedown({\n\t\t\t\t\t\t'offsetX':e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY':e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tp.sldM.onmouseup =\n\t\t\tp.sldM.onmouseout = function() { if(holdSld) { holdSld=false; jscolor.fireEvent(valueElement,'change'); } };\n\t\t\tp.sldM.onmousedown = function(e) {\n\t\t\t\tholdPad=false;\n\t\t\t\tholdSld=true;\n\t\t\t\tsetSld(e);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tif('ontouchstart' in window) {\n\t\t\t\tp.sldM.addEventListener('touchstart', function(e) {\n\t\t\t\t\ttouchOffset={\n\t\t\t\t\t\t'X': e.target.offsetParent.offsetLeft,\n\t\t\t\t\t\t'Y': e.target.offsetParent.offsetTop\n\t\t\t\t\t};\n\t\t\t\t\tthis.onmousedown({\n\t\t\t\t\t\t'offsetX':e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY':e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// picker\n\t\t\tvar dims = getPickerDims(THIS);\n\t\t\tp.box.style.width = dims[0] + 'px';\n\t\t\tp.box.style.height = dims[1] + 'px';\n\n\t\t\t// picker border\n\t\t\tp.boxB.style.position = 'absolute';\n\t\t\tp.boxB.style.clear = 'both';\n\t\t\tp.boxB.style.left = x+'px';\n\t\t\tp.boxB.style.top = y+'px';\n\t\t\tp.boxB.style.zIndex = THIS.pickerZIndex;\n\t\t\tp.boxB.style.border = THIS.pickerBorder+'px solid';\n\t\t\tp.boxB.style.borderColor = THIS.pickerBorderColor;\n\t\t\tp.boxB.style.background = THIS.pickerFaceColor;\n\n\t\t\t// pad image\n\t\t\tp.pad.style.width = jscolor.images.pad[0]+'px';\n\t\t\tp.pad.style.height = jscolor.images.pad[1]+'px';\n\n\t\t\t// pad border\n\t\t\tp.padB.style.position = 'absolute';\n\t\t\tp.padB.style.left = THIS.pickerFace+'px';\n\t\t\tp.padB.style.top = THIS.pickerFace+'px';\n\t\t\tp.padB.style.border = THIS.pickerInset+'px solid';\n\t\t\tp.padB.style.borderColor = THIS.pickerInsetColor;\n\n\t\t\t// pad mouse area\n\t\t\tp.padM.style.position = 'absolute';\n\t\t\tp.padM.style.left = '0';\n\t\t\tp.padM.style.top = '0';\n\t\t\tp.padM.style.width = THIS.pickerFace + 2*THIS.pickerInset + jscolor.images.pad[0] + jscolor.images.arrow[0] + 'px';\n\t\t\tp.padM.style.height = p.box.style.height;\n\t\t\tp.padM.style.cursor = 'crosshair';\n\n\t\t\t// slider image\n\t\t\tp.sld.style.overflow = 'hidden';\n\t\t\tp.sld.style.width = jscolor.images.sld[0]+'px';\n\t\t\tp.sld.style.height = jscolor.images.sld[1]+'px';\n\n\t\t\t// slider border\n\t\t\tp.sldB.style.display = THIS.slider ? 'block' : 'none';\n\t\t\tp.sldB.style.position = 'absolute';\n\t\t\tp.sldB.style.right = THIS.pickerFace+'px';\n\t\t\tp.sldB.style.top = THIS.pickerFace+'px';\n\t\t\tp.sldB.style.border = THIS.pickerInset+'px solid';\n\t\t\tp.sldB.style.borderColor = THIS.pickerInsetColor;\n\n\t\t\t// slider mouse area\n\t\t\tp.sldM.style.display = THIS.slider ? 'block' : 'none';\n\t\t\tp.sldM.style.position = 'absolute';\n\t\t\tp.sldM.style.right = '0';\n\t\t\tp.sldM.style.top = '0';\n\t\t\tp.sldM.style.width = jscolor.images.sld[0] + jscolor.images.arrow[0] + THIS.pickerFace + 2*THIS.pickerInset + 'px';\n\t\t\tp.sldM.style.height = p.box.style.height;\n\t\t\ttry {\n\t\t\t\tp.sldM.style.cursor = 'pointer';\n\t\t\t} catch(eOldIE) {\n\t\t\t\tp.sldM.style.cursor = 'hand';\n\t\t\t}\n\n\t\t\t// \"close\" button\n\t\t\tfunction setBtnBorder() {\n\t\t\t\tvar insetColors = THIS.pickerInsetColor.split(/\\s+/);\n\t\t\t\tvar pickerOutsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n\t\t\t\tp.btn.style.borderColor = pickerOutsetColor;\n\t\t\t}\n\t\t\tp.btn.style.display = THIS.pickerClosable ? 'block' : 'none';\n\t\t\tp.btn.style.position = 'absolute';\n\t\t\tp.btn.style.left = THIS.pickerFace + 'px';\n\t\t\tp.btn.style.bottom = THIS.pickerFace + 'px';\n\t\t\tp.btn.style.padding = '0 15px';\n\t\t\tp.btn.style.height = '18px';\n\t\t\tp.btn.style.border = THIS.pickerInset + 'px solid';\n\t\t\tsetBtnBorder();\n\t\t\tp.btn.style.color = THIS.pickerFaceColor;\n\t\t\tp.btn.style.font = '12px sans-serif';\n\t\t\tp.btn.style.textAlign = 'center';\n\t\t\ttry {\n\t\t\t\tp.btn.style.cursor = 'pointer';\n\t\t\t} catch(eOldIE) {\n\t\t\t\tp.btn.style.cursor = 'hand';\n\t\t\t}\n\t\t\tp.btn.onmousedown = function () {\n\t\t\t\tTHIS.hidePicker();\n\t\t\t};\n\t\t\tp.btnS.style.lineHeight = p.btn.style.height;\n\n\t\t\t// load images in optimal order\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var padImg = 'hs.png'; break;\n\t\t\t\tcase 1: var padImg = 'hv.png'; break;\n\t\t\t}\n\t\t\tp.padM.style.backgroundImage = \"url('\"+jscolor.getDir()+\"cross.gif')\";\n\t\t\tp.padM.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.sldM.style.backgroundImage = \"url('\"+jscolor.getDir()+\"arrow.gif')\";\n\t\t\tp.sldM.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.pad.style.backgroundImage = \"url('\"+jscolor.getDir()+padImg+\"')\";\n\t\t\tp.pad.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.pad.style.backgroundPosition = \"0 0\";\n\n\t\t\t// place pointers\n\t\t\tredrawPad();\n\t\t\tredrawSld();\n\n\t\t\tjscolor.picker.owner = THIS;\n\t\t\tdocument.getElementsByTagName('body')[0].appendChild(p.boxB);\n\t\t}\n\n\n\t\tfunction getPickerDims(o) {\n\t\t\tvar dims = [\n\t\t\t\t2*o.pickerInset + 2*o.pickerFace + jscolor.images.pad[0] +\n\t\t\t\t\t(o.slider ? 2*o.pickerInset + 2*jscolor.images.arrow[0] + jscolor.images.sld[0] : 0),\n\t\t\t\to.pickerClosable ?\n\t\t\t\t\t4*o.pickerInset + 3*o.pickerFace + jscolor.images.pad[1] + o.pickerButtonHeight :\n\t\t\t\t\t2*o.pickerInset + 2*o.pickerFace + jscolor.images.pad[1]\n\t\t\t];\n\t\t\treturn dims;\n\t\t}\n\n\n\t\tfunction redrawPad() {\n\t\t\t// redraw the pad pointer\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var yComponent = 1; break;\n\t\t\t\tcase 1: var yComponent = 2; break;\n\t\t\t}\n\t\t\tvar x = Math.round((THIS.hsv[0]/6) * (jscolor.images.pad[0]-1));\n\t\t\tvar y = Math.round((1-THIS.hsv[yComponent]) * (jscolor.images.pad[1]-1));\n\t\t\tjscolor.picker.padM.style.backgroundPosition =\n\t\t\t\t(THIS.pickerFace+THIS.pickerInset+x - Math.floor(jscolor.images.cross[0]/2)) + 'px ' +\n\t\t\t\t(THIS.pickerFace+THIS.pickerInset+y - Math.floor(jscolor.images.cross[1]/2)) + 'px';\n\n\t\t\t// redraw the slider image\n\t\t\tvar seg = jscolor.picker.sld.childNodes;\n\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0:\n\t\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 1);\n\t\t\t\t\tfor(var i=0; i<seg.length; i+=1) {\n\t\t\t\t\t\tseg[i].style.backgroundColor = 'rgb('+\n\t\t\t\t\t\t\t(rgb[0]*(1-i/seg.length)*100)+'%,'+\n\t\t\t\t\t\t\t(rgb[1]*(1-i/seg.length)*100)+'%,'+\n\t\t\t\t\t\t\t(rgb[2]*(1-i/seg.length)*100)+'%)';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tvar rgb, s, c = [ THIS.hsv[2], 0, 0 ];\n\t\t\t\t\tvar i = Math.floor(THIS.hsv[0]);\n\t\t\t\t\tvar f = i%2 ? THIS.hsv[0]-i : 1-(THIS.hsv[0]-i);\n\t\t\t\t\tswitch(i) {\n\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcase 0: rgb=[0,1,2]; break;\n\t\t\t\t\t\tcase 1: rgb=[1,0,2]; break;\n\t\t\t\t\t\tcase 2: rgb=[2,0,1]; break;\n\t\t\t\t\t\tcase 3: rgb=[2,1,0]; break;\n\t\t\t\t\t\tcase 4: rgb=[1,2,0]; break;\n\t\t\t\t\t\tcase 5: rgb=[0,2,1]; break;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0; i<seg.length; i+=1) {\n\t\t\t\t\t\ts = 1 - 1/(seg.length-1)*i;\n\t\t\t\t\t\tc[1] = c[0] * (1 - s*f);\n\t\t\t\t\t\tc[2] = c[0] * (1 - s);\n\t\t\t\t\t\tseg[i].style.backgroundColor = 'rgb('+\n\t\t\t\t\t\t\t(c[rgb[0]]*100)+'%,'+\n\t\t\t\t\t\t\t(c[rgb[1]]*100)+'%,'+\n\t\t\t\t\t\t\t(c[rgb[2]]*100)+'%)';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction redrawSld() {\n\t\t\t// redraw the slider pointer\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var yComponent = 2; break;\n\t\t\t\tcase 1: var yComponent = 1; break;\n\t\t\t}\n\t\t\tvar y = Math.round((1-THIS.hsv[yComponent]) * (jscolor.images.sld[1]-1));\n\t\t\tjscolor.picker.sldM.style.backgroundPosition =\n\t\t\t\t'0 ' + (THIS.pickerFace+THIS.pickerInset+y - Math.floor(jscolor.images.arrow[1]/2)) + 'px';\n\t\t}\n\n\n\t\tfunction isPickerOwner() {\n\t\t\treturn jscolor.picker && jscolor.picker.owner === THIS;\n\t\t}\n\n\n\t\tfunction blurTarget() {\n\t\t\tif(valueElement === target) {\n\t\t\t\tTHIS.importColor();\n\t\t\t}\n\t\t\tif(THIS.pickerOnfocus) {\n\t\t\t\tTHIS.hidePicker();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction blurValue() {\n\t\t\tif(valueElement !== target) {\n\t\t\t\tTHIS.importColor();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction setPad(e) {\n\t\t\tvar mpos = jscolor.getRelMousePos(e);\n\t\t\tvar x = mpos.x - THIS.pickerFace - THIS.pickerInset;\n\t\t\tvar y = mpos.y - THIS.pickerFace - THIS.pickerInset;\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)), 1 - y/(jscolor.images.pad[1]-1), null, leaveSld); break;\n\t\t\t\tcase 1: THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)), null, 1 - y/(jscolor.images.pad[1]-1), leaveSld); break;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction setSld(e) {\n\t\t\tvar mpos = jscolor.getRelMousePos(e);\n\t\t\tvar y = mpos.y - THIS.pickerFace - THIS.pickerInset;\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: THIS.fromHSV(null, null, 1 - y/(jscolor.images.sld[1]-1), leavePad); break;\n\t\t\t\tcase 1: THIS.fromHSV(null, 1 - y/(jscolor.images.sld[1]-1), null, leavePad); break;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction dispatchImmediateChange() {\n\t\t\tif (THIS.onImmediateChange) {\n\t\t\t\tvar callback;\n\t\t\t\tif (typeof THIS.onImmediateChange === 'string') {\n\t\t\t\t\tcallback = new Function (THIS.onImmediateChange);\n\t\t\t\t} else {\n\t\t\t\t\tcallback = THIS.onImmediateChange;\n\t\t\t\t}\n\t\t\t\tcallback.call(THIS);\n\t\t\t}\n\t\t}\n\n\n\t\tvar THIS = this;\n\t\tvar modeID = this.pickerMode.toLowerCase()==='hvs' ? 1 : 0;\n\t\tvar abortBlur = false;\n\t\tvar\n\t\t\tvalueElement = jscolor.fetchElement(this.valueElement),\n\t\t\tstyleElement = jscolor.fetchElement(this.styleElement);\n\t\tvar\n\t\t\tholdPad = false,\n\t\t\tholdSld = false,\n\t\t\ttouchOffset = {};\n\t\tvar\n\t\t\tleaveValue = 1<<0,\n\t\t\tleaveStyle = 1<<1,\n\t\t\tleavePad = 1<<2,\n\t\t\tleaveSld = 1<<3;\n\n\n\t\t// target\n\t\tjscolor.addEvent(target, 'focus', function() {\n\t\t\tif(THIS.pickerOnfocus) { THIS.showPicker(); }\n\t\t});\n\t\tjscolor.addEvent(target, 'blur', function() {\n\t\t\tif(!abortBlur) {\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tabortBlur || blurTarget();\n\t\t\t\t\tabortBlur=false;\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tabortBlur = false;\n\t\t\t}\n\t\t});\n\n\t\t// Remove picker on keyup\n\t\tjscolor.addEvent(target, 'keyup', function() {\n\t\t\tif(!abortBlur) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tabortBlur || blurTarget();\n\t\t\t\t\tabortBlur = false;\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tabortBlur = false;\n\t\t\t}\n\t\t});\n\n\t\t// valueElement\n\t\tif(valueElement) {\n\t\t\tvar updateField = function() {\n\t\t\t\tTHIS.fromString(valueElement.value, leaveValue);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tjscolor.addEvent(valueElement, 'keyup', updateField);\n\t\t\tjscolor.addEvent(valueElement, 'input', updateField);\n\t\t\tjscolor.addEvent(valueElement, 'blur', blurValue);\n\t\t\tvalueElement.setAttribute('autocomplete', 'off');\n\t\t}\n\n\t\t// styleElement\n\t\tif(styleElement) {\n\t\t\tstyleElement.jscStyle = {\n\t\t\t\tbackgroundImage : styleElement.style.backgroundImage,\n\t\t\t\tbackgroundColor : styleElement.style.backgroundColor,\n\t\t\t\tcolor : styleElement.style.backgroundColor\n\t\t\t};\n\t\t}\n\n\t\t// require images\n\t\tswitch(modeID) {\n\t\t\tcase 0: jscolor.requireImage('hs.png'); break;\n\t\t\tcase 1: jscolor.requireImage('hv.png'); break;\n\t\t}\n\t\tjscolor.requireImage('cross.gif');\n\t\tjscolor.requireImage('arrow.gif');\n\n\t\tthis.importColor();\n\t}\n\n};\n\n\njscolor.install();\n"]}