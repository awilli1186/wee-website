{"version":3,"sources":["../../../../source/modules/customize/core/js/vendor/jscolor.js","../../../../node_modules/wee-core/temp/moduleView-customize.js","../../../../source/modules/customize/core/js/script.js"],"names":["Wee","view","addView","customize.suggestions","window","jscolor","jsc","register","attachDOMReadyEvent","init","attachEvent","document","onDocumentMouseDown","onDocumentTouchStart","onWindowResize","lookupClass","installByClassName","tryInstallOnElements","elms","className","matchClass","RegExp","i","length","undefined","type","toLowerCase","isColorAttrSupported","m","match","targetElm","optsStr","dataOptions","getDataAttr","opts","Function","eParseError","warn","elm","createElement","setAttribute","isCanvasSupported","getContext","fetchElement","mixed","getElementById","isElementType","nodeName","el","name","attrName","attrValue","getAttribute","evnt","func","addEventListener","detachEvent","removeEventListener","_attachedGroupEvents","attachGroupEvent","groupName","hasOwnProperty","push","detachGroupEvents","evt","fired","fireOnce","readyState","setTimeout","arguments","callee","documentElement","doScroll","top","tryScroll","body","e","msg","console","preventDefault","returnValue","captureTarget","target","setCapture","_capturedTarget","releaseTarget","releaseCapture","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","classNameToList","replace","split","hasClass","indexOf","setClass","classList","unsetClass","repl","getStyle","getComputedStyle","currentStyle","setStyle","helper","getSupportedProp","names","style","props","borderRadius","boxShadow","prop","value","alphaOpacity","Math","round","parseFloat","opacity","filter","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","x","y","rect","getBoundingClientRect","left","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","event","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","redrawPosition","picker","owner","tp","vp","thisObj","fixed","targetElement","a","b","c","ts","vs","ps","getPickerOuterDims","position","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","getPickerDims","displaySlider","getSliderComponent","dims","insetWidth","padding","width","getPadToSliderPadding","sliderSize","height","closable","buttonHeight","borderWidth","max","pointerBorderWidth","pointerThickness","getPadYComponent","mode","charAt","_jscLinkedInstance","showOnClick","show","_jscControlName","onControlPointerStart","hide","onParentScroll","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","controlName","pointerType","_jscInstance","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","hsv","fromHSV","setPad","setSld","dispatchFineChange","dispatchChange","valueElement","onFineChange","callback","call","ofsX","ofsY","pointerAbs","xVal","yVal","leaveSld","leavePad","_vmlNS","_vmlCSS","_vmlReady","initVML","namespaces","add","styleSheets","tags","ss","createStyleSheet","owningElement","id","addRule","createPalette","paletteObj","draw","canvas","ctx","drawFunc","clearRect","hGrad","createLinearGradient","addColorStop","fillStyle","fillRect","vGrad","vmlContainer","overflow","method","angle","colors","hRect","stroked","appendChild","vRect","color","color2","createSliderGradient","sliderObj","color1","grad","leaveValue","leaveStyle","hShadow","blur","spread","inset","this","prototype","toString","vals","join","options","RGB_HSV","r","g","n","min","v","h","HSV_RGB","s","u","floor","f","detachPicker","THIS","activeClass","parentNode","removeChild","drawPicker","setBtnBorder","insetColors","insetColor","outsetColor","p","btn","borderColor","_processParentElementsInDOM","box","boxB","pad","padB","padM","padPal","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","btnT","crossOuterSize","crossSize","padToSliderPadding","PI","padCursor","clear","zIndex","border","background","backgroundColor","cursor","pointerBorderColor","pointerColor","display","right","sliderPtrSpace","bottom","buttonColor","font","textAlign","eOldIE","onmousedown","lineHeight","innerHTML","createTextNode","closeText","redrawPad","redrawSld","container","yComponent","rgb1","rgb2","rgb","sldComponent","isPickerOwner","blurValue","importColor","styleElement","required","refine","hash","uppercase","minS","maxS","minV","maxV","opt","redraw","test","backgroundImage","_jscOrigStyle","exportColor","fromString","flags","toUpperCase","isLight","isNaN","fromRGB","str","parseInt","substr","mR","mG","mB","params","re","toHEXString","toRGBString","_linkedElementsProcessed","currStyle","_jscEventsAttached","getElementsByTagName","onclick","origCallback","updateField","inputElms","buttonElms","fn","make","priv","$private","preview","$","contentWindow","$variables","$colors","sidebar","initScrolling","initAccordion","initGenerate","getColors","bindSelects","initSuggestions","onload","setupPickers","less","pageLoadFinished","then","removeClass","scope","on","$el","scroll","topScroller","active","next","toggle","viewportSize","addClass","tween","update","$button","$preview","$output","codeVisible","text","data","request","url","cache","success","temp","render","weeVariables","html","code","colorValues","map","find","process","keydown","pickers","keyCode","keyup","suggest","hideResults","click focus","key","$active","prev","$entries","children","first","last","showResults","suggestions","getMatches","remove","after","val","isColor","matches","Object","keys","slice","result","each","parseValue","response","processColor","error","trim","validate","valid","parse","resp","values","showMessage","defaultValue","vars","Parser","serializeVars","css","err","output","message","processDependencies","rules","auto","entity","false","file","every","number","path","unit","types","arr","$bar"],"mappings":"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","file":"script.min.js","sourcesContent":["/**\n * jscolor - JavaScript Color Picker\n *\n * @link    http://jscolor.com\n * @license For open source use: GPLv3\n *          For commercial use: JSColor Commercial License\n * @author  Jan Odvarko\n *\n * See usage examples at http://jscolor.com/examples/\n */\n\n\n\"use strict\";\n\n\nif (!window.jscolor) { window.jscolor = (function () {\n\n\n\tvar jsc = {\n\n\n\t\tregister : function () {\n\t\t\tjsc.attachDOMReadyEvent(jsc.init);\n\t\t\tjsc.attachEvent(document, 'mousedown', jsc.onDocumentMouseDown);\n\t\t\tjsc.attachEvent(document, 'touchstart', jsc.onDocumentTouchStart);\n\t\t\tjsc.attachEvent(window, 'resize', jsc.onWindowResize);\n\t\t},\n\n\n\t\tinit : function () {\n\t\t\tif (jsc.jscolor.lookupClass) {\n\t\t\t\tjsc.jscolor.installByClassName(jsc.jscolor.lookupClass);\n\t\t\t}\n\t\t},\n\n\n\t\ttryInstallOnElements : function (elms, className) {\n\t\t\tvar matchClass = new RegExp('(^|\\\\s)(' + className + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\n\t\t\tfor (var i = 0; i < elms.length; i += 1) {\n\t\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color') {\n\t\t\t\t\tif (jsc.isColorAttrSupported) {\n\t\t\t\t\t\t// skip inputs of type 'color' if supported by the browser\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar m;\n\t\t\t\tif (!elms[i].jscolor && elms[i].className && (m = elms[i].className.match(matchClass))) {\n\t\t\t\t\tvar targetElm = elms[i];\n\t\t\t\t\tvar optsStr = null;\n\n\t\t\t\t\tvar dataOptions = jsc.getDataAttr(targetElm, 'jscolor');\n\t\t\t\t\tif (dataOptions !== null) {\n\t\t\t\t\t\toptsStr = dataOptions;\n\t\t\t\t\t} else if (m[4]) {\n\t\t\t\t\t\toptsStr = m[4];\n\t\t\t\t\t}\n\n\t\t\t\t\tvar opts = {};\n\t\t\t\t\tif (optsStr) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\topts = (new Function ('return (' + optsStr + ')'))();\n\t\t\t\t\t\t} catch(eParseError) {\n\t\t\t\t\t\t\tjsc.warn('Error parsing jscolor options: ' + eParseError + ':\\n' + optsStr);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttargetElm.jscolor = new jsc.jscolor(targetElm, opts);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tisColorAttrSupported : (function () {\n\t\t\tvar elm = document.createElement('input');\n\t\t\tif (elm.setAttribute) {\n\t\t\t\telm.setAttribute('type', 'color');\n\t\t\t\tif (elm.type.toLowerCase() == 'color') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t})(),\n\n\n\t\tisCanvasSupported : (function () {\n\t\t\tvar elm = document.createElement('canvas');\n\t\t\treturn !!(elm.getContext && elm.getContext('2d'));\n\t\t})(),\n\n\n\t\tfetchElement : function (mixed) {\n\t\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\n\t\t},\n\n\n\t\tisElementType : function (elm, type) {\n\t\t\treturn elm.nodeName.toLowerCase() === type.toLowerCase();\n\t\t},\n\n\n\t\tgetDataAttr : function (el, name) {\n\t\t\tvar attrName = 'data-' + name;\n\t\t\tvar attrValue = el.getAttribute(attrName);\n\t\t\tif (attrValue !== null) {\n\t\t\t\treturn attrValue;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\n\t\tattachEvent : function (el, evnt, func) {\n\t\t\tif (el.addEventListener) {\n\t\t\t\tel.addEventListener(evnt, func, false);\n\t\t\t} else if (el.attachEvent) {\n\t\t\t\tel.attachEvent('on' + evnt, func);\n\t\t\t}\n\t\t},\n\n\n\t\tdetachEvent : function (el, evnt, func) {\n\t\t\tif (el.removeEventListener) {\n\t\t\t\tel.removeEventListener(evnt, func, false);\n\t\t\t} else if (el.detachEvent) {\n\t\t\t\tel.detachEvent('on' + evnt, func);\n\t\t\t}\n\t\t},\n\n\n\t\t_attachedGroupEvents : {},\n\n\n\t\tattachGroupEvent : function (groupName, el, evnt, func) {\n\t\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n\t\t\t\tjsc._attachedGroupEvents[groupName] = [];\n\t\t\t}\n\t\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\n\t\t\tjsc.attachEvent(el, evnt, func);\n\t\t},\n\n\n\t\tdetachGroupEvents : function (groupName) {\n\t\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n\t\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\n\t\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\n\t\t\t\t\tjsc.detachEvent(evt[0], evt[1], evt[2]);\n\t\t\t\t}\n\t\t\t\tdelete jsc._attachedGroupEvents[groupName];\n\t\t\t}\n\t\t},\n\n\n\t\tattachDOMReadyEvent : function (func) {\n\t\t\tvar fired = false;\n\t\t\tvar fireOnce = function () {\n\t\t\t\tif (!fired) {\n\t\t\t\t\tfired = true;\n\t\t\t\t\tfunc();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (document.readyState === 'complete') {\n\t\t\t\tsetTimeout(fireOnce, 1); // async\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (document.addEventListener) {\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', fireOnce, false);\n\n\t\t\t\t// Fallback\n\t\t\t\twindow.addEventListener('load', fireOnce, false);\n\n\t\t\t} else if (document.attachEvent) {\n\t\t\t\t// IE\n\t\t\t\tdocument.attachEvent('onreadystatechange', function () {\n\t\t\t\t\tif (document.readyState === 'complete') {\n\t\t\t\t\t\tdocument.detachEvent('onreadystatechange', arguments.callee);\n\t\t\t\t\t\tfireOnce();\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// Fallback\n\t\t\t\twindow.attachEvent('onload', fireOnce);\n\n\t\t\t\t// IE7/8\n\t\t\t\tif (document.documentElement.doScroll && window == window.top) {\n\t\t\t\t\tvar tryScroll = function () {\n\t\t\t\t\t\tif (!document.body) { return; }\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tdocument.documentElement.doScroll('left');\n\t\t\t\t\t\t\tfireOnce();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tsetTimeout(tryScroll, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\ttryScroll();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\twarn : function (msg) {\n\t\t\tif (window.console && window.console.warn) {\n\t\t\t\twindow.console.warn(msg);\n\t\t\t}\n\t\t},\n\n\n\t\tpreventDefault : function (e) {\n\t\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\t\te.returnValue = false;\n\t\t},\n\n\n\t\tcaptureTarget : function (target) {\n\t\t\t// IE\n\t\t\tif (target.setCapture) {\n\t\t\t\tjsc._capturedTarget = target;\n\t\t\t\tjsc._capturedTarget.setCapture();\n\t\t\t}\n\t\t},\n\n\n\t\treleaseTarget : function () {\n\t\t\t// IE\n\t\t\tif (jsc._capturedTarget) {\n\t\t\t\tjsc._capturedTarget.releaseCapture();\n\t\t\t\tjsc._capturedTarget = null;\n\t\t\t}\n\t\t},\n\n\n\t\tfireEvent : function (el, evnt) {\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (document.createEvent) {\n\t\t\t\tvar ev = document.createEvent('HTMLEvents');\n\t\t\t\tev.initEvent(evnt, true, true);\n\t\t\t\tel.dispatchEvent(ev);\n\t\t\t} else if (document.createEventObject) {\n\t\t\t\tvar ev = document.createEventObject();\n\t\t\t\tel.fireEvent('on' + evnt, ev);\n\t\t\t} else if (el['on' + evnt]) { // alternatively use the traditional event model\n\t\t\t\tel['on' + evnt]();\n\t\t\t}\n\t\t},\n\n\n\t\tclassNameToList : function (className) {\n\t\t\treturn className.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n\t\t},\n\n\n\t\t// The className parameter (str) can only contain a single class name\n\t\thasClass : function (elm, className) {\n\t\t\tif (!className) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\n\t\t},\n\n\n\t\t// The className parameter (str) can contain multiple class names separated by whitespace\n\t\tsetClass : function (elm, className) {\n\t\t\tvar classList = jsc.classNameToList(className);\n\t\t\tfor (var i = 0; i < classList.length; i += 1) {\n\t\t\t\tif (!jsc.hasClass(elm, classList[i])) {\n\t\t\t\t\telm.className += (elm.className ? ' ' : '') + classList[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t// The className parameter (str) can contain multiple class names separated by whitespace\n\t\tunsetClass : function (elm, className) {\n\t\t\tvar classList = jsc.classNameToList(className);\n\t\t\tfor (var i = 0; i < classList.length; i += 1) {\n\t\t\t\tvar repl = new RegExp(\n\t\t\t\t\t'^\\\\s*' + classList[i] + '\\\\s*|' +\n\t\t\t\t\t'\\\\s*' + classList[i] + '\\\\s*$|' +\n\t\t\t\t\t'\\\\s+' + classList[i] + '(\\\\s+)',\n\t\t\t\t\t'g'\n\t\t\t\t);\n\t\t\t\telm.className = elm.className.replace(repl, '$1');\n\t\t\t}\n\t\t},\n\n\n\t\tgetStyle : function (elm) {\n\t\t\treturn window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\n\t\t},\n\n\n\t\tsetStyle : (function () {\n\t\t\tvar helper = document.createElement('div');\n\t\t\tvar getSupportedProp = function (names) {\n\t\t\t\tfor (var i = 0; i < names.length; i += 1) {\n\t\t\t\t\tif (names[i] in helper.style) {\n\t\t\t\t\t\treturn names[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar props = {\n\t\t\t\tborderRadius: getSupportedProp(['borderRadius', 'MozBorderRadius', 'webkitBorderRadius']),\n\t\t\t\tboxShadow: getSupportedProp(['boxShadow', 'MozBoxShadow', 'webkitBoxShadow'])\n\t\t\t};\n\t\t\treturn function (elm, prop, value) {\n\t\t\t\tswitch (prop.toLowerCase()) {\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\t\tvar alphaOpacity = Math.round(parseFloat(value) * 100);\n\t\t\t\t\t\telm.style.opacity = value;\n\t\t\t\t\t\telm.style.filter = 'alpha(opacity=' + alphaOpacity + ')';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\telm.style[props[prop]] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\t\t})(),\n\n\n\t\tsetBorderRadius : function (elm, value) {\n\t\t\tjsc.setStyle(elm, 'borderRadius', value || '0');\n\t\t},\n\n\n\t\tsetBoxShadow : function (elm, value) {\n\t\t\tjsc.setStyle(elm, 'boxShadow', value || 'none');\n\t\t},\n\n\n\t\tgetElementPos : function (e, relativeToViewport) {\n\t\t\tvar x=0, y=0;\n\t\t\tvar rect = e.getBoundingClientRect();\n\t\t\tx = rect.left;\n\t\t\ty = rect.top;\n\t\t\tif (!relativeToViewport) {\n\t\t\t\tvar viewPos = jsc.getViewPos();\n\t\t\t\tx += viewPos[0];\n\t\t\t\ty += viewPos[1];\n\t\t\t}\n\t\t\treturn [x, y];\n\t\t},\n\n\n\t\tgetElementSize : function (e) {\n\t\t\treturn [e.offsetWidth, e.offsetHeight];\n\t\t},\n\n\n\t\t// get pointer's X/Y coordinates relative to viewport\n\t\tgetAbsPointerPos : function (e) {\n\t\t\tif (!e) { e = window.event; }\n\t\t\tvar x = 0, y = 0;\n\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n\t\t\t\t// touch devices\n\t\t\t\tx = e.changedTouches[0].clientX;\n\t\t\t\ty = e.changedTouches[0].clientY;\n\t\t\t} else if (typeof e.clientX === 'number') {\n\t\t\t\tx = e.clientX;\n\t\t\t\ty = e.clientY;\n\t\t\t}\n\t\t\treturn { x: x, y: y };\n\t\t},\n\n\n\t\t// get pointer's X/Y coordinates relative to target element\n\t\tgetRelPointerPos : function (e) {\n\t\t\tif (!e) { e = window.event; }\n\t\t\tvar target = e.target || e.srcElement;\n\t\t\tvar targetRect = target.getBoundingClientRect();\n\n\t\t\tvar x = 0, y = 0;\n\n\t\t\tvar clientX = 0, clientY = 0;\n\t\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n\t\t\t\t// touch devices\n\t\t\t\tclientX = e.changedTouches[0].clientX;\n\t\t\t\tclientY = e.changedTouches[0].clientY;\n\t\t\t} else if (typeof e.clientX === 'number') {\n\t\t\t\tclientX = e.clientX;\n\t\t\t\tclientY = e.clientY;\n\t\t\t}\n\n\t\t\tx = clientX - targetRect.left;\n\t\t\ty = clientY - targetRect.top;\n\t\t\treturn { x: x, y: y };\n\t\t},\n\n\n\t\tgetViewPos : function () {\n\t\t\tvar doc = document.documentElement;\n\t\t\treturn [\n\t\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\n\t\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\t\t\t];\n\t\t},\n\n\n\t\tgetViewSize : function () {\n\t\t\tvar doc = document.documentElement;\n\t\t\treturn [\n\t\t\t\t(window.innerWidth || doc.clientWidth),\n\t\t\t\t(window.innerHeight || doc.clientHeight),\n\t\t\t];\n\t\t},\n\n\n\t\tredrawPosition : function () {\n\n\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\tvar thisObj = jsc.picker.owner;\n\n\t\t\t\tvar tp, vp;\n\n\t\t\t\tif (thisObj.fixed) {\n\t\t\t\t\t// Fixed elements are positioned relative to viewport,\n\t\t\t\t\t// therefore we can ignore the scroll offset\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\n\t\t\t\t\tvp = [0, 0]; // view pos\n\t\t\t\t} else {\n\t\t\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\n\t\t\t\t\tvp = jsc.getViewPos(); // view pos\n\t\t\t\t}\n\n\t\t\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\n\t\t\t\tvar vs = jsc.getViewSize(); // view size\n\t\t\t\tvar ps = jsc.getPickerOuterDims(thisObj); // picker size\n\t\t\t\tvar a, b, c;\n\t\t\t\tswitch (thisObj.position.toLowerCase()) {\n\t\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\n\t\t\t\t\tcase 'right':a=1; b=0; c=1; break;\n\t\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\n\t\t\t\t\tdefault:     a=0; b=1; c=1; break;\n\t\t\t\t}\n\t\t\t\tvar l = (ts[b]+ps[b])/2;\n\n\t\t\t\t// compute picker position\n\t\t\t\tif (!thisObj.smartPosition) {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\ttp[b]+ts[b]-l+l*c\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\n\t\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\n\t\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\n\t\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\n\t\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tvar x = pp[a];\n\t\t\t\tvar y = pp[b];\n\t\t\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\n\t\t\t\tvar contractShadow =\n\t\t\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\n\t\t\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\n\n\t\t\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\n\t\t\t}\n\t\t},\n\n\n\t\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\n\t\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\n\n\t\t\tjsc.picker.wrap.style.position = positionValue;\n\t\t\tjsc.picker.wrap.style.left = x + 'px';\n\t\t\tjsc.picker.wrap.style.top = y + 'px';\n\n\t\t\tjsc.setBoxShadow(\n\t\t\t\tjsc.picker.boxS,\n\t\t\t\tthisObj.shadow ?\n\t\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\n\t\t\t\t\tnull);\n\t\t},\n\n\n\t\tgetPickerDims : function (thisObj) {\n\t\t\tvar displaySlider = !!jsc.getSliderComponent(thisObj);\n\t\t\tvar dims = [\n\t\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.width +\n\t\t\t\t(displaySlider ? 2 * thisObj.insetWidth + jsc.getPadToSliderPadding(thisObj) + thisObj.sliderSize : 0),\n\t\t\t\t2 * thisObj.insetWidth + 2 * thisObj.padding + thisObj.height +\n\t\t\t\t(thisObj.closable ? 2 * thisObj.insetWidth + thisObj.padding + thisObj.buttonHeight : 0)\n\t\t\t];\n\t\t\treturn dims;\n\t\t},\n\n\n\t\tgetPickerOuterDims : function (thisObj) {\n\t\t\tvar dims = jsc.getPickerDims(thisObj);\n\t\t\treturn [\n\t\t\t\tdims[0] + 2 * thisObj.borderWidth,\n\t\t\t\tdims[1] + 2 * thisObj.borderWidth\n\t\t\t];\n\t\t},\n\n\n\t\tgetPadToSliderPadding : function (thisObj) {\n\t\t\treturn Math.max(thisObj.padding, 1.5 * (2 * thisObj.pointerBorderWidth + thisObj.pointerThickness));\n\t\t},\n\n\n\t\tgetPadYComponent : function (thisObj) {\n\t\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\n\t\t\t\tcase 'v': return 'v'; break;\n\t\t\t}\n\t\t\treturn 's';\n\t\t},\n\n\n\t\tgetSliderComponent : function (thisObj) {\n\t\t\tif (thisObj.mode.length > 2) {\n\t\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\n\t\t\t\t\tcase 's': return 's'; break;\n\t\t\t\t\tcase 'v': return 'v'; break;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\n\t\tonDocumentMouseDown : function (e) {\n\t\t\tif (!e) { e = window.event; }\n\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\tif (target._jscLinkedInstance) {\n\t\t\t\tif (target._jscLinkedInstance.showOnClick) {\n\t\t\t\t\ttarget._jscLinkedInstance.show();\n\t\t\t\t}\n\t\t\t} else if (target._jscControlName) {\n\t\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'mouse');\n\t\t\t} else {\n\t\t\t\t// Mouse is outside the picker controls -> hide the color picker!\n\t\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\t\tjsc.picker.owner.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tonDocumentTouchStart : function (e) {\n\t\t\tif (!e) { e = window.event; }\n\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\tif (target._jscLinkedInstance) {\n\t\t\t\tif (target._jscLinkedInstance.showOnClick) {\n\t\t\t\t\ttarget._jscLinkedInstance.show();\n\t\t\t\t}\n\t\t\t} else if (target._jscControlName) {\n\t\t\t\tjsc.onControlPointerStart(e, target, target._jscControlName, 'touch');\n\t\t\t} else {\n\t\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\t\tjsc.picker.owner.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tonWindowResize : function (e) {\n\t\t\tjsc.redrawPosition();\n\t\t},\n\n\n\t\tonParentScroll : function (e) {\n\t\t\t// hide the picker when one of the parent elements is scrolled\n\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\tjsc.picker.owner.hide();\n\t\t\t}\n\t\t},\n\n\n\t\t_pointerMoveEvent : {\n\t\t\tmouse: 'mousemove',\n\t\t\ttouch: 'touchmove'\n\t\t},\n\t\t_pointerEndEvent : {\n\t\t\tmouse: 'mouseup',\n\t\t\ttouch: 'touchend'\n\t\t},\n\n\n\t\t_pointerOrigin : null,\n\t\t_capturedTarget : null,\n\n\n\t\tonControlPointerStart : function (e, target, controlName, pointerType) {\n\t\t\tvar thisObj = target._jscInstance;\n\n\t\t\tjsc.preventDefault(e);\n\t\t\tjsc.captureTarget(target);\n\n\t\t\tvar registerDragEvents = function (doc, offset) {\n\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\n\t\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\n\t\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\n\t\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\n\t\t\t};\n\n\t\t\tregisterDragEvents(document, [0, 0]);\n\n\t\t\tif (window.parent && window.frameElement) {\n\t\t\t\tvar rect = window.frameElement.getBoundingClientRect();\n\t\t\t\tvar ofs = [-rect.left, -rect.top];\n\t\t\t\tregisterDragEvents(window.parent.window.document, ofs);\n\t\t\t}\n\n\t\t\tvar abs = jsc.getAbsPointerPos(e);\n\t\t\tvar rel = jsc.getRelPointerPos(e);\n\t\t\tjsc._pointerOrigin = {\n\t\t\t\tx: abs.x - rel.x,\n\t\t\t\ty: abs.y - rel.y\n\t\t\t};\n\n\t\t\tswitch (controlName) {\n\t\t\t\tcase 'pad':\n\t\t\t\t\t// if the slider is at the bottom, move it up\n\t\t\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\n\t\t\t\t\t\tcase 's': if (thisObj.hsv[1] === 0) { thisObj.fromHSV(null, 100, null); }; break;\n\t\t\t\t\t\tcase 'v': if (thisObj.hsv[2] === 0) { thisObj.fromHSV(null, null, 100); }; break;\n\t\t\t\t\t}\n\t\t\t\t\tjsc.setPad(thisObj, e, 0, 0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'sld':\n\t\t\t\t\tjsc.setSld(thisObj, e, 0);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tjsc.dispatchFineChange(thisObj);\n\t\t},\n\n\n\t\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\n\t\t\treturn function (e) {\n\t\t\t\tvar thisObj = target._jscInstance;\n\t\t\t\tswitch (controlName) {\n\t\t\t\t\tcase 'pad':\n\t\t\t\t\t\tif (!e) { e = window.event; }\n\t\t\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\n\t\t\t\t\t\tjsc.dispatchFineChange(thisObj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'sld':\n\t\t\t\t\t\tif (!e) { e = window.event; }\n\t\t\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\n\t\t\t\t\t\tjsc.dispatchFineChange(thisObj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\n\t\t\treturn function (e) {\n\t\t\t\tvar thisObj = target._jscInstance;\n\t\t\t\tjsc.detachGroupEvents('drag');\n\t\t\t\tjsc.releaseTarget();\n\t\t\t\t// Always dispatch changes after detaching outstanding mouse handlers,\n\t\t\t\t// in case some user interaction will occur in user's onchange callback\n\t\t\t\t// that would intrude with current mouse events\n\t\t\t\tjsc.dispatchChange(thisObj);\n\t\t\t};\n\t\t},\n\n\n\t\tdispatchChange : function (thisObj) {\n\t\t\tif (thisObj.valueElement) {\n\t\t\t\tif (jsc.isElementType(thisObj.valueElement, 'input')) {\n\t\t\t\t\tjsc.fireEvent(thisObj.valueElement, 'change');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\tdispatchFineChange : function (thisObj) {\n\t\t\tif (thisObj.onFineChange) {\n\t\t\t\tvar callback;\n\t\t\t\tif (typeof thisObj.onFineChange === 'string') {\n\t\t\t\t\tcallback = new Function (thisObj.onFineChange);\n\t\t\t\t} else {\n\t\t\t\t\tcallback = thisObj.onFineChange;\n\t\t\t\t}\n\t\t\t\tcallback.call(thisObj);\n\t\t\t}\n\t\t},\n\n\n\t\tsetPad : function (thisObj, e, ofsX, ofsY) {\n\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.insetWidth;\n\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\n\n\t\t\tvar xVal = x * (360 / (thisObj.width - 1));\n\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\t\tswitch (jsc.getPadYComponent(thisObj)) {\n\t\t\t\tcase 's': thisObj.fromHSV(xVal, yVal, null, jsc.leaveSld); break;\n\t\t\t\tcase 'v': thisObj.fromHSV(xVal, null, yVal, jsc.leaveSld); break;\n\t\t\t}\n\t\t},\n\n\n\t\tsetSld : function (thisObj, e, ofsY) {\n\t\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.insetWidth;\n\n\t\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\t\tswitch (jsc.getSliderComponent(thisObj)) {\n\t\t\t\tcase 's': thisObj.fromHSV(null, yVal, null, jsc.leavePad); break;\n\t\t\t\tcase 'v': thisObj.fromHSV(null, null, yVal, jsc.leavePad); break;\n\t\t\t}\n\t\t},\n\n\n\t\t_vmlNS : 'jsc_vml_',\n\t\t_vmlCSS : 'jsc_vml_css_',\n\t\t_vmlReady : false,\n\n\n\t\tinitVML : function () {\n\t\t\tif (!jsc._vmlReady) {\n\t\t\t\t// init VML namespace\n\t\t\t\tvar doc = document;\n\t\t\t\tif (!doc.namespaces[jsc._vmlNS]) {\n\t\t\t\t\tdoc.namespaces.add(jsc._vmlNS, 'urn:schemas-microsoft-com:vml');\n\t\t\t\t}\n\t\t\t\tif (!doc.styleSheets[jsc._vmlCSS]) {\n\t\t\t\t\tvar tags = ['shape', 'shapetype', 'group', 'background', 'path', 'formulas', 'handles', 'fill', 'stroke', 'shadow', 'textbox', 'textpath', 'imagedata', 'line', 'polyline', 'curve', 'rect', 'roundrect', 'oval', 'arc', 'image'];\n\t\t\t\t\tvar ss = doc.createStyleSheet();\n\t\t\t\t\tss.owningElement.id = jsc._vmlCSS;\n\t\t\t\t\tfor (var i = 0; i < tags.length; i += 1) {\n\t\t\t\t\t\tss.addRule(jsc._vmlNS + '\\\\:' + tags[i], 'behavior:url(#default#VML);');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tjsc._vmlReady = true;\n\t\t\t}\n\t\t},\n\n\n\t\tcreatePalette : function () {\n\n\t\t\tvar paletteObj = {\n\t\t\t\telm: null,\n\t\t\t\tdraw: null\n\t\t\t};\n\n\t\t\tif (jsc.isCanvasSupported) {\n\t\t\t\t// Canvas implementation for modern browsers\n\n\t\t\t\tvar canvas = document.createElement('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tvar drawFunc = function (width, height, type) {\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n\t\t\t\t\thGrad.addColorStop(0 / 6, '#F00');\n\t\t\t\t\thGrad.addColorStop(1 / 6, '#FF0');\n\t\t\t\t\thGrad.addColorStop(2 / 6, '#0F0');\n\t\t\t\t\thGrad.addColorStop(3 / 6, '#0FF');\n\t\t\t\t\thGrad.addColorStop(4 / 6, '#00F');\n\t\t\t\t\thGrad.addColorStop(5 / 6, '#F0F');\n\t\t\t\t\thGrad.addColorStop(6 / 6, '#F00');\n\n\t\t\t\t\tctx.fillStyle = hGrad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\t\t\tswitch (type.toLowerCase()) {\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\n\t\t\t\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tctx.fillStyle = vGrad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t};\n\n\t\t\t\tpaletteObj.elm = canvas;\n\t\t\t\tpaletteObj.draw = drawFunc;\n\n\t\t\t} else {\n\t\t\t\t// VML fallback for IE 7 and 8\n\n\t\t\t\tjsc.initVML();\n\n\t\t\t\tvar vmlContainer = document.createElement('div');\n\t\t\t\tvmlContainer.style.position = 'relative';\n\t\t\t\tvmlContainer.style.overflow = 'hidden';\n\n\t\t\t\tvar hGrad = document.createElement(jsc._vmlNS + ':fill');\n\t\t\t\thGrad.type = 'gradient';\n\t\t\t\thGrad.method = 'linear';\n\t\t\t\thGrad.angle = '90';\n\t\t\t\thGrad.colors = '16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0'\n\n\t\t\t\tvar hRect = document.createElement(jsc._vmlNS + ':rect');\n\t\t\t\thRect.style.position = 'absolute';\n\t\t\t\thRect.style.left = -1 + 'px';\n\t\t\t\thRect.style.top = -1 + 'px';\n\t\t\t\thRect.stroked = false;\n\t\t\t\thRect.appendChild(hGrad);\n\t\t\t\tvmlContainer.appendChild(hRect);\n\n\t\t\t\tvar vGrad = document.createElement(jsc._vmlNS + ':fill');\n\t\t\t\tvGrad.type = 'gradient';\n\t\t\t\tvGrad.method = 'linear';\n\t\t\t\tvGrad.angle = '180';\n\t\t\t\tvGrad.opacity = '0';\n\n\t\t\t\tvar vRect = document.createElement(jsc._vmlNS + ':rect');\n\t\t\t\tvRect.style.position = 'absolute';\n\t\t\t\tvRect.style.left = -1 + 'px';\n\t\t\t\tvRect.style.top = -1 + 'px';\n\t\t\t\tvRect.stroked = false;\n\t\t\t\tvRect.appendChild(vGrad);\n\t\t\t\tvmlContainer.appendChild(vRect);\n\n\t\t\t\tvar drawFunc = function (width, height, type) {\n\t\t\t\t\tvmlContainer.style.width = width + 'px';\n\t\t\t\t\tvmlContainer.style.height = height + 'px';\n\n\t\t\t\t\thRect.style.width =\n\t\t\t\t\t\tvRect.style.width =\n\t\t\t\t\t\t\t(width + 1) + 'px';\n\t\t\t\t\thRect.style.height =\n\t\t\t\t\t\tvRect.style.height =\n\t\t\t\t\t\t\t(height + 1) + 'px';\n\n\t\t\t\t\t// Colors must be specified during every redraw, otherwise IE won't display\n\t\t\t\t\t// a full gradient during a subsequential redraw\n\t\t\t\t\thGrad.color = '#F00';\n\t\t\t\t\thGrad.color2 = '#F00';\n\n\t\t\t\t\tswitch (type.toLowerCase()) {\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\tvGrad.color = vGrad.color2 = '#FFF';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'v':\n\t\t\t\t\t\t\tvGrad.color = vGrad.color2 = '#000';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tpaletteObj.elm = vmlContainer;\n\t\t\t\tpaletteObj.draw = drawFunc;\n\t\t\t}\n\n\t\t\treturn paletteObj;\n\t\t},\n\n\n\t\tcreateSliderGradient : function () {\n\n\t\t\tvar sliderObj = {\n\t\t\t\telm: null,\n\t\t\t\tdraw: null\n\t\t\t};\n\n\t\t\tif (jsc.isCanvasSupported) {\n\t\t\t\t// Canvas implementation for modern browsers\n\n\t\t\t\tvar canvas = document.createElement('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tvar drawFunc = function (width, height, color1, color2) {\n\t\t\t\t\tcanvas.width = width;\n\t\t\t\t\tcanvas.height = height;\n\n\t\t\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\t\t\tgrad.addColorStop(0, color1);\n\t\t\t\t\tgrad.addColorStop(1, color2);\n\n\t\t\t\t\tctx.fillStyle = grad;\n\t\t\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t\t};\n\n\t\t\t\tsliderObj.elm = canvas;\n\t\t\t\tsliderObj.draw = drawFunc;\n\n\t\t\t} else {\n\t\t\t\t// VML fallback for IE 7 and 8\n\n\t\t\t\tjsc.initVML();\n\n\t\t\t\tvar vmlContainer = document.createElement('div');\n\t\t\t\tvmlContainer.style.position = 'relative';\n\t\t\t\tvmlContainer.style.overflow = 'hidden';\n\n\t\t\t\tvar grad = document.createElement(jsc._vmlNS + ':fill');\n\t\t\t\tgrad.type = 'gradient';\n\t\t\t\tgrad.method = 'linear';\n\t\t\t\tgrad.angle = '180';\n\n\t\t\t\tvar rect = document.createElement(jsc._vmlNS + ':rect');\n\t\t\t\trect.style.position = 'absolute';\n\t\t\t\trect.style.left = -1 + 'px';\n\t\t\t\trect.style.top = -1 + 'px';\n\t\t\t\trect.stroked = false;\n\t\t\t\trect.appendChild(grad);\n\t\t\t\tvmlContainer.appendChild(rect);\n\n\t\t\t\tvar drawFunc = function (width, height, color1, color2) {\n\t\t\t\t\tvmlContainer.style.width = width + 'px';\n\t\t\t\t\tvmlContainer.style.height = height + 'px';\n\n\t\t\t\t\trect.style.width = (width + 1) + 'px';\n\t\t\t\t\trect.style.height = (height + 1) + 'px';\n\n\t\t\t\t\tgrad.color = color1;\n\t\t\t\t\tgrad.color2 = color2;\n\t\t\t\t};\n\n\t\t\t\tsliderObj.elm = vmlContainer;\n\t\t\t\tsliderObj.draw = drawFunc;\n\t\t\t}\n\n\t\t\treturn sliderObj;\n\t\t},\n\n\n\t\tleaveValue : 1<<0,\n\t\tleaveStyle : 1<<1,\n\t\tleavePad : 1<<2,\n\t\tleaveSld : 1<<3,\n\n\n\t\tBoxShadow : (function () {\n\t\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\n\t\t\t\tthis.hShadow = hShadow;\n\t\t\t\tthis.vShadow = vShadow;\n\t\t\t\tthis.blur = blur;\n\t\t\t\tthis.spread = spread;\n\t\t\t\tthis.color = color;\n\t\t\t\tthis.inset = !!inset;\n\t\t\t};\n\n\t\t\tBoxShadow.prototype.toString = function () {\n\t\t\t\tvar vals = [\n\t\t\t\t\tMath.round(this.hShadow) + 'px',\n\t\t\t\t\tMath.round(this.vShadow) + 'px',\n\t\t\t\t\tMath.round(this.blur) + 'px',\n\t\t\t\t\tMath.round(this.spread) + 'px',\n\t\t\t\t\tthis.color\n\t\t\t\t];\n\t\t\t\tif (this.inset) {\n\t\t\t\t\tvals.push('inset');\n\t\t\t\t}\n\t\t\t\treturn vals.join(' ');\n\t\t\t};\n\n\t\t\treturn BoxShadow;\n\t\t})(),\n\n\n\t\t//\n\t\t// Usage:\n\t\t// var myColor = new jscolor(<targetElement> [, <options>])\n\t\t//\n\n\t\tjscolor : function (targetElement, options) {\n\n\t\t\t// General options\n\t\t\t//\n\t\t\tthis.value = null; // initial HEX color. To change it later, use methods fromString(), fromHSV() and fromRGB()\n\t\t\tthis.valueElement = targetElement; // element that will be used to display and input the color code\n\t\t\tthis.styleElement = targetElement; // element that will preview the picked color using CSS backgroundColor\n\t\t\tthis.required = true; // whether the associated text <input> can be left empty\n\t\t\tthis.refine = true; // whether to refine the entered color code (e.g. uppercase it and remove whitespace)\n\t\t\tthis.hash = false; // whether to prefix the HEX color code with # symbol\n\t\t\tthis.uppercase = true; // whether to uppercase the color code\n\t\t\tthis.onFineChange = null; // called instantly every time the color changes (value can be either a function or a string with javascript code)\n\t\t\tthis.activeClass = 'jscolor-active'; // class to be set to the target element when a picker window is open on it\n\t\t\tthis.minS = 0; // min allowed saturation (0 - 100)\n\t\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\n\t\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\n\t\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\n\n\t\t\t// Accessing the picked color\n\t\t\t//\n\t\t\tthis.hsv = [0, 0, 100]; // read-only  [0-360, 0-100, 0-100]\n\t\t\tthis.rgb = [255, 255, 255]; // read-only  [0-255, 0-255, 0-255]\n\n\t\t\t// Color Picker options\n\t\t\t//\n\t\t\tthis.width = 181; // width of color palette (in px)\n\t\t\tthis.height = 101; // height of color palette (in px)\n\t\t\tthis.showOnClick = true; // whether to display the color picker when user clicks on its target element\n\t\t\tthis.mode = 'HSV'; // HSV | HVS | HS | HV - layout of the color picker controls\n\t\t\tthis.position = 'bottom'; // left | right | top | bottom - position relative to the target element\n\t\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\n\t\t\tthis.sliderSize = 16; // px\n\t\t\tthis.crossSize = 8; // px\n\t\t\tthis.closable = false; // whether to display the Close button\n\t\t\tthis.closeText = 'Close';\n\t\t\tthis.buttonColor = '#000000'; // CSS color\n\t\t\tthis.buttonHeight = 18; // px\n\t\t\tthis.padding = 12; // px\n\t\t\tthis.backgroundColor = '#FFFFFF'; // CSS color\n\t\t\tthis.borderWidth = 1; // px\n\t\t\tthis.borderColor = '#BBBBBB'; // CSS color\n\t\t\tthis.borderRadius = 8; // px\n\t\t\tthis.insetWidth = 1; // px\n\t\t\tthis.insetColor = '#BBBBBB'; // CSS color\n\t\t\tthis.shadow = true; // whether to display shadow\n\t\t\tthis.shadowBlur = 15; // px\n\t\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\n\t\t\tthis.pointerColor = '#4C4C4C'; // px\n\t\t\tthis.pointerBorderColor = '#FFFFFF'; // px\n\t\t\tthis.pointerBorderWidth = 1; // px\n\t\t\tthis.pointerThickness = 2; // px\n\t\t\tthis.zIndex = 1000;\n\t\t\tthis.container = null; // where to append the color picker (BODY element by default)\n\n\n\t\t\tfor (var opt in options) {\n\t\t\t\tif (options.hasOwnProperty(opt)) {\n\t\t\t\t\tthis[opt] = options[opt];\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tthis.hide = function () {\n\t\t\t\tif (isPickerOwner()) {\n\t\t\t\t\tdetachPicker();\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\tthis.show = function () {\n\t\t\t\tdrawPicker();\n\t\t\t};\n\n\n\t\t\tthis.redraw = function () {\n\t\t\t\tif (isPickerOwner()) {\n\t\t\t\t\tdrawPicker();\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\tthis.importColor = function () {\n\t\t\t\tif (!this.valueElement) {\n\t\t\t\t\tthis.exportColor();\n\t\t\t\t} else {\n\t\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\n\t\t\t\t\t\tif (!this.refine) {\n\t\t\t\t\t\t\tif (!this.fromString(this.valueElement.value, jsc.leaveValue)) {\n\t\t\t\t\t\t\t\tif (this.styleElement) {\n\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\n\t\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\n\t\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!this.required && /^\\s*$/.test(this.valueElement.value)) {\n\t\t\t\t\t\t\tthis.valueElement.value = '';\n\t\t\t\t\t\t\tif (this.styleElement) {\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundImage = this.styleElement._jscOrigStyle.backgroundImage;\n\t\t\t\t\t\t\t\tthis.styleElement.style.backgroundColor = this.styleElement._jscOrigStyle.backgroundColor;\n\t\t\t\t\t\t\t\tthis.styleElement.style.color = this.styleElement._jscOrigStyle.color;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.exportColor(jsc.leaveValue | jsc.leaveStyle);\n\n\t\t\t\t\t\t} else if (this.fromString(this.valueElement.value)) {\n\t\t\t\t\t\t\t// managed to import color successfully from the value -> OK, don't do anything\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.exportColor();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// not an input element -> doesn't have any value\n\t\t\t\t\t\tthis.exportColor();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\tthis.exportColor = function (flags) {\n\t\t\t\tif (!(flags & jsc.leaveValue) && this.valueElement) {\n\t\t\t\t\tvar value = this.toString();\n\t\t\t\t\tif (this.uppercase) { value = value.toUpperCase(); }\n\t\t\t\t\tif (this.hash) { value = '#' + value; }\n\n\t\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\n\t\t\t\t\t\tthis.valueElement.value = value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.valueElement.innerHTML = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!(flags & jsc.leaveStyle)) {\n\t\t\t\t\tif (this.styleElement) {\n\t\t\t\t\t\tthis.styleElement.style.backgroundImage = 'none';\n\t\t\t\t\t\tthis.styleElement.style.backgroundColor = '#' + this.toString();\n\t\t\t\t\t\tthis.styleElement.style.color = this.isLight() ? '#000' : '#FFF';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!(flags & jsc.leavePad) && isPickerOwner()) {\n\t\t\t\t\tredrawPad();\n\t\t\t\t}\n\t\t\t\tif (!(flags & jsc.leaveSld) && isPickerOwner()) {\n\t\t\t\t\tredrawSld();\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\t// h: 0-360\n\t\t\t// s: 0-100\n\t\t\t// v: 0-100\n\t\t\t//\n\t\t\tthis.fromHSV = function (h, s, v, flags) { // null = don't change\n\t\t\t\tif (h !== null) {\n\t\t\t\t\tif (isNaN(h)) { return false; }\n\t\t\t\t\th = Math.max(0, Math.min(360, h));\n\t\t\t\t}\n\t\t\t\tif (s !== null) {\n\t\t\t\t\tif (isNaN(s)) { return false; }\n\t\t\t\t\ts = Math.max(0, Math.min(100, this.maxS, s), this.minS);\n\t\t\t\t}\n\t\t\t\tif (v !== null) {\n\t\t\t\t\tif (isNaN(v)) { return false; }\n\t\t\t\t\tv = Math.max(0, Math.min(100, this.maxV, v), this.minV);\n\t\t\t\t}\n\n\t\t\t\tthis.rgb = HSV_RGB(\n\t\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\n\t\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\n\t\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\n\t\t\t\t);\n\n\t\t\t\tthis.exportColor(flags);\n\t\t\t};\n\n\n\t\t\t// r: 0-255\n\t\t\t// g: 0-255\n\t\t\t// b: 0-255\n\t\t\t//\n\t\t\tthis.fromRGB = function (r, g, b, flags) { // null = don't change\n\t\t\t\tif (r !== null) {\n\t\t\t\t\tif (isNaN(r)) { return false; }\n\t\t\t\t\tr = Math.max(0, Math.min(255, r));\n\t\t\t\t}\n\t\t\t\tif (g !== null) {\n\t\t\t\t\tif (isNaN(g)) { return false; }\n\t\t\t\t\tg = Math.max(0, Math.min(255, g));\n\t\t\t\t}\n\t\t\t\tif (b !== null) {\n\t\t\t\t\tif (isNaN(b)) { return false; }\n\t\t\t\t\tb = Math.max(0, Math.min(255, b));\n\t\t\t\t}\n\n\t\t\t\tvar hsv = RGB_HSV(\n\t\t\t\t\tr===null ? this.rgb[0] : r,\n\t\t\t\t\tg===null ? this.rgb[1] : g,\n\t\t\t\t\tb===null ? this.rgb[2] : b\n\t\t\t\t);\n\t\t\t\tif (hsv[0] !== null) {\n\t\t\t\t\tthis.hsv[0] = Math.max(0, Math.min(360, hsv[0]));\n\t\t\t\t}\n\t\t\t\tif (hsv[2] !== 0) {\n\t\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\n\t\t\t\t}\n\t\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\n\n\t\t\t\t// update RGB according to final HSV, as some values might be trimmed\n\t\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\n\t\t\t\tthis.rgb[0] = rgb[0];\n\t\t\t\tthis.rgb[1] = rgb[1];\n\t\t\t\tthis.rgb[2] = rgb[2];\n\n\t\t\t\tthis.exportColor(flags);\n\t\t\t};\n\n\n\t\t\tthis.fromString = function (str, flags) {\n\t\t\t\tvar m;\n\t\t\t\tif (m = str.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i)) {\n\t\t\t\t\t// HEX notation\n\t\t\t\t\t//\n\n\t\t\t\t\tif (m[1].length === 6) {\n\t\t\t\t\t\t// 6-char notation\n\t\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\t\tparseInt(m[1].substr(0,2),16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(2,2),16),\n\t\t\t\t\t\t\tparseInt(m[1].substr(4,2),16),\n\t\t\t\t\t\t\tflags\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 3-char notation\n\t\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\n\t\t\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\n\t\t\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\n\t\t\t\t\t\t\tflags\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\n\t\t\t\t\tvar params = m[1].split(',');\n\t\t\t\t\tvar re = /^\\s*(\\d*)(\\.\\d+)?\\s*$/;\n\t\t\t\t\tvar mR, mG, mB;\n\t\t\t\t\tif (\n\t\t\t\t\t\tparams.length >= 3 &&\n\t\t\t\t\t\t(mR = params[0].match(re)) &&\n\t\t\t\t\t\t(mG = params[1].match(re)) &&\n\t\t\t\t\t\t(mB = params[2].match(re))\n\t\t\t\t\t) {\n\t\t\t\t\t\tvar r = parseFloat((mR[1] || '0') + (mR[2] || ''));\n\t\t\t\t\t\tvar g = parseFloat((mG[1] || '0') + (mG[2] || ''));\n\t\t\t\t\t\tvar b = parseFloat((mB[1] || '0') + (mB[2] || ''));\n\t\t\t\t\t\tthis.fromRGB(r, g, b, flags);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\n\t\t\tthis.toString = function () {\n\t\t\t\treturn (\n\t\t\t\t\t(0x100 | Math.round(this.rgb[0])).toString(16).substr(1) +\n\t\t\t\t\t(0x100 | Math.round(this.rgb[1])).toString(16).substr(1) +\n\t\t\t\t\t(0x100 | Math.round(this.rgb[2])).toString(16).substr(1)\n\t\t\t\t);\n\t\t\t};\n\n\n\t\t\tthis.toHEXString = function () {\n\t\t\t\treturn '#' + this.toString().toUpperCase();\n\t\t\t};\n\n\n\t\t\tthis.toRGBString = function () {\n\t\t\t\treturn ('rgb(' +\n\t\t\t\t\tMath.round(this.rgb[0]) + ',' +\n\t\t\t\t\tMath.round(this.rgb[1]) + ',' +\n\t\t\t\t\tMath.round(this.rgb[2]) + ')'\n\t\t\t\t);\n\t\t\t};\n\n\n\t\t\tthis.isLight = function () {\n\t\t\t\treturn (\n\t\t\t\t\t0.213 * this.rgb[0] +\n\t\t\t\t\t0.715 * this.rgb[1] +\n\t\t\t\t\t0.072 * this.rgb[2] >\n\t\t\t\t\t255 / 2\n\t\t\t\t);\n\t\t\t};\n\n\n\t\t\tthis._processParentElementsInDOM = function () {\n\t\t\t\tif (this._linkedElementsProcessed) { return; }\n\t\t\t\tthis._linkedElementsProcessed = true;\n\n\t\t\t\tvar elm = this.targetElement;\n\t\t\t\tdo {\n\t\t\t\t\t// If the target element or one of its parent nodes has fixed position,\n\t\t\t\t\t// then use fixed positioning instead\n\t\t\t\t\t//\n\t\t\t\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n\t\t\t\t\t// that's why we need to check if the returned style object is non-empty\n\t\t\t\t\tvar currStyle = jsc.getStyle(elm);\n\t\t\t\t\tif (currStyle && currStyle.position.toLowerCase() === 'fixed') {\n\t\t\t\t\t\tthis.fixed = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elm !== this.targetElement) {\n\t\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\n\t\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\n\t\t\t\t\t\t// that's why we loop through all parent nodes\n\t\t\t\t\t\tif (!elm._jscEventsAttached) {\n\t\t\t\t\t\t\tjsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\n\t\t\t\t\t\t\telm._jscEventsAttached = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} while ((elm = elm.parentNode) && !jsc.isElementType(elm, 'body'));\n\t\t\t};\n\n\n\t\t\t// r: 0-255\n\t\t\t// g: 0-255\n\t\t\t// b: 0-255\n\t\t\t//\n\t\t\t// returns: [ 0-360, 0-100, 0-100 ]\n\t\t\t//\n\t\t\tfunction RGB_HSV (r, g, b) {\n\t\t\t\tr /= 255;\n\t\t\t\tg /= 255;\n\t\t\t\tb /= 255;\n\t\t\t\tvar n = Math.min(Math.min(r,g),b);\n\t\t\t\tvar v = Math.max(Math.max(r,g),b);\n\t\t\t\tvar m = v - n;\n\t\t\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\n\t\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\n\t\t\t\treturn [\n\t\t\t\t\t60 * (h===6?0:h),\n\t\t\t\t\t100 * (m/v),\n\t\t\t\t\t100 * v\n\t\t\t\t];\n\t\t\t}\n\n\n\t\t\t// h: 0-360\n\t\t\t// s: 0-100\n\t\t\t// v: 0-100\n\t\t\t//\n\t\t\t// returns: [ 0-255, 0-255, 0-255 ]\n\t\t\t//\n\t\t\tfunction HSV_RGB (h, s, v) {\n\t\t\t\tvar u = 255 * (v / 100);\n\n\t\t\t\tif (h === null) {\n\t\t\t\t\treturn [ u, u, u ];\n\t\t\t\t}\n\n\t\t\t\th /= 60;\n\t\t\t\ts /= 100;\n\n\t\t\t\tvar i = Math.floor(h);\n\t\t\t\tvar f = i%2 ? h-i : 1-(h-i);\n\t\t\t\tvar m = u * (1 - s);\n\t\t\t\tvar n = u * (1 - s * f);\n\t\t\t\tswitch (i) {\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 0: return [u,n,m];\n\t\t\t\t\tcase 1: return [n,u,m];\n\t\t\t\t\tcase 2: return [m,u,n];\n\t\t\t\t\tcase 3: return [m,n,u];\n\t\t\t\t\tcase 4: return [n,m,u];\n\t\t\t\t\tcase 5: return [u,m,n];\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tfunction detachPicker () {\n\t\t\t\tjsc.unsetClass(THIS.targetElement, THIS.activeClass);\n\t\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\n\t\t\t\tdelete jsc.picker.owner;\n\t\t\t}\n\n\n\t\t\tfunction drawPicker () {\n\n\t\t\t\t// At this point, when drawing the picker, we know what the parent elements are\n\t\t\t\t// and we can do all related DOM operations, such as registering events on them\n\t\t\t\t// or checking their positioning\n\t\t\t\tTHIS._processParentElementsInDOM();\n\n\t\t\t\tif (!jsc.picker) {\n\t\t\t\t\tjsc.picker = {\n\t\t\t\t\t\towner: null,\n\t\t\t\t\t\twrap : document.createElement('div'),\n\t\t\t\t\t\tbox : document.createElement('div'),\n\t\t\t\t\t\tboxS : document.createElement('div'), // shadow area\n\t\t\t\t\t\tboxB : document.createElement('div'), // border\n\t\t\t\t\t\tpad : document.createElement('div'),\n\t\t\t\t\t\tpadB : document.createElement('div'), // border\n\t\t\t\t\t\tpadM : document.createElement('div'), // mouse/touch area\n\t\t\t\t\t\tpadPal : jsc.createPalette(),\n\t\t\t\t\t\tcross : document.createElement('div'),\n\t\t\t\t\t\tcrossBY : document.createElement('div'), // border Y\n\t\t\t\t\t\tcrossBX : document.createElement('div'), // border X\n\t\t\t\t\t\tcrossLY : document.createElement('div'), // line Y\n\t\t\t\t\t\tcrossLX : document.createElement('div'), // line X\n\t\t\t\t\t\tsld : document.createElement('div'),\n\t\t\t\t\t\tsldB : document.createElement('div'), // border\n\t\t\t\t\t\tsldM : document.createElement('div'), // mouse/touch area\n\t\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\n\t\t\t\t\t\tsldPtrS : document.createElement('div'), // slider pointer spacer\n\t\t\t\t\t\tsldPtrIB : document.createElement('div'), // slider pointer inner border\n\t\t\t\t\t\tsldPtrMB : document.createElement('div'), // slider pointer middle border\n\t\t\t\t\t\tsldPtrOB : document.createElement('div'), // slider pointer outer border\n\t\t\t\t\t\tbtn : document.createElement('div'),\n\t\t\t\t\t\tbtnT : document.createElement('span') // text\n\t\t\t\t\t};\n\n\t\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padPal.elm);\n\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\n\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\n\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\n\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\n\t\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\n\t\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\n\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\n\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\n\n\t\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\n\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\n\t\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\n\t\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\n\t\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\n\t\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\n\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\n\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\n\n\t\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\n\t\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\n\n\t\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\n\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\n\t\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\n\t\t\t\t}\n\n\t\t\t\tvar p = jsc.picker;\n\n\t\t\t\tvar displaySlider = !!jsc.getSliderComponent(THIS);\n\t\t\t\tvar dims = jsc.getPickerDims(THIS);\n\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\t\tvar padToSliderPadding = jsc.getPadToSliderPadding(THIS);\n\t\t\t\tvar borderRadius = Math.min(\n\t\t\t\t\tTHIS.borderRadius,\n\t\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\n\t\t\t\tvar padCursor = 'crosshair';\n\n\t\t\t\t// wrap\n\t\t\t\tp.wrap.style.clear = 'both';\n\t\t\t\tp.wrap.style.width = (dims[0] + 2 * THIS.borderWidth) + 'px';\n\t\t\t\tp.wrap.style.height = (dims[1] + 2 * THIS.borderWidth) + 'px';\n\t\t\t\tp.wrap.style.zIndex = THIS.zIndex;\n\n\t\t\t\t// picker\n\t\t\t\tp.box.style.width = dims[0] + 'px';\n\t\t\t\tp.box.style.height = dims[1] + 'px';\n\n\t\t\t\tp.boxS.style.position = 'absolute';\n\t\t\t\tp.boxS.style.left = '0';\n\t\t\t\tp.boxS.style.top = '0';\n\t\t\t\tp.boxS.style.width = '100%';\n\t\t\t\tp.boxS.style.height = '100%';\n\t\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\n\n\t\t\t\t// picker border\n\t\t\t\tp.boxB.style.position = 'relative';\n\t\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\n\t\t\t\tp.boxB.style.borderColor = THIS.borderColor;\n\t\t\t\tp.boxB.style.background = THIS.backgroundColor;\n\t\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\n\n\t\t\t\t// IE hack:\n\t\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\n\t\t\t\t// e.g. on Canvas or on elements with border\n\t\t\t\tp.padM.style.background =\n\t\t\t\t\tp.sldM.style.background =\n\t\t\t\t\t\t'#FFF';\n\t\t\t\tjsc.setStyle(p.padM, 'opacity', '0');\n\t\t\t\tjsc.setStyle(p.sldM, 'opacity', '0');\n\n\t\t\t\t// pad\n\t\t\t\tp.pad.style.position = 'relative';\n\t\t\t\tp.pad.style.width = THIS.width + 'px';\n\t\t\t\tp.pad.style.height = THIS.height + 'px';\n\n\t\t\t\t// pad palettes (HSV and HVS)\n\t\t\t\tp.padPal.draw(THIS.width, THIS.height, jsc.getPadYComponent(THIS));\n\n\t\t\t\t// pad border\n\t\t\t\tp.padB.style.position = 'absolute';\n\t\t\t\tp.padB.style.left = THIS.padding + 'px';\n\t\t\t\tp.padB.style.top = THIS.padding + 'px';\n\t\t\t\tp.padB.style.border = THIS.insetWidth + 'px solid';\n\t\t\t\tp.padB.style.borderColor = THIS.insetColor;\n\n\t\t\t\t// pad mouse area\n\t\t\t\tp.padM._jscInstance = THIS;\n\t\t\t\tp.padM._jscControlName = 'pad';\n\t\t\t\tp.padM.style.position = 'absolute';\n\t\t\t\tp.padM.style.left = '0';\n\t\t\t\tp.padM.style.top = '0';\n\t\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.insetWidth + THIS.width + padToSliderPadding / 2) + 'px';\n\t\t\t\tp.padM.style.height = dims[1] + 'px';\n\t\t\t\tp.padM.style.cursor = padCursor;\n\n\t\t\t\t// pad cross\n\t\t\t\tp.cross.style.position = 'absolute';\n\t\t\t\tp.cross.style.left =\n\t\t\t\t\tp.cross.style.top =\n\t\t\t\t\t\t'0';\n\t\t\t\tp.cross.style.width =\n\t\t\t\t\tp.cross.style.height =\n\t\t\t\t\t\tcrossOuterSize + 'px';\n\n\t\t\t\t// pad cross border Y and X\n\t\t\t\tp.crossBY.style.position =\n\t\t\t\t\tp.crossBX.style.position =\n\t\t\t\t\t\t'absolute';\n\t\t\t\tp.crossBY.style.background =\n\t\t\t\t\tp.crossBX.style.background =\n\t\t\t\t\t\tTHIS.pointerBorderColor;\n\t\t\t\tp.crossBY.style.width =\n\t\t\t\t\tp.crossBX.style.height =\n\t\t\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\t\tp.crossBY.style.height =\n\t\t\t\t\tp.crossBX.style.width =\n\t\t\t\t\t\tcrossOuterSize + 'px';\n\t\t\t\tp.crossBY.style.left =\n\t\t\t\t\tp.crossBX.style.top =\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\n\t\t\t\tp.crossBY.style.top =\n\t\t\t\t\tp.crossBX.style.left =\n\t\t\t\t\t\t'0';\n\n\t\t\t\t// pad cross line Y and X\n\t\t\t\tp.crossLY.style.position =\n\t\t\t\t\tp.crossLX.style.position =\n\t\t\t\t\t\t'absolute';\n\t\t\t\tp.crossLY.style.background =\n\t\t\t\t\tp.crossLX.style.background =\n\t\t\t\t\t\tTHIS.pointerColor;\n\t\t\t\tp.crossLY.style.height =\n\t\t\t\t\tp.crossLX.style.width =\n\t\t\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\n\t\t\t\tp.crossLY.style.width =\n\t\t\t\t\tp.crossLX.style.height =\n\t\t\t\t\t\tTHIS.pointerThickness + 'px';\n\t\t\t\tp.crossLY.style.left =\n\t\t\t\t\tp.crossLX.style.top =\n\t\t\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\n\t\t\t\tp.crossLY.style.top =\n\t\t\t\t\tp.crossLX.style.left =\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px';\n\n\t\t\t\t// slider\n\t\t\t\tp.sld.style.overflow = 'hidden';\n\t\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\n\t\t\t\tp.sld.style.height = THIS.height + 'px';\n\n\t\t\t\t// slider gradient\n\t\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\n\n\t\t\t\t// slider border\n\t\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\n\t\t\t\tp.sldB.style.position = 'absolute';\n\t\t\t\tp.sldB.style.right = THIS.padding + 'px';\n\t\t\t\tp.sldB.style.top = THIS.padding + 'px';\n\t\t\t\tp.sldB.style.border = THIS.insetWidth + 'px solid';\n\t\t\t\tp.sldB.style.borderColor = THIS.insetColor;\n\n\t\t\t\t// slider mouse area\n\t\t\t\tp.sldM._jscInstance = THIS;\n\t\t\t\tp.sldM._jscControlName = 'sld';\n\t\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\n\t\t\t\tp.sldM.style.position = 'absolute';\n\t\t\t\tp.sldM.style.right = '0';\n\t\t\t\tp.sldM.style.top = '0';\n\t\t\t\tp.sldM.style.width = (THIS.sliderSize + padToSliderPadding / 2 + THIS.padding + 2 * THIS.insetWidth) + 'px';\n\t\t\t\tp.sldM.style.height = dims[1] + 'px';\n\t\t\t\tp.sldM.style.cursor = 'default';\n\n\t\t\t\t// slider pointer inner and outer border\n\t\t\t\tp.sldPtrIB.style.border =\n\t\t\t\t\tp.sldPtrOB.style.border =\n\t\t\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\n\n\t\t\t\t// slider pointer outer border\n\t\t\t\tp.sldPtrOB.style.position = 'absolute';\n\t\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\t\tp.sldPtrOB.style.top = '0';\n\n\t\t\t\t// slider pointer middle border\n\t\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\n\n\t\t\t\t// slider pointer spacer\n\t\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\n\t\t\t\tp.sldPtrS.style.height = sliderPtrSpace + 'px';\n\n\t\t\t\t// the Close button\n\t\t\t\tfunction setBtnBorder () {\n\t\t\t\t\tvar insetColors = THIS.insetColor.split(/\\s+/);\n\t\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n\t\t\t\t\tp.btn.style.borderColor = outsetColor;\n\t\t\t\t}\n\t\t\t\tp.btn.style.display = THIS.closable ? 'block' : 'none';\n\t\t\t\tp.btn.style.position = 'absolute';\n\t\t\t\tp.btn.style.left = THIS.padding + 'px';\n\t\t\t\tp.btn.style.bottom = THIS.padding + 'px';\n\t\t\t\tp.btn.style.padding = '0 15px';\n\t\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\n\t\t\t\tp.btn.style.border = THIS.insetWidth + 'px solid';\n\t\t\t\tsetBtnBorder();\n\t\t\t\tp.btn.style.color = THIS.buttonColor;\n\t\t\t\tp.btn.style.font = '12px sans-serif';\n\t\t\t\tp.btn.style.textAlign = 'center';\n\t\t\t\ttry {\n\t\t\t\t\tp.btn.style.cursor = 'pointer';\n\t\t\t\t} catch(eOldIE) {\n\t\t\t\t\tp.btn.style.cursor = 'hand';\n\t\t\t\t}\n\t\t\t\tp.btn.onmousedown = function () {\n\t\t\t\t\tTHIS.hide();\n\t\t\t\t};\n\t\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\n\t\t\t\tp.btnT.innerHTML = '';\n\t\t\t\tp.btnT.appendChild(document.createTextNode(THIS.closeText));\n\n\t\t\t\t// place pointers\n\t\t\t\tredrawPad();\n\t\t\t\tredrawSld();\n\n\t\t\t\t// If we are changing the owner without first closing the picker,\n\t\t\t\t// make sure to first deal with the old owner\n\t\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\n\t\t\t\t\tjsc.unsetClass(jsc.picker.owner.targetElement, THIS.activeClass);\n\t\t\t\t}\n\n\t\t\t\t// Set the new picker owner\n\t\t\t\tjsc.picker.owner = THIS;\n\n\t\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\n\t\t\t\t// after setting the owner\n\t\t\t\tif (jsc.isElementType(container, 'body')) {\n\t\t\t\t\tjsc.redrawPosition();\n\t\t\t\t} else {\n\t\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\n\t\t\t\t}\n\n\t\t\t\tif (p.wrap.parentNode != container) {\n\t\t\t\t\tcontainer.appendChild(p.wrap);\n\t\t\t\t}\n\n\t\t\t\tjsc.setClass(THIS.targetElement, THIS.activeClass);\n\t\t\t}\n\n\n\t\t\tfunction redrawPad () {\n\t\t\t\t// redraw the pad pointer\n\t\t\t\tswitch (jsc.getPadYComponent(THIS)) {\n\t\t\t\t\tcase 's': var yComponent = 1; break;\n\t\t\t\t\tcase 'v': var yComponent = 2; break;\n\t\t\t\t}\n\t\t\t\tvar x = Math.round((THIS.hsv[0] / 360) * (THIS.width - 1));\n\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\n\t\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\n\t\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\n\t\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\n\n\t\t\t\t// redraw the slider\n\t\t\t\tswitch (jsc.getSliderComponent(THIS)) {\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tvar rgb1 = HSV_RGB(THIS.hsv[0], 100, THIS.hsv[2]);\n\t\t\t\t\t\tvar rgb2 = HSV_RGB(THIS.hsv[0], 0, THIS.hsv[2]);\n\t\t\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\t\t\tMath.round(rgb1[0]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb1[1]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb1[2]) + ')';\n\t\t\t\t\t\tvar color2 = 'rgb(' +\n\t\t\t\t\t\t\tMath.round(rgb2[0]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb2[1]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb2[2]) + ')';\n\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 100);\n\t\t\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\t\t\tMath.round(rgb[0]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb[1]) + ',' +\n\t\t\t\t\t\t\tMath.round(rgb[2]) + ')';\n\t\t\t\t\t\tvar color2 = '#000';\n\t\t\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tfunction redrawSld () {\n\t\t\t\tvar sldComponent = jsc.getSliderComponent(THIS);\n\t\t\t\tif (sldComponent) {\n\t\t\t\t\t// redraw the slider pointer\n\t\t\t\t\tswitch (sldComponent) {\n\t\t\t\t\t\tcase 's': var yComponent = 1; break;\n\t\t\t\t\t\tcase 'v': var yComponent = 2; break;\n\t\t\t\t\t}\n\t\t\t\t\tvar y = Math.round((1 - THIS.hsv[yComponent] / 100) * (THIS.height - 1));\n\t\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(sliderPtrSpace / 2)) + 'px';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tfunction isPickerOwner () {\n\t\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\n\t\t\t}\n\n\n\t\t\tfunction blurValue () {\n\t\t\t\tTHIS.importColor();\n\t\t\t}\n\n\n\t\t\t// Find the target element\n\t\t\tif (typeof targetElement === 'string') {\n\t\t\t\tvar id = targetElement;\n\t\t\t\tvar elm = document.getElementById(id);\n\t\t\t\tif (elm) {\n\t\t\t\t\tthis.targetElement = elm;\n\t\t\t\t} else {\n\t\t\t\t\tjsc.warn('Could not find target element with ID \\'' + id + '\\'');\n\t\t\t\t}\n\t\t\t} else if (targetElement) {\n\t\t\t\tthis.targetElement = targetElement;\n\t\t\t} else {\n\t\t\t\tjsc.warn('Invalid target element: \\'' + targetElement + '\\'');\n\t\t\t}\n\n\t\t\tif (this.targetElement._jscLinkedInstance) {\n\t\t\t\tjsc.warn('Cannot link jscolor twice to the same element. Skipping.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.targetElement._jscLinkedInstance = this;\n\n\t\t\t// Find the value element\n\t\t\tthis.valueElement = jsc.fetchElement(this.valueElement);\n\t\t\t// Find the style element\n\t\t\tthis.styleElement = jsc.fetchElement(this.styleElement);\n\n\t\t\tvar THIS = this;\n\t\t\tvar container =\n\t\t\t\tthis.container ?\n\t\t\t\t\tjsc.fetchElement(this.container) :\n\t\t\t\t\tdocument.getElementsByTagName('body')[0];\n\t\t\tvar sliderPtrSpace = 3; // px\n\n\t\t\t// For BUTTON elements it's important to stop them from sending the form when clicked\n\t\t\t// (e.g. in Safari)\n\t\t\tif (jsc.isElementType(this.targetElement, 'button')) {\n\t\t\t\tif (this.targetElement.onclick) {\n\t\t\t\t\tvar origCallback = this.targetElement.onclick;\n\t\t\t\t\tthis.targetElement.onclick = function (evt) {\n\t\t\t\t\t\torigCallback.call(this, evt);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.targetElement.onclick = function () { return false; };\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*\n\t\t\t var elm = this.targetElement;\n\t\t\t do {\n\t\t\t // If the target element or one of its offsetParents has fixed position,\n\t\t\t // then use fixed positioning instead\n\t\t\t //\n\t\t\t // Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n\t\t\t // that's why we need to check if the returned style object is non-empty\n\t\t\t var currStyle = jsc.getStyle(elm);\n\t\t\t if (currStyle && currStyle.position.toLowerCase() === 'fixed') {\n\t\t\t this.fixed = true;\n\t\t\t }\n\n\t\t\t if (elm !== this.targetElement) {\n\t\t\t // attach onParentScroll so that we can recompute the picker position\n\t\t\t // when one of the offsetParents is scrolled\n\t\t\t if (!elm._jscEventsAttached) {\n\t\t\t jsc.attachEvent(elm, 'scroll', jsc.onParentScroll);\n\t\t\t elm._jscEventsAttached = true;\n\t\t\t }\n\t\t\t }\n\t\t\t } while ((elm = elm.offsetParent) && !jsc.isElementType(elm, 'body'));\n\t\t\t */\n\n\t\t\t// valueElement\n\t\t\tif (this.valueElement) {\n\t\t\t\tif (jsc.isElementType(this.valueElement, 'input')) {\n\t\t\t\t\tvar updateField = function () {\n\t\t\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.leaveValue);\n\t\t\t\t\t\tjsc.dispatchFineChange(THIS);\n\t\t\t\t\t};\n\t\t\t\t\tjsc.attachEvent(this.valueElement, 'keyup', updateField);\n\t\t\t\t\tjsc.attachEvent(this.valueElement, 'input', updateField);\n\t\t\t\t\tjsc.attachEvent(this.valueElement, 'blur', blurValue);\n\t\t\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// styleElement\n\t\t\tif (this.styleElement) {\n\t\t\t\tthis.styleElement._jscOrigStyle = {\n\t\t\t\t\tbackgroundImage : this.styleElement.style.backgroundImage,\n\t\t\t\t\tbackgroundColor : this.styleElement.style.backgroundColor,\n\t\t\t\t\tcolor : this.styleElement.style.color\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this.value) {\n\t\t\t\t// Try to set the color from the .value option and if unsuccessful,\n\t\t\t\t// export the current color\n\t\t\t\tthis.fromString(this.value) || this.exportColor();\n\t\t\t} else {\n\t\t\t\tthis.importColor();\n\t\t\t}\n\t\t}\n\n\t};\n\n\n//================================\n// Public properties and methods\n//================================\n\n\n// By default, search for all elements with class=\"jscolor\" and install a color picker on them.\n//\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\n//\n\tjsc.jscolor.lookupClass = 'jscolor';\n\n\n\tjsc.jscolor.installByClassName = function (className) {\n\t\tvar inputElms = document.getElementsByTagName('input');\n\t\tvar buttonElms = document.getElementsByTagName('button');\n\n\t\tjsc.tryInstallOnElements(inputElms, className);\n\t\tjsc.tryInstallOnElements(buttonElms, className);\n\t};\n\n\n\tjsc.register();\n\n\n\treturn jsc.jscolor;\n\n\n})(); }","Wee.view.addView({\"customize.suggestions\":\"{{#suggestions|notEmpty}}<ul class=\\\"suggestions\\\" data-ref=\\\"suggestions\\\">{{#.|each}}<li class=\\\"suggestion\\\">{{name}}{{#color}}<div class=\\\"suggestion__swatch\\\" style=\\\"background: {{.}}\\\">{{/color}}</li>{{/.}}</ul>{{/suggestions}}\"});","/* global jscolor */\n\nWee.fn.make('customize', {\n\tinit: function() {\n\t\tvar priv = this.$private;\n\t\tpriv.preview = $('ref:previewFrame')[0].contentWindow;\n\t\tpriv.$variables = $('ref:variables');\n\t\tpriv.$colors = $('.color');\n\n\t\tWee.sidebar.initScrolling();\n\n\t\tpriv.initAccordion();\n\t\tpriv.initGenerate();\n\t\tpriv.getColors();\n\t\tpriv.bindSelects();\n\t\tpriv.initSuggestions();\n\n\t\tpriv.preview.onload = function() {\n\t\t\tpriv.setupPickers();\n\n\t\t\tpriv.preview.less.pageLoadFinished.then(function() {\n\t\t\t\t$('ref:preview').removeClass('-is-loading');\n\t\t\t});\n\t\t};\n\t}\n}, {\n\tinitAccordion: function() {\n\t\tvar scope = this,\n\t\t\tactiveClass = '-is-active';\n\n\t\t$('ref:toggle').on('click', function() {\n\t\t\tvar $el = $(this),\n\t\t\t\tscroll = Wee.sidebar.topScroller,\n\t\t\t\tactive = $el.hasClass(activeClass),\n\t\t\t\ttop = $el.position().top;\n\n\t\t\t$el.next().toggle();\n\n\t\t\tif (! active) {\n\t\t\t\t$el.addClass(activeClass);\n\t\t\t} else {\n\t\t\t\t$el.removeClass(activeClass);\n\t\t\t\ttop = Math.min(top, scope.$variables.height() - scroll.viewportSize);\n\t\t\t}\n\n\t\t\tscope.$variables.tween({\n\t\t\t\ttop: top * -1\n\t\t\t});\n\n\t\t\tscroll.update(top);\n\t\t});\n\t},\n\n\tinitGenerate: function() {\n\t\tvar scope = this,\n\t\t\t$button = $('ref:showCode'),\n\t\t\t$preview = $('ref:preview'),\n\t\t\t$output = $('ref:output');\n\n\t\t$button.on('click', function() {\n\t\t\tif (scope.codeVisible) {\n\t\t\t\tscope.codeVisible = false;\n\n\t\t\t\t$output.hide();\n\t\t\t\t$preview.show();\n\t\t\t\t$button.text('Generate Variables');\n\t\t\t} else {\n\t\t\t\tWee.data.request({\n\t\t\t\t\turl: '/assets/less/template.less',\n\t\t\t\t\tcache: true,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tvar temp = $.view.render(data, scope.preview.weeVariables);\n\t\t\t\t\t\tscope.codeVisible = true;\n\n\t\t\t\t\t\t$preview.hide();\n\t\t\t\t\t\t$output.html('<pre><code>' + temp + '</code></pre>')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\tWee.code.init();\n\t\t\t\t\t\t$button.text('Hide Variables');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tgetColors: function() {\n\t\tthis.colorValues = this.$colors.map(function(el) {\n\t\t\treturn el.getAttribute('name');\n\t\t});\n\t},\n\n\tbindSelects: function() {\n\t\tvar scope = this;\n\n\t\tscope.$variables.find('select').on('change', function(e, el) {\n\t\t\tscope.process(el);\n\t\t});\n\t},\n\n\tinitSuggestions: function() {\n\t\tvar scope = this;\n\n\t\tscope.$variables.find('input').on({\n\t\t\tkeydown: function(e, el) {\n\t\t\t\tif (scope.pickers.hasOwnProperty(el.id)) {\n\t\t\t\t\tscope.pickers[el.id].hide();\n\t\t\t\t}\n\n\t\t\t\tif (e.keyCode === 40 || e.keyCode === 38) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeyup: function(e, el) {\n\t\t\t\tscope.suggest(e.keyCode, el);\n\t\t\t\te.preventDefault();\n\t\t\t},\n\t\t\tblur: function(e, el) {\n\t\t\t\tif (scope.pickers.hasOwnProperty(el.id)) {\n\t\t\t\t\tscope.pickers[el.id].hide();\n\t\t\t\t}\n\n\t\t\t\tscope.process(el);\n\t\t\t\tscope.hideResults();\n\t\t\t},\n\t\t\t'click focus': function() {\n\t\t\t\tscope.hideResults();\n\t\t\t}\n\t\t});\n\t},\n\n\tsuggest: function(key, el) {\n\t\tvar scope = this,\n\t\t\tactiveClass = '-is-active';\n\n\t\tif (scope.$active) {\n\t\t\tscope.$active.removeClass(activeClass);\n\t\t}\n\n\t\tif (key === 38 || key === 40) {\n\t\t\tif (scope.$active) {\n\t\t\t\tscope.$active = key === 40 ?\n\t\t\t\t\tscope.$active.next() :\n\t\t\t\t\tscope.$active.prev();\n\t\t\t} else {\n\t\t\t\tscope.$entries = $('ref:suggestions').children();\n\n\t\t\t\tif (scope.$entries.length) {\n\t\t\t\t\tscope.$active = key === 40 ?\n\t\t\t\t\t\tscope.$entries.first() :\n\t\t\t\t\t\tscope.$entries.last();\n\t\t\t\t} else {\n\t\t\t\t\tscope.$active = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (scope.$active.length) {\n\t\t\t\tscope.$active.addClass(activeClass);\n\t\t\t} else {\n\t\t\t\tscope.$active = false;\n\t\t\t}\n\t\t} else if (key === 13) {\n\t\t\tif (scope.$active) {\n\t\t\t\tel.value = scope.$active.text();\n\t\t\t}\n\n\t\t\tel.blur();\n\t\t} else if (key === 27) {\n\t\t\tscope.hideResults();\n\t\t} else if (el.value.length) {\n\t\t\tscope.showResults(el);\n\t\t}\n\t},\n\n\tshowResults: function(el) {\n\t\tvar view = $.view.render('customize.suggestions', {\n\t\t\tsuggestions: this.getMatches(el)\n\t\t});\n\n\t\t$('ref:suggestions').remove();\n\t\t$(el).after(view);\n\n\t\tthis.suggestions = true;\n\t},\n\n\tgetMatches: function(el) {\n\t\tvar scope = this,\n\t\t\tval = el.value,\n\t\t\tisColor = scope.pickers.hasOwnProperty(el.id),\n\t\t\tmatches = Object.keys(scope.preview.weeVariables).filter(function(el) {\n\t\t\t\tvar color = scope.pickers.hasOwnProperty(el.substr(1));\n\n\t\t\t\treturn el.indexOf(val) > -1 &&\n\t\t\t\t\t((isColor && color) || (! isColor && ! color));\n\t\t\t}).slice(0, 8);\n\n\t\treturn matches.map(function(el) {\n\t\t\tvar result = {\n\t\t\t\tname: el\n\t\t\t};\n\n\t\t\tif (isColor) {\n\t\t\t\tresult.color = scope.pickers[el.substr(1)]\n\t\t\t\t\t.toHEXString()\n\t\t\t\t\t.toLowerCase();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t},\n\n\thideResults: function() {\n\t\tthis.suggestions = false;\n\t\tthis.$active = false;\n\n\t\t$('ref:suggestions').remove();\n\t},\n\n\tsetupPickers: function() {\n\t\tvar scope = this;\n\t\tscope.pickers = [];\n\n\t\tscope.$colors.each(function(el) {\n\t\t\tvar color = scope.parseValue(el.value).response,\n\t\t\t\tpicker = new jscolor(el, {\n\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t\tinsetColor: '#fff',\n\t\t\t\t\tpadding: 15,\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tuppercase: false,\n\t\t\t\t\tvalueElement: null,\n\t\t\t\t\twidth: 225,\n\t\t\t\t\tonFineChange: function() {\n\t\t\t\t\t\tvar val = this.toHEXString().toLowerCase();\n\n\t\t\t\t\t\tel.value = val;\n\t\t\t\t\t\tscope.processColor(el, val);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tscope.pickers[el.id] = picker;\n\n\t\t\tel.setAttribute('data-prev', el.value);\n\t\t\tel.setAttribute('data-value', color);\n\n\t\t\tpicker.fromString(color);\n\t\t});\n\t},\n\n\tprocess: function(el) {\n\t\tvar scope = this,\n\t\t\tval = el.value.trim(),\n\t\t\terror;\n\n\t\tif (el.name.indexOf(val) > -1) {\n\t\t\terror = 'Recursive variable definition for ' + el.name;\n\t\t} else {\n\t\t\tvar validate = scope.validate(el);\n\n\t\t\tif (! validate.valid) {\n\t\t\t\terror = 'Validation error: ' + validate.response;\n\t\t\t} else {\n\t\t\t\tif (scope.colorValues.indexOf(el.name) > -1) {\n\t\t\t\t\tvar parse = scope.parseValue(val),\n\t\t\t\t\t\tresp = parse.response;\n\n\t\t\t\t\tif (! parse.valid) {\n\t\t\t\t\t\terror = resp;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (resp[0] !== '#') {\n\t\t\t\t\t\t\tresp = this.preview.less.data.colors[resp];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.processColor(el, resp);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar values = [];\n\t\t\t\t\tvalues[el.name] = val;\n\n\t\t\t\t\tscope.preview.update(values);\n\t\t\t\t\tel.setAttribute('data-value', val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (error) {\n\t\t\tscope.showMessage(error);\n\t\t\tel.value = el.getAttribute('data-prev') || el.defaultValue;\n\t\t} else {\n\t\t\tel.setAttribute('data-prev', val);\n\t\t}\n\t},\n\n\tparseValue: function(val) {\n\t\tvar vars = this.preview.less.Parser.serializeVars(\n\t\t\t\tthis.preview.weeVariables\n\t\t\t),\n\t\t\tcss = vars + '#foo { value: ' + val + '; }',\n\t\t\tresult = {};\n\n\t\tthis.preview.less.render(css, function(err, output) {\n\t\t\tresult = err ? {\n\t\t\t\tvalid: false,\n\t\t\t\tresponse: err.message\n\t\t\t} : {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: output.css.match(/(?:: )(.*)(?=;)/)[1]\n\t\t\t};\n\t\t});\n\n\t\treturn result;\n\t},\n\n\tprocessColor: function(el, val) {\n\t\tvar scope = this,\n\t\t\tvalues = [];\n\n\t\tif (! val) {\n\t\t\tval = false;\n\t\t}\n\n\t\tscope.pickers[el.id].fromString(val || '#fff');\n\t\tel.setAttribute('data-value', val);\n\n\t\tvalues[el.name] = val;\n\n\t\tscope.processDependencies(el.name, el.value, val, values);\n\t\tscope.preview.update(values);\n\t},\n\n\tprocessDependencies: function(name, value, val, values) {\n\t\tvar scope = this;\n\n\t\tscope.$colors.each(function(el) {\n\t\t\tif (el.value.indexOf(name) > -1) {\n\t\t\t\tvalues[el.name] = val;\n\t\t\t\tscope.pickers[el.id].fromString(val);\n\t\t\t\tel.setAttribute('data-prev', value);\n\t\t\t\tscope.processDependencies(el.name, value, val, values);\n\t\t\t}\n\t\t});\n\t},\n\n\trules: {\n\t\tauto: function(val) {\n\t\t\treturn val.toLowerCase() === 'auto';\n\t\t},\n\t\tcolor: function(val) {\n\t\t\treturn /(^#[0-9a-f]{3,6}$)/i.test(val) ||\n\t\t\t\tthis.preview.less.data.colors.hasOwnProperty(val);\n\t\t},\n\t\tentity: function(val) {\n\t\t\treturn /(^'(\\\\[0-9a-f]{4})+'$)/i.test(val);\n\t\t},\n\t\tfalse: function(val) {\n\t\t\treturn val.toLowerCase() === 'false';\n\t\t},\n\t\tfile: function(val) {\n\t\t\treturn /(^'([\\w-]+\\.[\\w]+)'$)/.test(val);\n\t\t},\n\t\tfont: function(val) {\n\t\t\tvar match = /(^\"[\\da-z]((-|_| )?[\\da-z]+)*\"$)|(^[\\da-z]((-|_)?[\\da-z]+)*$)/i;\n\n\t\t\treturn val.split(',').every(function(value) {\n\t\t\t\treturn match.test(value.trim());\n\t\t\t});\n\t\t},\n\t\tnumber: function(val) {\n\t\t\treturn /(^[1-9][0-9]*$)/.test(val);\n\t\t},\n\t\tpath: function(val) {\n\t\t\treturn /(^'(\\.\\.\\/)*([\\w]+\\/)*'$)/.test(val);\n\t\t},\n\t\tunit: function(val) {\n\t\t\treturn /(^((\\.\\d+)|(\\d+(\\.\\d+)?)(%|px|em|rem)?)$)/.test(val);\n\t\t}\n\t},\n\n\tvalidate: function(el) {\n\t\tvar val = el.value,\n\t\t\ttypes = el.getAttribute('data-validate'),\n\t\t\tresult = {\n\t\t\t\tvalid: true\n\t\t\t};\n\n\t\tif (val.indexOf('@') > -1 || val.indexOf('(') > -1) {\n\t\t\tval = this.parseValue(val).response;\n\t\t}\n\n\t\tif (types) {\n\t\t\tvar arr = types.split('|');\n\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tvar type = arr[i];\n\n\t\t\t\tif (this.rules[type].call(this, val)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalid: true,\n\t\t\t\t\t\tresponse: val\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tvalid: false,\n\t\t\t\t\t\tresponse: 'Value must match type ' + arr.join(' or ')\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tshowMessage: function(message) {\n\t\tvar $bar = $('ref:messageBar'),\n\t\t\tactiveClass = '-is-active';\n\n\t\t$bar.text(message)\n\t\t\t.addClass(activeClass);\n\n\t\tsetTimeout(function() {\n\t\t\t$bar.removeClass(activeClass);\n\t\t}, 3500);\n\t}\n});"]}