{"version":3,"sources":["../../../../source/modules/customize/core/js/jscolor.js","../../../../source/modules/customize/core/js/script.js"],"names":["jscolor","dir","bindClass","binding","preloading","install","addEvent","window","init","bind","preload","getDir","detected","detectDir","base","location","href","e","document","getElementsByTagName","i","length","src","test","URI","srcAbs","toAbsolute","path","replace","query","fragment","toString","matchClass","RegExp","m","color","className","match","prop","Function","eInvalidProp","fn","imgRequire","hasOwnProperty","loadImage","images","pad","sld","cross","arrow","imgLoaded","requireImage","filename","Image","fetchElement","mixed","getElementById","el","evnt","func","addEventListener","attachEvent","fireEvent","createEvent","ev","initEvent","dispatchEvent","createEventObject","getElementPos","e1","e2","x","y","offsetParent","offsetLeft","offsetTop","parentNode","nodeName","toUpperCase","scrollLeft","scrollTop","getElementSize","offsetWidth","offsetHeight","getRelMousePos","event","offsetX","offsetY","layerX","layerY","getViewPos","pageYOffset","pageXOffset","body","documentElement","getViewSize","innerWidth","innerHeight","clientWidth","clientHeight","uri","removeDotSegments","out","substr","rm","this","scheme","authority","parse","result","r","t","toLowerCase","target","RGB_HSV","g","b","n","Math","min","v","max","h","HSV_RGB","s","floor","f","removePicker","picker","owner","removeChild","boxB","drawPicker","setBtnBorder","insetColors","THIS","pickerInsetColor","split","pickerOutsetColor","p","btn","style","borderColor","box","createElement","padB","padM","sldB","sldM","btnS","btnT","createTextNode","pickerCloseText","segSize","seg","height","fontSize","lineHeight","appendChild","onmouseup","onmouseout","focus","onmousedown","abortBlur","onmousemove","holdPad","holdSld","setPad","setSld","selection","empty","getSelection","removeAllRanges","dispatchImmediateChange","handle_touchmove","touches","pageX","touchOffset","X","pageY","Y","stopPropagation","preventDefault","removeEventListener","valueElement","modeID","hsv","fromHSV","dims","getPickerDims","width","position","clear","left","top","zIndex","pickerZIndex","border","pickerBorder","pickerBorderColor","background","pickerFaceColor","pickerFace","pickerInset","cursor","overflow","display","slider","right","eOldIE","pickerClosable","bottom","padding","font","textAlign","hidePicker","padImg","backgroundImage","backgroundRepeat","backgroundPosition","redrawPad","redrawSld","o","pickerButtonHeight","yComponent","round","childNodes","rgb","backgroundColor","c","isPickerOwner","blurTarget","importColor","pickerOnfocus","blurValue","mpos","leaveSld","leavePad","onImmediateChange","callback","call","required","adjust","hash","caps","styleElement","minH","maxH","minS","maxS","minV","maxV","pickerMode","pickerPosition","pickerSmartPosition","pickerButtonColor","showPicker","a","tp","ts","vp","vs","ps","l","pp","value","jscStyle","exportColor","leaveValue","leaveStyle","fromString","flags","fromRGB","hex","parseInt","charAt","setTimeout","updateField","setAttribute","Wee","make","$private","initScrolling","initAccordion","initAutoComplete","initPreview","initModal","initSelectAll","getColors","scope","colors","$","filter","validateColor","data","colorValues","each","$el","attr","val","append","scrollbar","tinyscrollbar","updateScrollbar","update","$overview","isActive","$setRef","on","scrollAmount","abs","css","addClass","next","toggleClass","offset","removeClass","keyCodes","arrowDown","arrowUp","enter","esc","shift","tab","preview","contentWindow","regexp","keyup","$next","matches","list","$currentSelection","autocompleteShowing","keyCode","shiftHeld","undefined","children","first","prev","last","text","removeSuggestions","processChange","name","weeVariables","indexOf","push","is","after","keydown","which","blur","_win","click","select","_body","not","$target","inputEl","parent","sel","delegate","remove","template","file","variables","request","url","success","view","render","showModal","failure","showMessage","status","statusText","hideModal","html","isRecursive","resetInput","parseValue","valid","validate","response","setVal","trim","defaultValue","input","message","$messageBar","hideMessage","vars","less","Parser","serializeVars","error","output","types","forEach","type","isUnit","isNumber","isColor","isFont","isPath","isFile","isEntity","isColorKeyword","stack","isMatch","every","createRange","range","selectNodeContents","addRange","createTextRange","textRange","moveToElementText"],"mappings":"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","file":"script.min.js","sourcesContent":["/**\n * jscolor, JavaScript Color Picker\n *\n * @version 1.4.3\n * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html\n * @author  Jan Odvarko, http://odvarko.cz\n * @created 2008-06-15\n * @updated 2014-07-16\n * @link    http://jscolor.com\n */\n\n/* Modified by Chris Roberts for Wee Variables */\n\nvar jscolor = {\n\n\n\tdir : '/assets/img/customize/', // location of jscolor directory (leave empty to autodetect)\n\tbindClass : 'color', // class name\n\tbinding : true, // automatic binding via <input class=\"...\">\n\tpreloading : true, // use image preloading?\n\n\n\tinstall : function() {\n\t\tjscolor.addEvent(window, 'load', jscolor.init);\n\t},\n\n\n\tinit : function() {\n\t\tif(jscolor.binding) {\n\t\t\tjscolor.bind();\n\t\t}\n\t\tif(jscolor.preloading) {\n\t\t\tjscolor.preload();\n\t\t}\n\t},\n\n\n\tgetDir : function() {\n\t\tif(!jscolor.dir) {\n\t\t\tvar detected = jscolor.detectDir();\n\t\t\tjscolor.dir = detected!==false ? detected : 'jscolor/';\n\t\t}\n\t\treturn jscolor.dir;\n\t},\n\n\n\tdetectDir : function() {\n\t\tvar base = location.href;\n\n\t\tvar e = document.getElementsByTagName('base');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tif(e[i].href) { base = e[i].href; }\n\t\t}\n\n\t\tvar e = document.getElementsByTagName('script');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tif(e[i].src && /(^|\\/)jscolor\\.js([?#].*)?$/i.test(e[i].src)) {\n\t\t\t\tvar src = new jscolor.URI(e[i].src);\n\t\t\t\tvar srcAbs = src.toAbsolute(base);\n\t\t\t\tsrcAbs.path = srcAbs.path.replace(/[^\\/]+$/, ''); // remove filename\n\t\t\t\tsrcAbs.query = null;\n\t\t\t\tsrcAbs.fragment = null;\n\t\t\t\treturn srcAbs.toString();\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tbind : function() {\n\t\tvar matchClass = new RegExp('(^|\\\\s)('+jscolor.bindClass+')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\t\tvar e = document.getElementsByTagName('input');\n\t\tfor(var i=0; i<e.length; i+=1) {\n\t\t\tvar m;\n\t\t\tif(!e[i].color && e[i].className && (m = e[i].className.match(matchClass))) {\n\t\t\t\tvar prop = {};\n\t\t\t\tif(m[4]) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tprop = (new Function ('return (' + m[4] + ')'))();\n\t\t\t\t\t} catch(eInvalidProp) {}\n\t\t\t\t}\n\t\t\t\te[i].color = new jscolor.color(e[i], prop);\n\t\t\t}\n\t\t}\n\t},\n\n\n\tpreload : function() {\n\t\tfor(var fn in jscolor.imgRequire) {\n\t\t\tif(jscolor.imgRequire.hasOwnProperty(fn)) {\n\t\t\t\tjscolor.loadImage(fn);\n\t\t\t}\n\t\t}\n\t},\n\n\n\timages : {\n\t\tpad : [ 181, 101 ],\n\t\tsld : [ 16, 101 ],\n\t\tcross : [ 15, 15 ],\n\t\tarrow : [ 7, 11 ]\n\t},\n\n\n\timgRequire : {},\n\timgLoaded : {},\n\n\n\trequireImage : function(filename) {\n\t\tjscolor.imgRequire[filename] = true;\n\t},\n\n\n\tloadImage : function(filename) {\n\t\tif(!jscolor.imgLoaded[filename]) {\n\t\t\tjscolor.imgLoaded[filename] = new Image();\n\t\t\tjscolor.imgLoaded[filename].src = jscolor.getDir()+filename;\n\t\t}\n\t},\n\n\n\tfetchElement : function(mixed) {\n\t\treturn typeof mixed === 'string' ? document.getElementById(mixed) : mixed;\n\t},\n\n\n\taddEvent : function(el, evnt, func) {\n\t\tif(el.addEventListener) {\n\t\t\tel.addEventListener(evnt, func, false);\n\t\t} else if(el.attachEvent) {\n\t\t\tel.attachEvent('on'+evnt, func);\n\t\t}\n\t},\n\n\n\tfireEvent : function(el, evnt) {\n\t\tif(!el) {\n\t\t\treturn;\n\t\t}\n\t\tif(document.createEvent) {\n\t\t\tvar ev = document.createEvent('HTMLEvents');\n\t\t\tev.initEvent(evnt, true, true);\n\t\t\tel.dispatchEvent(ev);\n\t\t} else if(document.createEventObject) {\n\t\t\tvar ev = document.createEventObject();\n\t\t\tel.fireEvent('on'+evnt, ev);\n\t\t} else if(el['on'+evnt]) { // alternatively use the traditional event model (IE5)\n\t\t\tel['on'+evnt]();\n\t\t}\n\t},\n\n\n\tgetElementPos : function(e) {\n\t\tvar e1=e, e2=e;\n\t\tvar x=0, y=0;\n\t\tif(e1.offsetParent) {\n\t\t\tdo {\n\t\t\t\tx += e1.offsetLeft;\n\t\t\t\ty += e1.offsetTop;\n\t\t\t} while(e1 = e1.offsetParent);\n\t\t}\n\t\twhile((e2 = e2.parentNode) && e2.nodeName.toUpperCase() !== 'BODY') {\n\t\t\tx -= e2.scrollLeft;\n\t\t\ty -= e2.scrollTop;\n\t\t}\n\t\treturn [x, y];\n\t},\n\n\n\tgetElementSize : function(e) {\n\t\treturn [e.offsetWidth, e.offsetHeight];\n\t},\n\n\n\tgetRelMousePos : function(e) {\n\t\tvar x = 0, y = 0;\n\t\tif (!e) { e = window.event; }\n\t\tif (typeof e.offsetX === 'number') {\n\t\t\tx = e.offsetX;\n\t\t\ty = e.offsetY;\n\t\t} else if (typeof e.layerX === 'number') {\n\t\t\tx = e.layerX;\n\t\t\ty = e.layerY;\n\t\t}\n\t\treturn { x: x, y: y };\n\t},\n\n\n\tgetViewPos : function() {\n\t\tif(typeof window.pageYOffset === 'number') {\n\t\t\treturn [window.pageXOffset, window.pageYOffset];\n\t\t} else if(document.body && (document.body.scrollLeft || document.body.scrollTop)) {\n\t\t\treturn [document.body.scrollLeft, document.body.scrollTop];\n\t\t} else if(document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {\n\t\t\treturn [document.documentElement.scrollLeft, document.documentElement.scrollTop];\n\t\t} else {\n\t\t\treturn [0, 0];\n\t\t}\n\t},\n\n\n\tgetViewSize : function() {\n\t\tif(typeof window.innerWidth === 'number') {\n\t\t\treturn [window.innerWidth, window.innerHeight];\n\t\t} else if(document.body && (document.body.clientWidth || document.body.clientHeight)) {\n\t\t\treturn [document.body.clientWidth, document.body.clientHeight];\n\t\t} else if(document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {\n\t\t\treturn [document.documentElement.clientWidth, document.documentElement.clientHeight];\n\t\t} else {\n\t\t\treturn [0, 0];\n\t\t}\n\t},\n\n\n\tURI : function(uri) { // See RFC3986\n\n\t\tthis.scheme = null;\n\t\tthis.authority = null;\n\t\tthis.path = '';\n\t\tthis.query = null;\n\t\tthis.fragment = null;\n\n\t\tthis.parse = function(uri) {\n\t\t\tvar m = uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\\/\\/)([^\\/?#]*))?([^?#]*)((\\?)([^#]*))?((#)(.*))?/);\n\t\t\tthis.scheme = m[3] ? m[2] : null;\n\t\t\tthis.authority = m[5] ? m[6] : null;\n\t\t\tthis.path = m[7];\n\t\t\tthis.query = m[9] ? m[10] : null;\n\t\t\tthis.fragment = m[12] ? m[13] : null;\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.toString = function() {\n\t\t\tvar result = '';\n\t\t\tif(this.scheme !== null) { result = result + this.scheme + ':'; }\n\t\t\tif(this.authority !== null) { result = result + '//' + this.authority; }\n\t\t\tif(this.path !== null) { result = result + this.path; }\n\t\t\tif(this.query !== null) { result = result + '?' + this.query; }\n\t\t\tif(this.fragment !== null) { result = result + '#' + this.fragment; }\n\t\t\treturn result;\n\t\t};\n\n\t\tthis.toAbsolute = function(base) {\n\t\t\tvar base = new jscolor.URI(base);\n\t\t\tvar r = this;\n\t\t\tvar t = new jscolor.URI;\n\n\t\t\tif(base.scheme === null) { return false; }\n\n\t\t\tif(r.scheme !== null && r.scheme.toLowerCase() === base.scheme.toLowerCase()) {\n\t\t\t\tr.scheme = null;\n\t\t\t}\n\n\t\t\tif(r.scheme !== null) {\n\t\t\t\tt.scheme = r.scheme;\n\t\t\t\tt.authority = r.authority;\n\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\tt.query = r.query;\n\t\t\t} else {\n\t\t\t\tif(r.authority !== null) {\n\t\t\t\t\tt.authority = r.authority;\n\t\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\t\tt.query = r.query;\n\t\t\t\t} else {\n\t\t\t\t\tif(r.path === '') {\n\t\t\t\t\t\tt.path = base.path;\n\t\t\t\t\t\tif(r.query !== null) {\n\t\t\t\t\t\t\tt.query = r.query;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tt.query = base.query;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(r.path.substr(0,1) === '/') {\n\t\t\t\t\t\t\tt.path = removeDotSegments(r.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(base.authority !== null && base.path === '') {\n\t\t\t\t\t\t\t\tt.path = '/'+r.path;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tt.path = base.path.replace(/[^\\/]+$/,'')+r.path;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tt.path = removeDotSegments(t.path);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tt.query = r.query;\n\t\t\t\t\t}\n\t\t\t\t\tt.authority = base.authority;\n\t\t\t\t}\n\t\t\t\tt.scheme = base.scheme;\n\t\t\t}\n\t\t\tt.fragment = r.fragment;\n\n\t\t\treturn t;\n\t\t};\n\n\t\tfunction removeDotSegments(path) {\n\t\t\tvar out = '';\n\t\t\twhile(path) {\n\t\t\t\tif(path.substr(0,3)==='../' || path.substr(0,2)==='./') {\n\t\t\t\t\tpath = path.replace(/^\\.+/,'').substr(1);\n\t\t\t\t} else if(path.substr(0,3)==='/./' || path==='/.') {\n\t\t\t\t\tpath = '/'+path.substr(3);\n\t\t\t\t} else if(path.substr(0,4)==='/../' || path==='/..') {\n\t\t\t\t\tpath = '/'+path.substr(4);\n\t\t\t\t\tout = out.replace(/\\/?[^\\/]*$/, '');\n\t\t\t\t} else if(path==='.' || path==='..') {\n\t\t\t\t\tpath = '';\n\t\t\t\t} else {\n\t\t\t\t\tvar rm = path.match(/^\\/?[^\\/]*/)[0];\n\t\t\t\t\tpath = path.substr(rm.length);\n\t\t\t\t\tout = out + rm;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\n\t\tif(uri) {\n\t\t\tthis.parse(uri);\n\t\t}\n\n\t},\n\n\t//\n\t// Usage example:\n\t// var myColor = new jscolor.color(myInputElement)\n\t//\n\n\tcolor : function(target, prop) {\n\n\n\t\tthis.required = true; // refuse empty values?\n\t\tthis.adjust = false; // adjust value to uniform notation?\n\t\tthis.hash = false; // prefix color with # symbol?\n\t\tthis.caps = false; // uppercase?\n\t\tthis.slider = true; // show the value/saturation slider?\n\t\tthis.valueElement = target; // value holder\n\t\tthis.styleElement = target; // where to reflect current color\n\t\tthis.onImmediateChange = null; // onchange callback (can be either string or function)\n\t\tthis.hsv = [0, 0, 1]; // read-only  0-6, 0-1, 0-1\n\t\tthis.rgb = [1, 1, 1]; // read-only  0-1, 0-1, 0-1\n\t\tthis.minH = 0; // read-only  0-6\n\t\tthis.maxH = 6; // read-only  0-6\n\t\tthis.minS = 0; // read-only  0-1\n\t\tthis.maxS = 1; // read-only  0-1\n\t\tthis.minV = 0; // read-only  0-1\n\t\tthis.maxV = 1; // read-only  0-1\n\n\t\tthis.pickerOnfocus = true; // display picker on focus?\n\t\tthis.pickerMode = 'HSV'; // HSV | HVS\n\t\tthis.pickerPosition = 'right'; // left | right | top | bottom\n\t\tthis.pickerSmartPosition = true; // automatically adjust picker position when necessary\n\t\tthis.pickerButtonHeight = 20; // px\n\t\tthis.pickerClosable = false;\n\t\tthis.pickerCloseText = 'Close';\n\t\tthis.pickerButtonColor = 'ButtonText'; // px\n\t\tthis.pickerFace = 8; // px\n\t\tthis.pickerFaceColor = 'ThreeDFace'; // CSS color\n\t\tthis.pickerBorder = 0; // px\n\t\tthis.pickerBorderColor = 'ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight'; // CSS color\n\t\tthis.pickerInset = 0; // px\n\t\tthis.pickerInsetColor = 'ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow'; // CSS color\n\t\tthis.pickerZIndex = 10000;\n\n\n\t\tfor(var p in prop) {\n\t\t\tif(prop.hasOwnProperty(p)) {\n\t\t\t\tthis[p] = prop[p];\n\t\t\t}\n\t\t}\n\n\n\t\tthis.hidePicker = function() {\n\t\t\tif(isPickerOwner()) {\n\t\t\t\tremovePicker();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.showPicker = function() {\n\t\t\tif(!isPickerOwner()) {\n\t\t\t\tvar tp = jscolor.getElementPos(target); // target pos\n\t\t\t\tvar ts = jscolor.getElementSize(target); // target size\n\t\t\t\tvar vp = jscolor.getViewPos(); // view pos\n\t\t\t\tvar vs = jscolor.getViewSize(); // view size\n\t\t\t\tvar ps = getPickerDims(this); // picker size\n\t\t\t\tvar a, b, c;\n\t\t\t\tswitch(this.pickerPosition.toLowerCase()) {\n\t\t\t\t\tcase 'left': a=1; b=0; c=-1; break;\n\t\t\t\t\tcase 'right':a=1; b=0; c=1; break;\n\t\t\t\t\tcase 'top':  a=0; b=1; c=-1; break;\n\t\t\t\t\tdefault:     a=0; b=1; c=1; break;\n\t\t\t\t}\n\t\t\t\tvar l = (ts[b]+ps[b])/2;\n\n\t\t\t\t// picker pos\n\t\t\t\tif (!this.pickerSmartPosition) {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\ttp[b]+ts[b]-l+l*c\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tvar pp = [\n\t\t\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\n\t\t\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\n\t\t\t\t\t\t\ttp[a],\n\t\t\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\n\t\t\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\n\t\t\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tdrawPicker(pp[a], pp[b]);\n\t\t\t}\n\t\t};\n\n\n\t\tthis.importColor = function() {\n\t\t\tif(!valueElement) {\n\t\t\t\tthis.exportColor();\n\t\t\t} else {\n\t\t\t\tif(!this.adjust) {\n\t\t\t\t\tif(!this.fromString(valueElement.value, leaveValue)) {\n\t\t\t\t\t\tstyleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage;\n\t\t\t\t\t\tstyleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\t\tstyleElement.style.color = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\t\tthis.exportColor(leaveValue | leaveStyle);\n\t\t\t\t\t}\n\t\t\t\t} else if(!this.required && /^\\s*$/.test(valueElement.value)) {\n\t\t\t\t\tvalueElement.value = '';\n\t\t\t\t\tstyleElement.style.backgroundImage = styleElement.jscStyle.backgroundImage;\n\t\t\t\t\tstyleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\tstyleElement.style.color = styleElement.jscStyle.backgroundColor;\n\t\t\t\t\tthis.exportColor(leaveValue | leaveStyle);\n\n\t\t\t\t} else if(this.fromString(valueElement.value)) {\n\t\t\t\t\t// OK\n\t\t\t\t} else {\n\t\t\t\t\tthis.exportColor();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tthis.exportColor = function(flags) {\n\t\t\tif(!(flags & leaveValue) && valueElement) {\n\t\t\t\tvar value = this.toString();\n\t\t\t\tif(this.caps) { value = value.toUpperCase(); }\n\t\t\t\tif(this.hash) { value = '#'+value; }\n\t\t\t\tvalueElement.value = '#' + value;\n\t\t\t}\n\t\t\tif(!(flags & leaveStyle) && styleElement) {\n\t\t\t\tstyleElement.style.backgroundImage = \"none\";\n\t\t\t\tstyleElement.style.backgroundColor = '#'+this.toString();\n\t\t\t\t// styleElement.style.color = '#'+this.toString();\n\t\t\t\tstyleElement.style.color =\n\t\t\t\t\t0.213 * this.rgb[0] +\n\t\t\t\t\t0.715 * this.rgb[1] +\n\t\t\t\t\t0.072 * this.rgb[2]\n\t\t\t\t\t< 0.5 ? '#FFF' : '#000';\n\t\t\t}\n\t\t\tif(!(flags & leavePad) && isPickerOwner()) {\n\t\t\t\tredrawPad();\n\t\t\t}\n\t\t\tif(!(flags & leaveSld) && isPickerOwner()) {\n\t\t\t\tredrawSld();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.fromHSV = function(h, s, v, flags) { // null = don't change\n\t\t\tif(h !== null) { h = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, h)); }\n\t\t\tif(s !== null) { s = Math.max(0.0, this.minS, Math.min(1.0, this.maxS, s)); }\n\t\t\tif(v !== null) { v = Math.max(0.0, this.minV, Math.min(1.0, this.maxV, v)); }\n\n\t\t\tthis.rgb = HSV_RGB(\n\t\t\t\th===null ? this.hsv[0] : (this.hsv[0]=h),\n\t\t\t\ts===null ? this.hsv[1] : (this.hsv[1]=s),\n\t\t\t\tv===null ? this.hsv[2] : (this.hsv[2]=v)\n\t\t\t);\n\n\t\t\tthis.exportColor(flags);\n\t\t};\n\n\n\t\tthis.fromRGB = function(r, g, b, flags) { // null = don't change\n\t\t\tif(r !== null) { r = Math.max(0.0, Math.min(1.0, r)); }\n\t\t\tif(g !== null) { g = Math.max(0.0, Math.min(1.0, g)); }\n\t\t\tif(b !== null) { b = Math.max(0.0, Math.min(1.0, b)); }\n\n\t\t\tvar hsv = RGB_HSV(\n\t\t\t\tr===null ? this.rgb[0] : r,\n\t\t\t\tg===null ? this.rgb[1] : g,\n\t\t\t\tb===null ? this.rgb[2] : b\n\t\t\t);\n\t\t\tif(hsv[0] !== null) {\n\t\t\t\tthis.hsv[0] = Math.max(0.0, this.minH, Math.min(6.0, this.maxH, hsv[0]));\n\t\t\t}\n\t\t\tif(hsv[2] !== 0) {\n\t\t\t\tthis.hsv[1] = hsv[1]===null ? null : Math.max(0.0, this.minS, Math.min(1.0, this.maxS, hsv[1]));\n\t\t\t}\n\t\t\tthis.hsv[2] = hsv[2]===null ? null : Math.max(0.0, this.minV, Math.min(1.0, this.maxV, hsv[2]));\n\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\n\t\t\tvar rgb = HSV_RGB(this.hsv[0], this.hsv[1], this.hsv[2]);\n\t\t\tthis.rgb[0] = rgb[0];\n\t\t\tthis.rgb[1] = rgb[1];\n\t\t\tthis.rgb[2] = rgb[2];\n\n\t\t\tthis.exportColor(flags);\n\t\t};\n\n\n\t\tthis.fromString = function(hex, flags) {\n\t\t\tvar m = hex.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i);\n\t\t\tif(!m) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tif(m[1].length === 6) { // 6-char notation\n\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\tparseInt(m[1].substr(0,2),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].substr(2,2),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].substr(4,2),16) / 255,\n\t\t\t\t\t\tflags\n\t\t\t\t\t);\n\t\t\t\t} else { // 3-char notation\n\t\t\t\t\tthis.fromRGB(\n\t\t\t\t\t\tparseInt(m[1].charAt(0)+m[1].charAt(0),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].charAt(1)+m[1].charAt(1),16) / 255,\n\t\t\t\t\t\tparseInt(m[1].charAt(2)+m[1].charAt(2),16) / 255,\n\t\t\t\t\t\tflags\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\n\n\t\tthis.toString = function() {\n\t\t\treturn (\n\t\t\t\t(0x100 | Math.round(255*this.rgb[0])).toString(16).substr(1) +\n\t\t\t\t(0x100 | Math.round(255*this.rgb[1])).toString(16).substr(1) +\n\t\t\t\t(0x100 | Math.round(255*this.rgb[2])).toString(16).substr(1)\n\t\t\t);\n\t\t};\n\n\n\t\tfunction RGB_HSV(r, g, b) {\n\t\t\tvar n = Math.min(Math.min(r,g),b);\n\t\t\tvar v = Math.max(Math.max(r,g),b);\n\t\t\tvar m = v - n;\n\t\t\tif(m === 0) { return [ null, 0, v ]; }\n\t\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\n\t\t\treturn [ h===6?0:h, m/v, v ];\n\t\t}\n\n\n\t\tfunction HSV_RGB(h, s, v) {\n\t\t\tif(h === null) { return [ v, v, v ]; }\n\t\t\tvar i = Math.floor(h);\n\t\t\tvar f = i%2 ? h-i : 1-(h-i);\n\t\t\tvar m = v * (1 - s);\n\t\t\tvar n = v * (1 - s*f);\n\t\t\tswitch(i) {\n\t\t\t\tcase 6:\n\t\t\t\tcase 0: return [v,n,m];\n\t\t\t\tcase 1: return [n,v,m];\n\t\t\t\tcase 2: return [m,v,n];\n\t\t\t\tcase 3: return [m,n,v];\n\t\t\t\tcase 4: return [n,m,v];\n\t\t\t\tcase 5: return [v,m,n];\n\t\t\t}\n\t\t}\n\n\n\t\tfunction removePicker() {\n\t\t\tdelete jscolor.picker.owner;\n\t\t\tdocument.getElementsByTagName('body')[0].removeChild(jscolor.picker.boxB);\n\t\t}\n\n\n\t\tfunction drawPicker(x, y) {\n\t\t\tif(!jscolor.picker) {\n\t\t\t\tjscolor.picker = {\n\t\t\t\t\tbox : document.createElement('div'),\n\t\t\t\t\tboxB : document.createElement('div'),\n\t\t\t\t\tpad : document.createElement('div'),\n\t\t\t\t\tpadB : document.createElement('div'),\n\t\t\t\t\tpadM : document.createElement('div'),\n\t\t\t\t\tsld : document.createElement('div'),\n\t\t\t\t\tsldB : document.createElement('div'),\n\t\t\t\t\tsldM : document.createElement('div'),\n\t\t\t\t\tbtn : document.createElement('div'),\n\t\t\t\t\tbtnS : document.createElement('span'),\n\t\t\t\t\tbtnT : document.createTextNode(THIS.pickerCloseText)\n\t\t\t\t};\n\t\t\t\tfor(var i=0,segSize=4; i<jscolor.images.sld[1]; i+=segSize) {\n\t\t\t\t\tvar seg = document.createElement('div');\n\t\t\t\t\tseg.style.height = segSize+'px';\n\t\t\t\t\tseg.style.fontSize = '1px';\n\t\t\t\t\tseg.style.lineHeight = '0';\n\t\t\t\t\tjscolor.picker.sld.appendChild(seg);\n\t\t\t\t}\n\t\t\t\tjscolor.picker.sldB.appendChild(jscolor.picker.sld);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.sldB);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.sldM);\n\t\t\t\tjscolor.picker.padB.appendChild(jscolor.picker.pad);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.padB);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.padM);\n\t\t\t\tjscolor.picker.btnS.appendChild(jscolor.picker.btnT);\n\t\t\t\tjscolor.picker.btnS.appendChild(jscolor.picker.btnT);\n\t\t\t\tjscolor.picker.box.appendChild(jscolor.picker.btn);\n\t\t\t\tjscolor.picker.boxB.appendChild(jscolor.picker.box);\n\t\t\t}\n\n\t\t\tvar p = jscolor.picker;\n\n\t\t\t// controls interaction\n\t\t\tp.box.onmouseup =\n\t\t\tp.box.onmouseout = function() { target.focus(); };\n\t\t\tp.box.onmousedown = function() { abortBlur=true; };\n\t\t\tp.box.onmousemove = function(e) {\n\t\t\t\tif (holdPad || holdSld) {\n\t\t\t\t\tholdPad && setPad(e);\n\t\t\t\t\tholdSld && setSld(e);\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t} else if (window.getSelection) {\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\t}\n\t\t\t\t\tdispatchImmediateChange();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif('ontouchstart' in window) { // if touch device\n\t\t\t\tvar handle_touchmove = function(e) {\n\t\t\t\t\tvar event={\n\t\t\t\t\t\t'offsetX': e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY': e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t};\n\t\t\t\t\tif (holdPad || holdSld) {\n\t\t\t\t\t\tholdPad && setPad(event);\n\t\t\t\t\t\tholdSld && setSld(event);\n\t\t\t\t\t\tdispatchImmediateChange();\n\t\t\t\t\t}\n\t\t\t\t\te.stopPropagation(); // prevent move \"view\" on broswer\n\t\t\t\t\te.preventDefault(); // prevent Default - Android Fix (else android generated only 1-2 touchmove events)\n\t\t\t\t};\n\t\t\t\tp.box.removeEventListener('touchmove', handle_touchmove, false)\n\t\t\t\tp.box.addEventListener('touchmove', handle_touchmove, false)\n\t\t\t}\n\t\t\tp.padM.onmouseup =\n\t\t\tp.padM.onmouseout = function() { if(holdPad) { holdPad=false; jscolor.fireEvent(valueElement,'change'); } };\n\t\t\tp.padM.onmousedown = function(e) {\n\t\t\t\t// if the slider is at the bottom, move it up\n\t\t\t\tswitch(modeID) {\n\t\t\t\t\tcase 0: if (THIS.hsv[2] === 0) { THIS.fromHSV(null, null, 1.0); }; break;\n\t\t\t\t\tcase 1: if (THIS.hsv[1] === 0) { THIS.fromHSV(null, 1.0, null); }; break;\n\t\t\t\t}\n\t\t\t\tholdSld=false;\n\t\t\t\tholdPad=true;\n\t\t\t\tsetPad(e);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tif('ontouchstart' in window) {\n\t\t\t\tp.padM.addEventListener('touchstart', function(e) {\n\t\t\t\t\ttouchOffset={\n\t\t\t\t\t\t'X': e.target.offsetParent.offsetLeft,\n\t\t\t\t\t\t'Y': e.target.offsetParent.offsetTop\n\t\t\t\t\t};\n\t\t\t\t\tthis.onmousedown({\n\t\t\t\t\t\t'offsetX':e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY':e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tp.sldM.onmouseup =\n\t\t\tp.sldM.onmouseout = function() { if(holdSld) { holdSld=false; jscolor.fireEvent(valueElement,'change'); } };\n\t\t\tp.sldM.onmousedown = function(e) {\n\t\t\t\tholdPad=false;\n\t\t\t\tholdSld=true;\n\t\t\t\tsetSld(e);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tif('ontouchstart' in window) {\n\t\t\t\tp.sldM.addEventListener('touchstart', function(e) {\n\t\t\t\t\ttouchOffset={\n\t\t\t\t\t\t'X': e.target.offsetParent.offsetLeft,\n\t\t\t\t\t\t'Y': e.target.offsetParent.offsetTop\n\t\t\t\t\t};\n\t\t\t\t\tthis.onmousedown({\n\t\t\t\t\t\t'offsetX':e.touches[0].pageX-touchOffset.X,\n\t\t\t\t\t\t'offsetY':e.touches[0].pageY-touchOffset.Y\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// picker\n\t\t\tvar dims = getPickerDims(THIS);\n\t\t\tp.box.style.width = dims[0] + 'px';\n\t\t\tp.box.style.height = dims[1] + 'px';\n\n\t\t\t// picker border\n\t\t\tp.boxB.style.position = 'absolute';\n\t\t\tp.boxB.style.clear = 'both';\n\t\t\tp.boxB.style.left = x+'px';\n\t\t\tp.boxB.style.top = y+'px';\n\t\t\tp.boxB.style.zIndex = THIS.pickerZIndex;\n\t\t\tp.boxB.style.border = THIS.pickerBorder+'px solid';\n\t\t\tp.boxB.style.borderColor = THIS.pickerBorderColor;\n\t\t\tp.boxB.style.background = THIS.pickerFaceColor;\n\n\t\t\t// pad image\n\t\t\tp.pad.style.width = jscolor.images.pad[0]+'px';\n\t\t\tp.pad.style.height = jscolor.images.pad[1]+'px';\n\n\t\t\t// pad border\n\t\t\tp.padB.style.position = 'absolute';\n\t\t\tp.padB.style.left = THIS.pickerFace+'px';\n\t\t\tp.padB.style.top = THIS.pickerFace+'px';\n\t\t\tp.padB.style.border = THIS.pickerInset+'px solid';\n\t\t\tp.padB.style.borderColor = THIS.pickerInsetColor;\n\n\t\t\t// pad mouse area\n\t\t\tp.padM.style.position = 'absolute';\n\t\t\tp.padM.style.left = '0';\n\t\t\tp.padM.style.top = '0';\n\t\t\tp.padM.style.width = THIS.pickerFace + 2*THIS.pickerInset + jscolor.images.pad[0] + jscolor.images.arrow[0] + 'px';\n\t\t\tp.padM.style.height = p.box.style.height;\n\t\t\tp.padM.style.cursor = 'crosshair';\n\n\t\t\t// slider image\n\t\t\tp.sld.style.overflow = 'hidden';\n\t\t\tp.sld.style.width = jscolor.images.sld[0]+'px';\n\t\t\tp.sld.style.height = jscolor.images.sld[1]+'px';\n\n\t\t\t// slider border\n\t\t\tp.sldB.style.display = THIS.slider ? 'block' : 'none';\n\t\t\tp.sldB.style.position = 'absolute';\n\t\t\tp.sldB.style.right = THIS.pickerFace+'px';\n\t\t\tp.sldB.style.top = THIS.pickerFace+'px';\n\t\t\tp.sldB.style.border = THIS.pickerInset+'px solid';\n\t\t\tp.sldB.style.borderColor = THIS.pickerInsetColor;\n\n\t\t\t// slider mouse area\n\t\t\tp.sldM.style.display = THIS.slider ? 'block' : 'none';\n\t\t\tp.sldM.style.position = 'absolute';\n\t\t\tp.sldM.style.right = '0';\n\t\t\tp.sldM.style.top = '0';\n\t\t\tp.sldM.style.width = jscolor.images.sld[0] + jscolor.images.arrow[0] + THIS.pickerFace + 2*THIS.pickerInset + 'px';\n\t\t\tp.sldM.style.height = p.box.style.height;\n\t\t\ttry {\n\t\t\t\tp.sldM.style.cursor = 'pointer';\n\t\t\t} catch(eOldIE) {\n\t\t\t\tp.sldM.style.cursor = 'hand';\n\t\t\t}\n\n\t\t\t// \"close\" button\n\t\t\tfunction setBtnBorder() {\n\t\t\t\tvar insetColors = THIS.pickerInsetColor.split(/\\s+/);\n\t\t\t\tvar pickerOutsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n\t\t\t\tp.btn.style.borderColor = pickerOutsetColor;\n\t\t\t}\n\t\t\tp.btn.style.display = THIS.pickerClosable ? 'block' : 'none';\n\t\t\tp.btn.style.position = 'absolute';\n\t\t\tp.btn.style.left = THIS.pickerFace + 'px';\n\t\t\tp.btn.style.bottom = THIS.pickerFace + 'px';\n\t\t\tp.btn.style.padding = '0 15px';\n\t\t\tp.btn.style.height = '18px';\n\t\t\tp.btn.style.border = THIS.pickerInset + 'px solid';\n\t\t\tsetBtnBorder();\n\t\t\tp.btn.style.color = THIS.pickerFaceColor;\n\t\t\tp.btn.style.font = '12px sans-serif';\n\t\t\tp.btn.style.textAlign = 'center';\n\t\t\ttry {\n\t\t\t\tp.btn.style.cursor = 'pointer';\n\t\t\t} catch(eOldIE) {\n\t\t\t\tp.btn.style.cursor = 'hand';\n\t\t\t}\n\t\t\tp.btn.onmousedown = function () {\n\t\t\t\tTHIS.hidePicker();\n\t\t\t};\n\t\t\tp.btnS.style.lineHeight = p.btn.style.height;\n\n\t\t\t// load images in optimal order\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var padImg = 'hs.png'; break;\n\t\t\t\tcase 1: var padImg = 'hv.png'; break;\n\t\t\t}\n\t\t\tp.padM.style.backgroundImage = \"url('\"+jscolor.getDir()+\"cross.gif')\";\n\t\t\tp.padM.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.sldM.style.backgroundImage = \"url('\"+jscolor.getDir()+\"arrow.gif')\";\n\t\t\tp.sldM.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.pad.style.backgroundImage = \"url('\"+jscolor.getDir()+padImg+\"')\";\n\t\t\tp.pad.style.backgroundRepeat = \"no-repeat\";\n\t\t\tp.pad.style.backgroundPosition = \"0 0\";\n\n\t\t\t// place pointers\n\t\t\tredrawPad();\n\t\t\tredrawSld();\n\n\t\t\tjscolor.picker.owner = THIS;\n\t\t\tdocument.getElementsByTagName('body')[0].appendChild(p.boxB);\n\t\t}\n\n\n\t\tfunction getPickerDims(o) {\n\t\t\tvar dims = [\n\t\t\t\t2*o.pickerInset + 2*o.pickerFace + jscolor.images.pad[0] +\n\t\t\t\t\t(o.slider ? 2*o.pickerInset + 2*jscolor.images.arrow[0] + jscolor.images.sld[0] : 0),\n\t\t\t\to.pickerClosable ?\n\t\t\t\t\t4*o.pickerInset + 3*o.pickerFace + jscolor.images.pad[1] + o.pickerButtonHeight :\n\t\t\t\t\t2*o.pickerInset + 2*o.pickerFace + jscolor.images.pad[1]\n\t\t\t];\n\t\t\treturn dims;\n\t\t}\n\n\n\t\tfunction redrawPad() {\n\t\t\t// redraw the pad pointer\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var yComponent = 1; break;\n\t\t\t\tcase 1: var yComponent = 2; break;\n\t\t\t}\n\t\t\tvar x = Math.round((THIS.hsv[0]/6) * (jscolor.images.pad[0]-1));\n\t\t\tvar y = Math.round((1-THIS.hsv[yComponent]) * (jscolor.images.pad[1]-1));\n\t\t\tjscolor.picker.padM.style.backgroundPosition =\n\t\t\t\t(THIS.pickerFace+THIS.pickerInset+x - Math.floor(jscolor.images.cross[0]/2)) + 'px ' +\n\t\t\t\t(THIS.pickerFace+THIS.pickerInset+y - Math.floor(jscolor.images.cross[1]/2)) + 'px';\n\n\t\t\t// redraw the slider image\n\t\t\tvar seg = jscolor.picker.sld.childNodes;\n\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0:\n\t\t\t\t\tvar rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 1);\n\t\t\t\t\tfor(var i=0; i<seg.length; i+=1) {\n\t\t\t\t\t\tseg[i].style.backgroundColor = 'rgb('+\n\t\t\t\t\t\t\t(rgb[0]*(1-i/seg.length)*100)+'%,'+\n\t\t\t\t\t\t\t(rgb[1]*(1-i/seg.length)*100)+'%,'+\n\t\t\t\t\t\t\t(rgb[2]*(1-i/seg.length)*100)+'%)';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tvar rgb, s, c = [ THIS.hsv[2], 0, 0 ];\n\t\t\t\t\tvar i = Math.floor(THIS.hsv[0]);\n\t\t\t\t\tvar f = i%2 ? THIS.hsv[0]-i : 1-(THIS.hsv[0]-i);\n\t\t\t\t\tswitch(i) {\n\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcase 0: rgb=[0,1,2]; break;\n\t\t\t\t\t\tcase 1: rgb=[1,0,2]; break;\n\t\t\t\t\t\tcase 2: rgb=[2,0,1]; break;\n\t\t\t\t\t\tcase 3: rgb=[2,1,0]; break;\n\t\t\t\t\t\tcase 4: rgb=[1,2,0]; break;\n\t\t\t\t\t\tcase 5: rgb=[0,2,1]; break;\n\t\t\t\t\t}\n\t\t\t\t\tfor(var i=0; i<seg.length; i+=1) {\n\t\t\t\t\t\ts = 1 - 1/(seg.length-1)*i;\n\t\t\t\t\t\tc[1] = c[0] * (1 - s*f);\n\t\t\t\t\t\tc[2] = c[0] * (1 - s);\n\t\t\t\t\t\tseg[i].style.backgroundColor = 'rgb('+\n\t\t\t\t\t\t\t(c[rgb[0]]*100)+'%,'+\n\t\t\t\t\t\t\t(c[rgb[1]]*100)+'%,'+\n\t\t\t\t\t\t\t(c[rgb[2]]*100)+'%)';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction redrawSld() {\n\t\t\t// redraw the slider pointer\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: var yComponent = 2; break;\n\t\t\t\tcase 1: var yComponent = 1; break;\n\t\t\t}\n\t\t\tvar y = Math.round((1-THIS.hsv[yComponent]) * (jscolor.images.sld[1]-1));\n\t\t\tjscolor.picker.sldM.style.backgroundPosition =\n\t\t\t\t'0 ' + (THIS.pickerFace+THIS.pickerInset+y - Math.floor(jscolor.images.arrow[1]/2)) + 'px';\n\t\t}\n\n\n\t\tfunction isPickerOwner() {\n\t\t\treturn jscolor.picker && jscolor.picker.owner === THIS;\n\t\t}\n\n\n\t\tfunction blurTarget() {\n\t\t\tif(valueElement === target) {\n\t\t\t\tTHIS.importColor();\n\t\t\t}\n\t\t\tif(THIS.pickerOnfocus) {\n\t\t\t\tTHIS.hidePicker();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction blurValue() {\n\t\t\tif(valueElement !== target) {\n\t\t\t\tTHIS.importColor();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction setPad(e) {\n\t\t\tvar mpos = jscolor.getRelMousePos(e);\n\t\t\tvar x = mpos.x - THIS.pickerFace - THIS.pickerInset;\n\t\t\tvar y = mpos.y - THIS.pickerFace - THIS.pickerInset;\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)), 1 - y/(jscolor.images.pad[1]-1), null, leaveSld); break;\n\t\t\t\tcase 1: THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)), null, 1 - y/(jscolor.images.pad[1]-1), leaveSld); break;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction setSld(e) {\n\t\t\tvar mpos = jscolor.getRelMousePos(e);\n\t\t\tvar y = mpos.y - THIS.pickerFace - THIS.pickerInset;\n\t\t\tswitch(modeID) {\n\t\t\t\tcase 0: THIS.fromHSV(null, null, 1 - y/(jscolor.images.sld[1]-1), leavePad); break;\n\t\t\t\tcase 1: THIS.fromHSV(null, 1 - y/(jscolor.images.sld[1]-1), null, leavePad); break;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction dispatchImmediateChange() {\n\t\t\tif (THIS.onImmediateChange) {\n\t\t\t\tvar callback;\n\t\t\t\tif (typeof THIS.onImmediateChange === 'string') {\n\t\t\t\t\tcallback = new Function (THIS.onImmediateChange);\n\t\t\t\t} else {\n\t\t\t\t\tcallback = THIS.onImmediateChange;\n\t\t\t\t}\n\t\t\t\tcallback.call(THIS);\n\t\t\t}\n\t\t}\n\n\n\t\tvar THIS = this;\n\t\tvar modeID = this.pickerMode.toLowerCase()==='hvs' ? 1 : 0;\n\t\tvar abortBlur = false;\n\t\tvar\n\t\t\tvalueElement = jscolor.fetchElement(this.valueElement),\n\t\t\tstyleElement = jscolor.fetchElement(this.styleElement);\n\t\tvar\n\t\t\tholdPad = false,\n\t\t\tholdSld = false,\n\t\t\ttouchOffset = {};\n\t\tvar\n\t\t\tleaveValue = 1<<0,\n\t\t\tleaveStyle = 1<<1,\n\t\t\tleavePad = 1<<2,\n\t\t\tleaveSld = 1<<3;\n\n\n\t\t// target\n\t\tjscolor.addEvent(target, 'focus', function() {\n\t\t\tif(THIS.pickerOnfocus) { THIS.showPicker(); }\n\t\t});\n\t\tjscolor.addEvent(target, 'blur', function() {\n\t\t\tif(!abortBlur) {\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tabortBlur || blurTarget();\n\t\t\t\t\tabortBlur=false;\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tabortBlur = false;\n\t\t\t}\n\t\t});\n\n\t\t// Remove picker on keyup\n\t\tjscolor.addEvent(target, 'keyup', function() {\n\t\t\tif(!abortBlur) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tabortBlur || blurTarget();\n\t\t\t\t\tabortBlur = false;\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tabortBlur = false;\n\t\t\t}\n\t\t});\n\n\t\t// valueElement\n\t\tif(valueElement) {\n\t\t\tvar updateField = function() {\n\t\t\t\tTHIS.fromString(valueElement.value, leaveValue);\n\t\t\t\tdispatchImmediateChange();\n\t\t\t};\n\t\t\tjscolor.addEvent(valueElement, 'keyup', updateField);\n\t\t\tjscolor.addEvent(valueElement, 'input', updateField);\n\t\t\tjscolor.addEvent(valueElement, 'blur', blurValue);\n\t\t\tvalueElement.setAttribute('autocomplete', 'off');\n\t\t}\n\n\t\t// styleElement\n\t\tif(styleElement) {\n\t\t\tstyleElement.jscStyle = {\n\t\t\t\tbackgroundImage : styleElement.style.backgroundImage,\n\t\t\t\tbackgroundColor : styleElement.style.backgroundColor,\n\t\t\t\tcolor : styleElement.style.backgroundColor\n\t\t\t};\n\t\t}\n\n\t\t// require images\n\t\tswitch(modeID) {\n\t\t\tcase 0: jscolor.requireImage('hs.png'); break;\n\t\t\tcase 1: jscolor.requireImage('hv.png'); break;\n\t\t}\n\t\tjscolor.requireImage('cross.gif');\n\t\tjscolor.requireImage('arrow.gif');\n\n\t\tthis.importColor();\n\t}\n\n};\n\n\njscolor.install();\n","Wee.fn.make('customize', {\n\tinit: function() {\n\t\tthis.$private.initScrolling();\n\t\tthis.$private.initAccordion();\n\t\tthis.$private.initAutoComplete();\n\t\tthis.$private.initPreview();\n\t\tthis.$private.initModal();\n\t\tthis.$private.initSelectAll();\n\t\tthis.$private.getColors();\n\t}\n}, {\n\tgetColors: function() {\n\t\tvar scope = this,\n\t\t\tmatch = /color|(\\|false)?/g,\n\t\t\tcolors = $('input').filter(function(i, el) {\n\t\t\t\tvar validateColor = $(el).data('validate');\n\n\t\t\t\treturn match.test(validateColor);\n\t\t\t});\n\n\t\tscope.colorValues = [];\n\n\t\tcolors.each(function(el) {\n\t\t\tvar $el = $(el);\n\n\t\t\tscope.colorValues[$el.attr('name')] = $el.val();\n\t\t});\n\t},\n\tinitScrolling: function() {\n\t\t$('ref:scrollable').each(function(el) {\n\t\t\t$(el).append('<div class=\"scrollbar\"><div class=\"track\">' +\n\t\t\t\t'<div class=\"thumb\"></div></div></div>');\n\n\t\t\tthis.scrollbar = tinyscrollbar(el);\n\t\t});\n\t},\n\tupdateScrollbar: function(position) {\n\t\ttinyscrollbar($('.scrollable')[0]).update(position);\n\t},\n\tinitAccordion: function() {\n\t\tvar scope = this,\n\t\t\t$overview = $('.overview'),\n\t\t\tisActive = '-is-active';\n\n\t\tWee.$setRef();\n\n\t\t$('ref:toggle').on('click', function() {\n\t\t\tvar scrollAmount = Math.abs($('.accordion').css('top').replace('px', ''));\n\n\t\t\t$overview.addClass(isActive);\n\n\t\t\t$(this).next().toggleClass('js-hide');\n\t\t\t$(this).toggleClass('-is-active');\n\n\t\t\tscope.updateScrollbar($(this).offset().top + scrollAmount - $(this).height());\n\n\t\t\tsetTimeout(function() {\n\t\t\t\t$overview.removeClass(isActive);\n\t\t\t}, 300);\n\t\t});\n\t},\n\tinitAutoComplete: function() {\n\t\tvar scope = this,\n\t\t\tkeyCodes = {\n\t\t\t\tarrowDown: 40,\n\t\t\t\tarrowUp: 38,\n\t\t\t\tenter: 13,\n\t\t\t\tesc: 27,\n\t\t\t\tshift: 16,\n\t\t\t\ttab: 9\n\t\t\t},\n\t\t\tpreview = $('ref:previewFrame')[0].contentWindow,\n\t\t\tregexp = /(@[\\da-z-_]+$)/i;\n\n\t\t$('input').on({\n\t\t\tkeyup: function(e, el) {\n\t\t\t\tvar $next = $(this).next(), // Michael - revisit\n\t\t\t\t\tvalue = el.value,\n\t\t\t\t\tmatch = value.match(regexp),\n\t\t\t\t\tmatches = [],\n\t\t\t\t\tlist = '',\n\t\t\t\t\t$currentSelection = false;\n\n\t\t\t\tif (scope.autocompleteShowing && e.keyCode === keyCodes.shift) {\n\t\t\t\t\tscope.shiftHeld = false;\n\t\t\t\t} else if ((scope.autocompleteShowing && e.keyCode === keyCodes.arrowUp) ||\n\t\t\t\t\t(scope.shiftHeld && e.keyCode === keyCodes.tab)) {\n\t\t\t\t\tif (scope.$currentSelection !==\n\t\t\t\t\t\tundefined && scope.$currentSelection[0] !==\n\t\t\t\t\t\t$('.suggestions').children().first()[0] // Michael - ref\n\t\t\t\t\t) {\n\t\t\t\t\t\t$currentSelection = scope.$currentSelection.prev();\n\t\t\t\t\t\tscope.$currentSelection.removeClass('current-selection');\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($currentSelection) {\n\t\t\t\t\t\t$currentSelection.addClass('current-selection');\n\t\t\t\t\t\tscope.$currentSelection = $currentSelection;\n\t\t\t\t\t}\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode ===\n\t\t\t\t\tkeyCodes.arrowDown || e.keyCode === keyCodes.tab\n\t\t\t\t) {\n\t\t\t\t\tif (scope.$currentSelection !== undefined &&\n\t\t\t\t\t\tscope.$currentSelection[0] !==\n\t\t\t\t\t\t$('.suggestions').children().last()[0]\n\t\t\t\t\t) {\n\t\t\t\t\t\t$currentSelection = scope.$currentSelection.next();\n\t\t\t\t\t\tscope.$currentSelection.removeClass('current-selection');\n\t\t\t\t\t} else if (scope.$currentSelection === undefined) {\n\t\t\t\t\t\t$currentSelection = $('.suggestions').children().first();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($currentSelection) {\n\t\t\t\t\t\t$currentSelection.addClass('current-selection');\n\t\t\t\t\t\tscope.$currentSelection = $currentSelection;\n\t\t\t\t\t}\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode === keyCodes.enter) {\n\t\t\t\t\tif (scope.$currentSelection !== undefined) {\n\t\t\t\t\t\t$(el).val(scope.$currentSelection.text());\n\t\t\t\t\t\tscope.$currentSelection = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t\tscope.processChange(el);\n\t\t\t\t} else if (scope.autocompleteShowing && e.keyCode === keyCodes.esc) {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t} else if (regexp.test(value)) {\n\t\t\t\t\tscope.autocompleteShowing = true;\n\t\t\t\t\tscope.$currentSelection = undefined;\n\n\t\t\t\t\tfor (var name in preview.weeVariables) {\n\t\t\t\t\t\tif (name.substr(1).toLowerCase()\n\t\t\t\t\t\t\t.indexOf(match[0].substr(1).toLowerCase()) !== -1) {\n\t\t\t\t\t\t\tmatches.push(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (matches.length) {\n\t\t\t\t\t\tfor (var i = 0 ; i < matches.length ; i++) {\n\t\t\t\t\t\t\tlist += '<li class=\"suggestion\">' + matches[i];\n\n\t\t\t\t\t\t\tif (scope.colorValues[matches[i]]) {\n\t\t\t\t\t\t\t\tlist += '<span class=\"color-preview\" style=\"background: ' +\n\t\t\t\t\t\t\t\tscope.colorValues[matches[i]] + '\"></span>';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlist += '</li>';\n\n\t\t\t\t\t\t\tif (i === 4) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ($next.is('.suggestions')) {\n\t\t\t\t\t\t\t$next.empty().append(list);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(this).after('<ul class=\"suggestions\">' + list + '</ul>');\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeydown: function(e) {\n\t\t\t\tif (scope.autocompleteShowing && e.keyCode === keyCodes.shift) {\n\t\t\t\t\tscope.shiftHeld = true;\n\t\t\t\t} else if (e.which === keyCodes.tab && scope.autocompleteShowing) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tif (scope.autocompleteShowing) {\n\t\t\t\t\tif (e.keyCode === keyCodes.arrowUp ||\n\t\t\t\t\t\te.keyCode === keyCodes.arrowDown) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tWee._win.setTimeout(function() {\n\t\t\t\t\tscope.removeSuggestions();\n\t\t\t\t}, 200);\n\t\t\t},\n\t\t\tclick: function() {\n\t\t\t\tthis.select();\n\t\t\t}\n\t\t});\n\n\t\t$(Wee._body).on('click', function(e) {\n\t\t\tif ($(e.target).not('input') && $(e.target).not('.autocomplete__item')) {\n\t\t\t\tscope.removeSuggestions();\n\t\t\t}\n\t\t});\n\n\t\t$('.suggestion').on('click', function(e) {\n\t\t\tvar $target = $(e.target),\n\t\t\t\tinputEl = $target.parent().prev().sel[0];\n\n\t\t\t$(inputEl).val($target.text());\n\t\t\tscope.removeSuggestions();\n\t\t\tscope.processChange(inputEl);\n\t\t}, {\n\t\t\tdelegate: '.accordion__content'\n\t\t});\n\t},\n\tremoveSuggestions: function() {\n\t\t$('.suggestions').remove();\n\t\tthis.autocompleteShowing = false;\n\t},\n\tinitModal: function() {\n\t\tvar scope = this,\n\t\t\tpreview = $('ref:previewFrame')[0].contentWindow;\n\n\t\t$('ref:show-code').on('click', function(e) {\n\t\t\tvar template,\n\t\t\t\tfile,\n\t\t\t\tvariables = preview.weeVariables;\n\n\t\t\te.preventDefault();\n\n\t\t\tWee.data.request({\n\t\t\t\turl: '/wee_variables.less',\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\ttemplate = data;\n\t\t\t\t\tfile = Wee.view.render(template, variables);\n\t\t\t\t\tscope.showModal(file);\n\t\t\t\t},\n\t\t\t\tfailure: function(data) {\n\t\t\t\t\tscope.showMessage(data.status + ' (' + data.statusText + ')');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$('ref:overlay').on('click', function() {\n\t\t\tscope.hideModal();\n\t\t});\n\t},\n\tshowModal: function(file) {\n\t\t$('ref:overlay').addClass('-is-active');\n\t\t$('ref:modal').html('<pre><code>' +\n\t\t\tfile + '</code></pre>').addClass('-is-active');\n\t},\n\thideModal: function() {\n\t\t$('ref:modal').removeClass('-is-active');\n\t\t$('ref:overlay').removeClass('-is-active');\n\t},\n\tinitPreview: function() {\n\t\tvar scope = this;\n\n\t\t$('input, select').on('change', function(e, el) {\n\t\t\te.preventDefault();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (! scope.autocompleteShowing) {\n\t\t\t\t\tscope.processChange(el);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t});\n\n\t\t$('form').on('submit', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\treturn;\n\t\t});\n\t},\n\tprocessChange: function(el) {\n\t\tvar preview = $('ref:previewFrame')[0].contentWindow;\n\n\t\tif (this.isRecursive(el)) {\n\t\t\tthis.showMessage('Recursive variable definition for ' + el.name);\n\t\t\tthis.resetInput(el);\n\t\t} else {\n\t\t\tvar parse = this.parseValue(el.value);\n\n\t\t\tif (! parse.valid) {\n\t\t\t\tthis.showMessage('Parsing error: ' + parse.response);\n\t\t\t\tthis.resetInput(el);\n\t\t\t} else {\n\t\t\t\tvar validate = this.validate(parse.response, el);\n\n\t\t\t\tif (! validate.valid) {\n\t\t\t\t\tthis.showMessage('Validation error: ' + validate.response);\n\t\t\t\t\tthis.resetInput(el);\n\t\t\t\t} else {\n\t\t\t\t\tpreview.setVal(el.name, el.value.trim());\n\n\t\t\t\t\tif (this.colorValues[el.name]) {\n\t\t\t\t\t\tthis.colorValues[el.name] = el.value.trim();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ($(el).data('useVar') !== 'true') {\n\t\t\t\t\t\t$(el).val(validate.response);\n\t\t\t\t\t\tel.defaultValue = validate.response;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.autocompleteShowing = false;\n\t},\n\tisRecursive: function(el) {\n\t\tvar match = new RegExp(el.name);\n\n\t\treturn match.test(el.value);\n\t},\n\tresetInput: function(input) {\n\t\t$(input).val(input.defaultValue);\n\t},\n\tshowMessage: function(message) {\n\t\tvar $messageBar = $('ref:message-bar'),\n\t\t\thideMessage = function() {\n\t\t\t\t$messageBar.removeClass('-is-active');\n\t\t\t};\n\n\t\t$messageBar.html('<span>' + message + '</span>').addClass('-is-active');\n\t\tsetTimeout(hideMessage, 4000);\n\t},\n\tparseValue: function(value) {\n\t\tvar preview = $('ref:previewFrame')[0].contentWindow,\n\t\t\tvars = preview.less.Parser.serializeVars(preview.weeVariables),\n\t\t\tcss = vars + '#foo { value: ' + value + '; }',\n\t\t\tresult = {};\n\n\t\tpreview.less.render(css, function(error, output) {\n\t\t\terror ?\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tresponse: error.message\n\t\t\t\t} :\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: true,\n\t\t\t\t\tresponse: output.css.match(/(?:: )(.*)(?=;)/)[1]\n\t\t\t\t};\n\t\t});\n\n\t\treturn result;\n\t},\n\tvalidate: function(val, el) {\n\t\tvar scope = this,\n\t\t\ttypes = $(el).data('validate').split('|'),\n\t\t\tresult = {};\n\n\t\ttypes.forEach(function(type) {\n\t\t\tif (type === 'unit') {\n\t\t\t\tresult = scope.isUnit(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'number') {\n\t\t\t\tresult = scope.isNumber(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'color') {\n\t\t\t\tresult = scope.isColor(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'font') {\n\t\t\t\tresult = scope.isFont(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'path') {\n\t\t\t\tresult = scope.isPath(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'file') {\n\t\t\t\tresult = scope.isFile(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'entity') {\n\t\t\t\tresult = scope.isEntity(val);\n\n\t\t\t\tif (result.valid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else if (type === 'selection' || type === 'string') {\n\t\t\t\tresult = {\n\t\t\t\t\tvalid: true,\n\t\t\t\t\tresponse: val\n\t\t\t\t};\n\n\t\t\t\treturn;\n\t\t\t} else if (type === 'false' || type === 'auto') {\n\t\t\t\tif (val.toLowerCase() === 'false' ||\n\t\t\t\t\tval.toLowerCase() === 'auto') {\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tvalid: true,\n\t\t\t\t\t\tresponse: val\n\t\t\t\t\t};\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t},\n\tisUnit: function(val) {\n\t\tvar match = /(^((\\.\\d+)|(\\d+(\\.\\d+)?)(%|px|em|rem)?)$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid unit.'\n\t\t};\n\t},\n\tisNumber: function(val) {\n\t\tvar match = /(^[1-9][0-9]*$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid number.'\n\t\t};\n\t},\n\tisColor: function(val) {\n\t\tvar scope = this,\n\t\t\tcolors = $('ref:previewFrame')[0].contentWindow.less.data.colors,\n\t\t\tmatch = /(^#[0-9a-f]{3,6}$)/i;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t} else if (scope.isColorKeyword(val, colors)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: colors[val]\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid color.'\n\t\t};\n\t},\n\tisColorKeyword: function(val, colors) {\n\t\tfor (var color in colors) {\n\t\t\tif (val === color) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\tisFont: function(val) {\n\t\tvar stack = val.split(','),\n\t\t\tmatch = /(^\"[\\da-z]((-|_| )?[\\da-z]+)*\"$)|(^[\\da-z]((-|_)?[\\da-z]+)*$)/i,\n\t\t\tisMatch = function(value) {\n\t\t\t\treturn match.test(value.trim());\n\t\t\t};\n\n\t\tif (stack.every(isMatch)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid font or font stack.'\n\t\t};\n\t},\n\tisPath: function(val) {\n\t\tvar match = /(^'(\\.\\.\\/)*([\\w]+\\/)*'$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid path.'\n\t\t};\n\t},\n\tisFile: function(val) {\n\t\tvar match = /(^'([\\w-]+\\.[\\w]+)'$)/;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid file.'\n\t\t};\n\t},\n\tisEntity: function(val) {\n\t\tvar match = /(^'(\\\\[0-9a-f]{4})+'$)/i;\n\n\t\tif (match.test(val)) {\n\t\t\treturn {\n\t\t\t\tvalid: true,\n\t\t\t\tresponse: val\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tvalid: false,\n\t\t\tresponse: 'Not a valid entity.'\n\t\t};\n\t},\n\tinitSelectAll: function() {\n\t\t$('ref:modal').on('click', function(e, el) {\n\t\t\tif (window.getSelection !== undefined &&\n\t\t\t\tdocument.createRange !== undefined) {\n\t\t\t\tvar range = document.createRange();\n\n\t\t\t\trange.selectNodeContents(el);\n\t\t\t\tvar sel = window.getSelection();\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (document.selection !== undefined &&\n\t\t\tdocument.body.createTextRange !== undefined) {\n\t\t\t\tvar textRange = document.body.createTextRange();\n\n\t\t\t\ttextRange.moveToElementText(el);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\t\t});\n\t}\n});"]}